{"ast":null,"code":"import _slicedToArray from \"/home/Earth/wuruchi/Documents/ReactProj/autosubmitreact/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/Earth/wuruchi/Documents/ReactProj/autosubmitreact/src/components/context/experiment/ExperimentState.js\";\nimport React, { useReducer } from 'react';\nimport axios from 'axios';\nimport ExperimentContext from './experimentContext';\nimport ExperimentReducer from './experimentReducer';\nimport { SEARCH_EXPERIMENTS, SET_LOADING, CLEAR_EXPERIMENTS, GET_EXPERIMENT, GET_GRAPH, SET_LOADING_GRAPH, CLEAN_GRAPH_DATA, UPDATE_SELECTION, GET_EXPERIMENT_RUN, SET_LOADING_RUN, CLEAN_RUN_DATA, SET_AUTOUPDATE_RUN, GET_PKL_DATA, SET_LOADING_PKL } from '../types';\n\nconst ExperimentState = props => {\n  const initialState = {\n    experiments: [],\n    experiment: {},\n    loading: false,\n    data: null,\n    rundata: null,\n    pkldata: null,\n    loadingGraph: false,\n    loadingRun: false,\n    loadingPkl: false,\n    selection: null,\n    enabledGraphSearch: true,\n    startAutoUpdateRun: false\n  };\n\n  const _useReducer = useReducer(ExperimentReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1]; // Search Experiments\n\n\n  const searchExperiments = async text => {\n    setLoading();\n    const res = await axios.get(\"http://84.88.185.94:8888/search/\".concat(text));\n    dispatch({\n      type: SEARCH_EXPERIMENTS,\n      payload: res.data.experiment\n    });\n  }; // Get Experiment\n\n\n  const getExperiment = async expid => {\n    setLoading(); //cleanGraphData();\n\n    const res = await axios.get(\"http://84.88.185.94:8888/expinfo/\".concat(expid));\n    dispatch({\n      type: GET_EXPERIMENT,\n      payload: res.data\n    });\n  }; // Get Experiment Graph\n\n\n  const getExperimentGraph = async expid => {\n    setLoadingGraph();\n    const res = await axios.get(\"http://84.88.185.94:8888/graph/\".concat(expid));\n    console.log(res.data);\n    dispatch({\n      type: GET_GRAPH,\n      payload: res.data\n    }); //this.setState({ data: res.data, loading: false, showGraph: !res.data.error });\n  }; // Get Experiment Run\n\n\n  const getExperimentRun = async expid => {\n    setLoadingRun();\n    const res = await axios.get(\"http://84.88.185.94:8888/exprun/\".concat(expid));\n    console.log(res.data);\n    dispatch({\n      type: GET_EXPERIMENT_RUN,\n      payload: res.data\n    });\n  }; // Get Experiment Pkl Data\n\n\n  const getExperimentPkl = async (expid, timeStamp) => {\n    setLoadingPkl();\n    const res = await axios.get(\"http://84.88.185.94:8888/pklinfo/\".concat(expid, \"/\").concat(timeStamp));\n    console.log(res.data); // const actualPkl = res.data;\n\n    if (state.data != null) {\n      for (var i = 0; i < state.data.nodes.length; i++) {\n        console.log(state.data.nodes[i]);\n      }\n    }\n\n    dispatch({\n      type: GET_PKL_DATA,\n      payload: res.data\n    });\n  }; // Cleaning\n\n\n  const clearExperiments = () => dispatch({\n    type: CLEAR_EXPERIMENTS\n  });\n\n  const cleanGraphData = () => dispatch({\n    type: CLEAN_GRAPH_DATA\n  });\n\n  const cleanRunData = () => dispatch({\n    type: CLEAN_RUN_DATA\n  }); // Set Loading\n\n\n  const setLoading = () => dispatch({\n    type: SET_LOADING\n  });\n\n  const setLoadingGraph = () => dispatch({\n    type: SET_LOADING_GRAPH\n  });\n\n  const setLoadingRun = () => dispatch({\n    type: SET_LOADING_RUN\n  });\n\n  const setLoadingPkl = () => dispatch({\n    type: SET_LOADING_PKL\n  }); // Action Things\n\n\n  const updateSelection = currentSelection => dispatch({\n    type: UPDATE_SELECTION,\n    payload: currentSelection\n  });\n\n  const setAutoUpdateRun = () => dispatch({\n    type: SET_AUTOUPDATE_RUN\n  }); // Other Utils\n\n\n  const hashCode = value => {\n    var hash = 0,\n        i,\n        chr;\n    if (value.length === 0) return hash;\n\n    for (i = 0; i < value.length; i++) {\n      chr = value.charCodeAt(i);\n      hash = (hash << 5) - hash + chr;\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    console.log(hash);\n    return hash;\n  };\n\n  return React.createElement(ExperimentContext.Provider, {\n    value: {\n      experiments: state.experiments,\n      experiment: state.experiment,\n      loading: state.loading,\n      loadingGraph: state.loadingGraph,\n      loadingRun: state.loadingRun,\n      loadingPkl: state.loadingPkl,\n      data: state.data,\n      rundata: state.rundata,\n      pkldata: state.pkldata,\n      selection: state.selection,\n      enabledGraphSearch: state.enabledGraphSearch,\n      startAutoUpdateRun: state.startAutoUpdateRun,\n      setAutoUpdateRun,\n      searchExperiments,\n      clearExperiments,\n      getExperiment,\n      getExperimentGraph,\n      cleanGraphData,\n      cleanRunData,\n      updateSelection,\n      getExperimentRun,\n      getExperimentPkl,\n      hashCode\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default ExperimentState;","map":{"version":3,"sources":["/home/Earth/wuruchi/Documents/ReactProj/autosubmitreact/src/components/context/experiment/ExperimentState.js"],"names":["React","useReducer","axios","ExperimentContext","ExperimentReducer","SEARCH_EXPERIMENTS","SET_LOADING","CLEAR_EXPERIMENTS","GET_EXPERIMENT","GET_GRAPH","SET_LOADING_GRAPH","CLEAN_GRAPH_DATA","UPDATE_SELECTION","GET_EXPERIMENT_RUN","SET_LOADING_RUN","CLEAN_RUN_DATA","SET_AUTOUPDATE_RUN","GET_PKL_DATA","SET_LOADING_PKL","ExperimentState","props","initialState","experiments","experiment","loading","data","rundata","pkldata","loadingGraph","loadingRun","loadingPkl","selection","enabledGraphSearch","startAutoUpdateRun","state","dispatch","searchExperiments","text","setLoading","res","get","type","payload","getExperiment","expid","getExperimentGraph","setLoadingGraph","console","log","getExperimentRun","setLoadingRun","getExperimentPkl","timeStamp","setLoadingPkl","i","nodes","length","clearExperiments","cleanGraphData","cleanRunData","updateSelection","currentSelection","setAutoUpdateRun","hashCode","value","hash","chr","charCodeAt","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport ExperimentContext from './experimentContext';\nimport ExperimentReducer from './experimentReducer';\nimport {\n  SEARCH_EXPERIMENTS,\n  SET_LOADING,\n  CLEAR_EXPERIMENTS,\n  GET_EXPERIMENT,\n  GET_GRAPH,\n  SET_LOADING_GRAPH,\n  CLEAN_GRAPH_DATA,\n  UPDATE_SELECTION,\n  GET_EXPERIMENT_RUN,\n  SET_LOADING_RUN,\n  CLEAN_RUN_DATA,\n  SET_AUTOUPDATE_RUN,\n  GET_PKL_DATA,\n  SET_LOADING_PKL,\n} from '../types';\n\nconst ExperimentState = props => {\n    const initialState = {\n        experiments: [],\n        experiment: {},\n        loading: false,\n        data: null,\n        rundata: null,\n        pkldata: null,\n        loadingGraph: false,\n        loadingRun: false,\n        loadingPkl: false,\n        selection: null,\n        enabledGraphSearch: true,  \n        startAutoUpdateRun: false,      \n    }\n\n    const [state, dispatch] = useReducer(ExperimentReducer, initialState);\n\n    // Search Experiments\n    const searchExperiments = async text => {\n        setLoading();\n        const res = await axios.get(`http://84.88.185.94:8888/search/${text}`);\n        dispatch({\n            type: SEARCH_EXPERIMENTS,\n            payload: res.data.experiment,\n        });\n      };\n\n    // Get Experiment\n    const getExperiment = async expid => {\n        setLoading();\n        //cleanGraphData();\n        const res = await axios.get(`http://84.88.185.94:8888/expinfo/${expid}`);        \n        dispatch({\n            type: GET_EXPERIMENT,\n            payload: res.data,\n        });\n      };\n    \n    // Get Experiment Graph\n    const getExperimentGraph = async expid => {\n        setLoadingGraph();\n        \n        const res = await axios.get(`http://84.88.185.94:8888/graph/${expid}`);\n        console.log(res.data);\n        dispatch({\n            type: GET_GRAPH,\n            payload: res.data,\n        });\n        //this.setState({ data: res.data, loading: false, showGraph: !res.data.error });\n      };\n\n    // Get Experiment Run\n    const getExperimentRun = async expid => {\n        setLoadingRun();\n        const res = await axios.get(`http://84.88.185.94:8888/exprun/${expid}`);\n        console.log(res.data);\n        dispatch({\n            type: GET_EXPERIMENT_RUN,\n            payload: res.data,\n        });\n    }\n\n    // Get Experiment Pkl Data\n    const getExperimentPkl = async (expid, timeStamp) => {\n      setLoadingPkl();\n      const res = await axios.get(`http://84.88.185.94:8888/pklinfo/${expid}/${timeStamp}`);\n      console.log(res.data);\n      // const actualPkl = res.data;\n      \n      if (state.data != null){\n        for(var i = 0; i < state.data.nodes.length; i++){\n          console.log(state.data.nodes[i])\n        }\n      }\n\n      dispatch({\n        type: GET_PKL_DATA,\n        payload: res.data,\n      });\n    }\n\n    // Cleaning\n    const clearExperiments = () => dispatch({ type: CLEAR_EXPERIMENTS });\n    const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n    const cleanRunData = () => dispatch({ type: CLEAN_RUN_DATA });\n\n    // Set Loading\n    const setLoading = () => dispatch({ type: SET_LOADING });\n    const setLoadingGraph = () => dispatch({ type: SET_LOADING_GRAPH });\n    const setLoadingRun = () => dispatch({ type: SET_LOADING_RUN });\n    const setLoadingPkl = () => dispatch({ type: SET_LOADING_PKL });\n\n\n    // Action Things\n    const updateSelection = (currentSelection) => dispatch({ type: UPDATE_SELECTION, payload: currentSelection });\n    const setAutoUpdateRun = () => dispatch({ type: SET_AUTOUPDATE_RUN });\n\n    // Other Utils\n    const hashCode = (value) => {\n        var hash = 0, i, chr;\n        if (value.length === 0) return hash;\n        for (i = 0; i < value.length; i++) {\n          chr   = value.charCodeAt(i);\n          hash  = ((hash << 5) - hash) + chr;\n          hash |= 0; // Convert to 32bit integer\n        }\n        console.log(hash);\n        return hash;\n      };\n\n    return (\n        <ExperimentContext.Provider\n        value ={{\n            experiments: state.experiments,\n            experiment: state.experiment,\n            loading: state.loading,\n            loadingGraph: state.loadingGraph,\n            loadingRun: state.loadingRun,\n            loadingPkl: state.loadingPkl,\n            data: state.data,\n            rundata: state.rundata,\n            pkldata: state.pkldata,\n            selection: state.selection,\n            enabledGraphSearch: state.enabledGraphSearch,\n            startAutoUpdateRun: state.startAutoUpdateRun,\n            setAutoUpdateRun,\n            searchExperiments,\n            clearExperiments,\n            getExperiment,\n            getExperimentGraph,\n            cleanGraphData, \n            cleanRunData,\n            updateSelection,\n            getExperimentRun, \n            getExperimentPkl,           \n            hashCode,       \n        }}>\n            {props.children}\n        </ExperimentContext.Provider>\n    );\n};\n\nexport default ExperimentState;"]},"metadata":{},"sourceType":"module"}