{"ast":null,"code":"import _slicedToArray from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import LighterContext from\"../context/lighter/lighterContext\";import ExperimentContext from\"../context/experiment/experimentContext\";import AlertTotal from\"./AlertTotal\";import{completedColor,runningColor,queueColor,failedColor}from\"../context/vars\";var LighterControl=function LighterControl(){var lighterContext=useContext(LighterContext);var experimentContext=useContext(ExperimentContext);var getLighterView=lighterContext.getLighterView,loadingView=lighterContext.loadingView,lightData=lighterContext.lightData,filterLighterTreeView=lighterContext.filterLighterTreeView,loadingFilterTreeView=lighterContext.loadingFilterTreeView,clearLighterFilterTreeView=lighterContext.clearLighterFilterTreeView,filterCount=lighterContext.filterCount;var experiment=experimentContext.experiment;//const { enabledTreeSearch } = treeContext;\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filterString=_useState2[0],setFilterString=_useState2[1];var onSubmit=function onSubmit(e){e.preventDefault();filterLighterTreeView(filterString);};var onChangeFilter=function onChangeFilter(e){return setFilterString(e.target.value);};var onClearFilter=function onClearFilter(e){e.preventDefault();clearLighterFilterTreeView();};var onSubmitRequest=function onSubmitRequest(e){e.preventDefault();getLighterView(experiment.expid);};var onFilterStatus=function onFilterStatus(statusString){return function(e){e.preventDefault();filterLighterTreeView(statusString);};};var labelButton=lightData?\"Refresh\":\"View\";var clearText=\"Clear\";if(filterCount&&filterCount>=0){clearText=\"Clear Result\";}return/*#__PURE__*/React.createElement(\"div\",{className:\"card-header p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},lightData&&/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-sm btn-secondary\",onClick:onClearFilter},lightData.total,\" total jobs\"),lightData.completed>0&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn-sm\",type:\"button\",style:completedColor,onClick:onFilterStatus(\"#COMPLETED\"),disabled:loadingFilterTreeView},lightData.completed,\" completed\"),lightData.failed>0&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn-sm\",type:\"button\",style:failedColor,onClick:onFilterStatus(\"#FAILED\"),disabled:loadingFilterTreeView},lightData.failed,\" failed\"),lightData.running>0&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn-sm\",type:\"button\",style:runningColor,onClick:onFilterStatus(\"#RUNNING\"),disabled:loadingFilterTreeView},lightData.running,\" running\"),lightData.queuing>0&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn-sm\",type:\"button\",style:queueColor,onClick:onFilterStatus(\"#QUEUING\"),disabled:loadingFilterTreeView},lightData.queuing,\" queuing\")),lightData&&/*#__PURE__*/React.createElement(AlertTotal,{source:\"lighter\"}),lightData&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit,className:\"form\",autoComplete:\"off\"},loadingFilterTreeView&&/*#__PURE__*/React.createElement(\"span\",null,\"Searching...\"),!loadingFilterTreeView&&/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-sm\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",name:\"section\",placeholder:\"Filter View\",onChange:onChangeFilter}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Filter\",className:\"btn btn-dark btn-sm\"}))))),lightData&&filterCount>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onClearFilter,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:clearText,className:\"btn btn-info btn-sm\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},experiment&&/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitRequest,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:labelButton,className:\"btn btn-success btn-block btn-sm\",disabled:loadingView})))));};export default LighterControl;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/experiment/LighterControl.js"],"names":["React","useContext","useState","LighterContext","ExperimentContext","AlertTotal","completedColor","runningColor","queueColor","failedColor","LighterControl","lighterContext","experimentContext","getLighterView","loadingView","lightData","filterLighterTreeView","loadingFilterTreeView","clearLighterFilterTreeView","filterCount","experiment","filterString","setFilterString","onSubmit","e","preventDefault","onChangeFilter","target","value","onClearFilter","onSubmitRequest","expid","onFilterStatus","statusString","labelButton","clearText","total","completed","failed","running","queuing"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport LighterContext from \"../context/lighter/lighterContext\";\nimport ExperimentContext from \"../context/experiment/experimentContext\";\nimport AlertTotal from \"./AlertTotal\";\nimport {\n  completedColor,\n  runningColor,\n  queueColor,\n  failedColor,\n} from \"../context/vars\";\n\nconst LighterControl = () => {\n  const lighterContext = useContext(LighterContext);\n  const experimentContext = useContext(ExperimentContext);\n  const {\n    getLighterView,\n    loadingView,\n    lightData,\n    filterLighterTreeView,\n    loadingFilterTreeView,\n    clearLighterFilterTreeView,\n    filterCount,\n  } = lighterContext;\n  const { experiment } = experimentContext;\n\n  //const { enabledTreeSearch } = treeContext;\n  const [filterString, setFilterString] = useState(\"\");\n  const onSubmit = (e) => {\n    e.preventDefault();\n    filterLighterTreeView(filterString);\n  };\n  const onChangeFilter = (e) => setFilterString(e.target.value);\n\n  const onClearFilter = (e) => {\n    e.preventDefault();\n    clearLighterFilterTreeView();\n  };\n\n  const onSubmitRequest = (e) => {\n    e.preventDefault();\n    getLighterView(experiment.expid);\n  };\n\n  const onFilterStatus = (statusString) => (e) => {\n    e.preventDefault();\n    filterLighterTreeView(statusString);\n  };\n\n  const labelButton = lightData ? \"Refresh\" : \"View\";\n\n  let clearText = \"Clear\";\n  if (filterCount && filterCount >= 0) {\n    clearText = \"Clear Result\";\n  }\n\n  return (\n    <div className='card-header p-1'>\n      <div className='row justify-content-end'>\n        {lightData && (\n          <div className='col'>\n            <button className='btn-sm btn-secondary' onClick={onClearFilter}>\n              {lightData.total} total jobs\n            </button>\n            {lightData.completed > 0 && (\n              <button\n                className='btn-sm'\n                type='button'\n                style={completedColor}\n                onClick={onFilterStatus(\"#COMPLETED\")}\n                disabled={loadingFilterTreeView}\n              >\n                {lightData.completed} completed\n              </button>\n            )}\n            {lightData.failed > 0 && (\n              <button\n                className='btn-sm'\n                type='button'\n                style={failedColor}\n                onClick={onFilterStatus(\"#FAILED\")}\n                disabled={loadingFilterTreeView}\n              >\n                {lightData.failed} failed\n              </button>\n            )}\n            {lightData.running > 0 && (\n              <button\n                className='btn-sm'\n                type='button'\n                style={runningColor}\n                onClick={onFilterStatus(\"#RUNNING\")}\n                disabled={loadingFilterTreeView}\n              >\n                {lightData.running} running\n              </button>\n            )}\n            {lightData.queuing > 0 && (\n              <button\n                className='btn-sm'\n                type='button'\n                style={queueColor}\n                onClick={onFilterStatus(\"#QUEUING\")}\n                disabled={loadingFilterTreeView}\n              >\n                {lightData.queuing} queuing\n              </button>\n            )}\n          </div>\n        )}\n        {lightData && <AlertTotal source={\"lighter\"} />}\n        {lightData && (\n          <div className='col-md'>\n            <form onSubmit={onSubmit} className='form' autoComplete='off'>\n              {loadingFilterTreeView && <span>Searching...</span>}\n              {!loadingFilterTreeView && (\n                <div className='input-group input-group-sm'>\n                  <input\n                    className='form-control'\n                    type='text'\n                    name='section'\n                    placeholder='Filter View'\n                    onChange={onChangeFilter}\n                  />\n                  <div className='input-group-append'>\n                    <input\n                      type='submit'\n                      value='Filter'\n                      className='btn btn-dark btn-sm'\n                    />\n                  </div>\n                </div>\n              )}\n            </form>\n          </div>\n        )}\n        {lightData && filterCount > 0 && (\n          <div className='col-md-1'>\n            <form onSubmit={onClearFilter} className='form'>\n              <input\n                type='submit'\n                value={clearText}\n                className='btn btn-info btn-sm'\n              />\n            </form>\n          </div>\n        )}\n        <div className='col-md-2'>\n          {experiment && (\n            <form onSubmit={onSubmitRequest} className='form'>\n              <input\n                type='submit'\n                value={labelButton}\n                className='btn btn-success btn-block btn-sm'\n                disabled={loadingView}\n              />\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LighterControl;\n"]},"metadata":{},"sourceType":"module"}