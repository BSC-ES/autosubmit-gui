{"ast":null,"code":"var _jsxFileName = \"/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/tree/TreeState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport TreeContext from \"./treeContext\";\nimport TreeReducer from \"./treeReducer\";\nimport { GET_TREE, SET_LOADING_TREE_REFRESH, SET_LOADING_TREE_PKL, PKL_TREE_LOADED, SET_FANCYTREE, SET_LOADING_FILTER, CLEAN_TREE_DATA, CLEAN_TREE_PKL_DATA, SET_AUTOUPDATE_TREE_PKL, UPDATE_SELECTION_TREE, CLEAR_FILTER_TREE, FILTER_TREEVIEW, SET_LOADING_TREE, SET_START_TREE_SELECTION, SET_NOTIFICATION_TITLE_TREE, SET_OFF_LOADING_TREE, INCREASE_LOADING_TREE, UPDATE_RUNDETAIL_ON_TREE, GET_EXPERIMENT_RUN_JOBDATA, LOADING_PREVIOUS_RUN } from \"../types\"; // import { start, end } from \"../utils\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG, NOAPI } from \"../vars\";\n\nconst TreeState = props => {\n  const initialState = {\n    treedata: null,\n    loadingTree: false,\n    enabledTreeSearch: true,\n    loadingTreePkl: false,\n    loadingTreeRefresh: false,\n    loadingFilterTree: false,\n    loadingPreviousRun: false,\n    fancyTree: null,\n    experimentRunDetailForTree: null,\n    currentRunIdOnTree: null,\n    elapsedLoadingTree: 1,\n    startAutoUpdateTreePkl: false,\n    pkltreechanges: null,\n    selectedTreeNode: null,\n    notificationTitleTree: null\n  };\n  const [state, dispatch] = useReducer(TreeReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  const debug = DEBUG;\n\n  const getExperimentTree = async expid => {\n    setLoadingTree();\n    let result = null; //start();\n\n    if (NOAPI) {\n      result = require(\"../data/tree_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/tree/${expid}`).catch(error => {\n        alert(error.message);\n        setOffLoadingTree();\n      });\n      result = res ? res.data : null;\n    }\n\n    if (result) {\n      debug && console.log(result);\n      dispatch({\n        type: GET_TREE,\n        payload: result\n      });\n    } //end();\n\n  }; // Get experiment pkl data for tree\n\n\n  const getExperimentTreePkl = async (expid, timeStamp) => {\n    //console.log(expid, timeStamp);\n    setLoadingTreePkl();\n    setLoadingTreeRefresh();\n    const res = await axios.get(`${localserver}/pkltreeinfo/${expid}/${timeStamp}`);\n    const retrievedPklTree = res.data;\n    debug && console.log(retrievedPklTree);\n    dispatch({\n      type: PKL_TREE_LOADED,\n      payload: retrievedPklTree\n    });\n  };\n\n  const getExperimentRunJobData = async (expid, run_id, meta) => {\n    setLoadingPreviousRun();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/rundetail_\" + String(expid) + \"_\" + String(run_id) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/rundetail/${expid}/${run_id}`).catch(error => {\n        alert(error.message);\n      });\n      debug && console.log(res.data); // console.log(res.data);\n\n      result = res ? res.data.rundata : null;\n    }\n\n    dispatch({\n      type: GET_EXPERIMENT_RUN_JOBDATA,\n      payload: {\n        result: result,\n        runId: run_id,\n        meta: meta\n      }\n    }); // setAutoUpdateTreePkl(false);\n  };\n\n  const updateTreeContent = async (runDetail, run_id) => {\n    // setLoadingTreePkl();\n    // setLoadingTreeRefresh();\n    // setLoadingTree();\n    dispatch({\n      type: UPDATE_RUNDETAIL_ON_TREE,\n      payload: {\n        runDetail: runDetail,\n        runId: run_id\n      }\n    });\n  };\n\n  const filterTreeView = string => {\n    setLoadingFilter();\n    dispatch({\n      type: FILTER_TREEVIEW,\n      payload: string\n    });\n  };\n\n  const setFancyTree = value => dispatch({\n    type: SET_FANCYTREE,\n    payload: value\n  });\n\n  const updateSelectionTree = currentSelected => {\n    dispatch({\n      type: UPDATE_SELECTION_TREE,\n      payload: currentSelected\n    });\n  };\n\n  const cleanTreeData = () => dispatch({\n    type: CLEAN_TREE_DATA\n  });\n\n  const cleanPklTreeData = () => dispatch({\n    type: CLEAN_TREE_PKL_DATA\n  });\n\n  const clearFilterTreeView = () => dispatch({\n    type: CLEAR_FILTER_TREE\n  });\n\n  const increaseElapsedLoadingTree = () => {\n    dispatch({\n      type: INCREASE_LOADING_TREE\n    });\n  };\n\n  const setLoadingTree = () => dispatch({\n    type: SET_LOADING_TREE\n  }); //here\n\n\n  const setLoadingPreviousRun = () => dispatch({\n    type: LOADING_PREVIOUS_RUN\n  });\n\n  const setOffLoadingTree = () => dispatch({\n    type: SET_OFF_LOADING_TREE\n  });\n\n  const setLoadingFilter = () => dispatch({\n    type: SET_LOADING_FILTER\n  });\n\n  const setLoadingTreeRefresh = () => dispatch({\n    type: SET_LOADING_TREE_REFRESH\n  });\n\n  const setLoadingTreePkl = () => dispatch({\n    type: SET_LOADING_TREE_PKL\n  });\n\n  const setAutoUpdateTreePkl = value => dispatch({\n    type: SET_AUTOUPDATE_TREE_PKL,\n    payload: value\n  });\n\n  const setStartSelection = () => dispatch({\n    type: SET_START_TREE_SELECTION\n  });\n\n  const setNotificationTitleTree = notification => dispatch({\n    type: SET_NOTIFICATION_TITLE_TREE,\n    payload: notification\n  });\n\n  return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n    value: {\n      treedata: state.treedata,\n      loadingTree: state.loadingTree,\n      loadingTreePkl: state.loadingTreePkl,\n      loadingFilterTree: state.loadingFilterTree,\n      enabledTreeSearch: state.enabledTreeSearch,\n      returnFilter: state.returnFilter,\n      fancyTree: state.fancyTree,\n      notificationTitleTree: state.notificationTitleTree,\n      loadingPreviousRun: state.loadingPreviousRun,\n      startAutoUpdateTreePkl: state.startAutoUpdateTreePkl,\n      pkltreechanges: state.pkltreechanges,\n      selectedTreeNode: state.selectedTreeNode,\n      expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n      elapsedLoadingTree: state.elapsedLoadingTree,\n      currentRunIdOnTree: state.currentRunIdOnTree,\n      getExperimentTree,\n      getExperimentTreePkl,\n      filterTreeView,\n      setFancyTree,\n      cleanTreeData,\n      cleanPklTreeData,\n      updateSelectionTree,\n      setAutoUpdateTreePkl,\n      clearFilterTreeView,\n      setStartSelection,\n      setNotificationTitleTree,\n      increaseElapsedLoadingTree,\n      updateTreeContent,\n      getExperimentRunJobData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default TreeState;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/tree/TreeState.js"],"names":["React","useReducer","axios","TreeContext","TreeReducer","GET_TREE","SET_LOADING_TREE_REFRESH","SET_LOADING_TREE_PKL","PKL_TREE_LOADED","SET_FANCYTREE","SET_LOADING_FILTER","CLEAN_TREE_DATA","CLEAN_TREE_PKL_DATA","SET_AUTOUPDATE_TREE_PKL","UPDATE_SELECTION_TREE","CLEAR_FILTER_TREE","FILTER_TREEVIEW","SET_LOADING_TREE","SET_START_TREE_SELECTION","SET_NOTIFICATION_TITLE_TREE","SET_OFF_LOADING_TREE","INCREASE_LOADING_TREE","UPDATE_RUNDETAIL_ON_TREE","GET_EXPERIMENT_RUN_JOBDATA","LOADING_PREVIOUS_RUN","AUTOSUBMIT_API_SOURCE","DEBUG","NOAPI","TreeState","props","initialState","treedata","loadingTree","enabledTreeSearch","loadingTreePkl","loadingTreeRefresh","loadingFilterTree","loadingPreviousRun","fancyTree","experimentRunDetailForTree","currentRunIdOnTree","elapsedLoadingTree","startAutoUpdateTreePkl","pkltreechanges","selectedTreeNode","notificationTitleTree","state","dispatch","localserver","debug","getExperimentTree","expid","setLoadingTree","result","require","String","res","get","catch","error","alert","message","setOffLoadingTree","data","console","log","type","payload","getExperimentTreePkl","timeStamp","setLoadingTreePkl","setLoadingTreeRefresh","retrievedPklTree","getExperimentRunJobData","run_id","meta","setLoadingPreviousRun","rundata","runId","updateTreeContent","runDetail","filterTreeView","string","setLoadingFilter","setFancyTree","value","updateSelectionTree","currentSelected","cleanTreeData","cleanPklTreeData","clearFilterTreeView","increaseElapsedLoadingTree","setAutoUpdateTreePkl","setStartSelection","setNotificationTitleTree","notification","returnFilter","expectedLoadingTreeTime","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport TreeContext from \"./treeContext\";\nimport TreeReducer from \"./treeReducer\";\n\nimport {\n  GET_TREE,\n  SET_LOADING_TREE_REFRESH,\n  SET_LOADING_TREE_PKL,\n  PKL_TREE_LOADED,\n  SET_FANCYTREE,\n  SET_LOADING_FILTER,\n  CLEAN_TREE_DATA,\n  CLEAN_TREE_PKL_DATA,\n  SET_AUTOUPDATE_TREE_PKL,\n  UPDATE_SELECTION_TREE,\n  CLEAR_FILTER_TREE,\n  FILTER_TREEVIEW,\n  SET_LOADING_TREE,\n  SET_START_TREE_SELECTION,\n  SET_NOTIFICATION_TITLE_TREE,\n  SET_OFF_LOADING_TREE,\n  INCREASE_LOADING_TREE,\n  UPDATE_RUNDETAIL_ON_TREE,\n  GET_EXPERIMENT_RUN_JOBDATA,  \n  LOADING_PREVIOUS_RUN,\n} from \"../types\";\n\n// import { start, end } from \"../utils\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG, NOAPI } from \"../vars\";\n\nconst TreeState = (props) => {\n  const initialState = {\n    treedata: null,\n    loadingTree: false,\n    enabledTreeSearch: true,\n    loadingTreePkl: false,\n    loadingTreeRefresh: false,\n    loadingFilterTree: false,\n    loadingPreviousRun: false,\n    fancyTree: null,\n    experimentRunDetailForTree: null,\n    currentRunIdOnTree: null,\n    elapsedLoadingTree: 1,\n    startAutoUpdateTreePkl: false,\n    pkltreechanges: null,\n    selectedTreeNode: null,\n    notificationTitleTree: null,\n  };\n\n  const [state, dispatch] = useReducer(TreeReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  const debug = DEBUG;\n  \n  const getExperimentTree = async (expid) => {\n    setLoadingTree();\n    let result = null;\n    //start();\n    if (NOAPI) {\n      result = require(\"../data/tree_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios\n      .get(`${localserver}/tree/${expid}`)\n      .catch((error) => {\n        alert(error.message);\n        setOffLoadingTree();\n      });\n      result = res ? res.data : null;\n    }\n  \n    if (result) {\n      debug && console.log(result);\n      dispatch({\n        type: GET_TREE,\n        payload: result,\n      });\n    }\n\n    //end();\n  };\n\n  // Get experiment pkl data for tree\n  const getExperimentTreePkl = async (expid, timeStamp) => {\n    //console.log(expid, timeStamp);\n    setLoadingTreePkl();\n    setLoadingTreeRefresh();\n    const res = await axios.get(\n      `${localserver}/pkltreeinfo/${expid}/${timeStamp}`\n    );\n    const retrievedPklTree = res.data;\n    debug && console.log(retrievedPklTree);\n    dispatch({\n      type: PKL_TREE_LOADED,\n      payload: retrievedPklTree,\n    });\n  };\n\n  const getExperimentRunJobData = async (expid, run_id, meta) => {\n    setLoadingPreviousRun();\n    let result = null;\n    if (NOAPI) {\n      result = require(\"../data/rundetail_\"+String(expid)+\"_\"+String(run_id)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/rundetail/${expid}/${run_id}`).catch((error) => { alert(error.message);});\n      debug && console.log(res.data);\n      // console.log(res.data);\n      result = res ? res.data.rundata : null;\n    }\n    \n    dispatch({\n      type: GET_EXPERIMENT_RUN_JOBDATA,\n      payload: {result: result, runId: run_id, meta: meta},\n    });    \n    // setAutoUpdateTreePkl(false);\n  }\n\n  const updateTreeContent = async (runDetail, run_id) => {\n    // setLoadingTreePkl();\n    // setLoadingTreeRefresh();\n    // setLoadingTree();\n    dispatch({\n      type: UPDATE_RUNDETAIL_ON_TREE,\n      payload: {runDetail: runDetail, runId: run_id},\n    })\n  }\n\n  const filterTreeView = (string) => {\n    setLoadingFilter();\n    dispatch({\n      type: FILTER_TREEVIEW,\n      payload: string,\n    });\n  };\n\n  const setFancyTree = (value) =>\n    dispatch({ type: SET_FANCYTREE, payload: value });\n\n  const updateSelectionTree = (currentSelected) => {\n    dispatch({ type: UPDATE_SELECTION_TREE, payload: currentSelected });\n  };\n\n  const cleanTreeData = () => dispatch({ type: CLEAN_TREE_DATA });\n  const cleanPklTreeData = () => dispatch({ type: CLEAN_TREE_PKL_DATA });\n  const clearFilterTreeView = () =>\n    dispatch({\n      type: CLEAR_FILTER_TREE,\n    });\n  const increaseElapsedLoadingTree = () => {\n    dispatch({ type: INCREASE_LOADING_TREE });\n  };\n\n  const setLoadingTree = () => dispatch({ type: SET_LOADING_TREE }); //here\n  const setLoadingPreviousRun = () => dispatch({ type: LOADING_PREVIOUS_RUN });\n  const setOffLoadingTree = () => dispatch({ type: SET_OFF_LOADING_TREE });\n  const setLoadingFilter = () => dispatch({ type: SET_LOADING_FILTER });\n  const setLoadingTreeRefresh = () =>\n    dispatch({ type: SET_LOADING_TREE_REFRESH });\n  const setLoadingTreePkl = () => dispatch({ type: SET_LOADING_TREE_PKL });\n  const setAutoUpdateTreePkl = (value) =>\n    dispatch({ type: SET_AUTOUPDATE_TREE_PKL, payload: value });\n\n  const setStartSelection = () => dispatch({ type: SET_START_TREE_SELECTION });\n  const setNotificationTitleTree = (notification) =>\n    dispatch({ type: SET_NOTIFICATION_TITLE_TREE, payload: notification });\n\n  return (\n    <TreeContext.Provider\n      value={{\n        treedata: state.treedata,\n        loadingTree: state.loadingTree,\n        loadingTreePkl: state.loadingTreePkl,\n        loadingFilterTree: state.loadingFilterTree,\n        enabledTreeSearch: state.enabledTreeSearch,\n        returnFilter: state.returnFilter,\n        fancyTree: state.fancyTree,\n        notificationTitleTree: state.notificationTitleTree,\n        loadingPreviousRun: state.loadingPreviousRun,\n        startAutoUpdateTreePkl: state.startAutoUpdateTreePkl,\n        pkltreechanges: state.pkltreechanges,\n        selectedTreeNode: state.selectedTreeNode,\n        expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n        elapsedLoadingTree: state.elapsedLoadingTree,\n        currentRunIdOnTree: state.currentRunIdOnTree,\n        getExperimentTree,\n        getExperimentTreePkl,\n        filterTreeView,\n        setFancyTree,\n        cleanTreeData,\n        cleanPklTreeData,\n        updateSelectionTree,\n        setAutoUpdateTreePkl,\n        clearFilterTreeView,\n        setStartSelection,\n        setNotificationTitleTree,\n        increaseElapsedLoadingTree,\n        updateTreeContent,\n        getExperimentRunJobData,\n      }}\n    >\n      {props.children}\n    </TreeContext.Provider>\n  );\n};\n\nexport default TreeState;\n"]},"metadata":{},"sourceType":"module"}