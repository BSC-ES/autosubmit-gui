{"ast":null,"code":"import React,{useContext}from\"react\";import ExperimentContext from\"../context/experiment/experimentContext\";import TreeContext from\"../context/tree/treeContext\";import SelectionControl from\"./SelectionControl\";var TreeControl=function TreeControl(){var experimentContext=useContext(ExperimentContext);var treeContext=useContext(TreeContext);var experiment=experimentContext.experiment,experimentRunning=experimentContext.experimentRunning;var treedata=treeContext.treedata,getExperimentTree=treeContext.getExperimentTree,cleanTreeData=treeContext.cleanTreeData,enabledTreeSearch=treeContext.enabledTreeSearch,getExperimentTreePkl=treeContext.getExperimentTreePkl,loadingTreeRefresh=treeContext.loadingTreeRefresh,setAutoUpdateTreePkl=treeContext.setAutoUpdateTreePkl,startAutoUpdateTreePkl=treeContext.startAutoUpdateTreePkl,loadingTreePkl=treeContext.loadingTreePkl,currentRunIdOnTree=treeContext.currentRunIdOnTree;var onSubmitTree=function onSubmitTree(e){e.preventDefault();getExperimentTree(experiment.expid);};var onClearTree=function onClearTree(e){e.preventDefault();cleanTreeData();};var onRequestUpdate=function onRequestUpdate(e){e.preventDefault();getExperimentTreePkl(experiment.expid,experiment.pkl_timestamp);};var onJobMonitor=function onJobMonitor(e){e.preventDefault();setAutoUpdateTreePkl(true);};var onNotJobMonitor=function onNotJobMonitor(e){e.preventDefault();setAutoUpdateTreePkl(false);};var disabledQuery=!enabledTreeSearch||loadingTreePkl;return/*#__PURE__*/React.createElement(\"div\",{className:\"card-header p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},currentRunIdOnTree&&/*#__PURE__*/React.createElement(\"div\",{className:\"col text-left\"},/*#__PURE__*/React.createElement(\"small\",null,currentRunIdOnTree.message)),(loadingTreeRefresh||loadingTreePkl)&&/*#__PURE__*/React.createElement(\"div\",{className:\"col text-left\"},\"Querying...\"),experiment&&treedata&&!currentRunIdOnTree&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(SelectionControl,null)),experiment&&!treedata&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitTree,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Show\",className:\"btn btn-info btn-block btn-sm\",disabled:disabledQuery}))),experiment&&treedata&&!startAutoUpdateTreePkl&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onClearTree,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Clear Tree\",className:\"btn btn-secondary btn-block btn-sm\",disabled:disabledQuery}))),experiment&&treedata&&experimentRunning&&!startAutoUpdateTreePkl&&!currentRunIdOnTree&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onRequestUpdate,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Refresh\",className:\"btn btn-success btn-block btn-sm\",disabled:disabledQuery}))),experimentRunning&&treedata&&!startAutoUpdateTreePkl&&!currentRunIdOnTree&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onJobMonitor,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Start Job Monitor\",className:\"btn btn-success btn-block btn-sm\",disabled:disabledQuery}))),experimentRunning&&treedata&&startAutoUpdateTreePkl&&!currentRunIdOnTree&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onNotJobMonitor,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Stop Job Monitor\",className:\"btn btn-danger btn-block btn-sm\",disabled:disabledQuery})))));};export default TreeControl;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/experiment/TreeControl.js"],"names":["React","useContext","ExperimentContext","TreeContext","SelectionControl","TreeControl","experimentContext","treeContext","experiment","experimentRunning","treedata","getExperimentTree","cleanTreeData","enabledTreeSearch","getExperimentTreePkl","loadingTreeRefresh","setAutoUpdateTreePkl","startAutoUpdateTreePkl","loadingTreePkl","currentRunIdOnTree","onSubmitTree","e","preventDefault","expid","onClearTree","onRequestUpdate","pkl_timestamp","onJobMonitor","onNotJobMonitor","disabledQuery","message"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport ExperimentContext from \"../context/experiment/experimentContext\";\nimport TreeContext from \"../context/tree/treeContext\";\nimport SelectionControl from \"./SelectionControl\";\n\nconst TreeControl = () => {\n  const experimentContext = useContext(ExperimentContext);\n  const treeContext = useContext(TreeContext);\n  const { experiment, experimentRunning } = experimentContext;\n\n  const {\n    treedata,\n    getExperimentTree,\n    cleanTreeData,\n    enabledTreeSearch,\n    getExperimentTreePkl,\n    loadingTreeRefresh,\n    setAutoUpdateTreePkl,\n    startAutoUpdateTreePkl,\n    loadingTreePkl,\n    currentRunIdOnTree,\n  } = treeContext;\n\n  const onSubmitTree = (e) => {\n    e.preventDefault();\n    getExperimentTree(experiment.expid);\n  };\n\n  const onClearTree = (e) => {\n    e.preventDefault();\n    cleanTreeData();\n  };\n\n  const onRequestUpdate = (e) => {\n    e.preventDefault();\n    getExperimentTreePkl(experiment.expid, experiment.pkl_timestamp);\n  };\n\n  const onJobMonitor = (e) => {\n    e.preventDefault();\n    setAutoUpdateTreePkl(true);\n  };\n\n  const onNotJobMonitor = (e) => {\n    e.preventDefault();\n    setAutoUpdateTreePkl(false);\n  };\n\n  const disabledQuery = !enabledTreeSearch || loadingTreePkl;\n\n  return (\n    <div className='card-header p-1'>\n      <div className='row justify-content-end'>\n        {currentRunIdOnTree && (\n          <div className=\"col text-left\" ><small>{currentRunIdOnTree.message}</small></div>\n        )}\n        {(loadingTreeRefresh || loadingTreePkl) && (\n          <div className='col text-left'>Querying...</div>\n        )}\n        {experiment && treedata && !currentRunIdOnTree && (\n          <div className='col-md-2'>\n            <SelectionControl />\n          </div>\n        )}\n        {experiment && !treedata && (\n          <div className='col-md-1'>\n            <form onSubmit={onSubmitTree} className='form'>\n              <input\n                type='submit'\n                value='Show'\n                className='btn btn-info btn-block btn-sm'\n                disabled={disabledQuery}\n              />\n            </form>\n          </div>\n        )}\n        {experiment && treedata && !startAutoUpdateTreePkl && (\n          <div className='col-md-1'>\n            <form onSubmit={onClearTree} className='form'>\n              <input\n                type='submit'\n                value='Clear Tree'\n                className='btn btn-secondary btn-block btn-sm'\n                disabled={disabledQuery}\n              />\n            </form>\n          </div>\n        )}\n        {experiment &&\n          treedata &&\n          experimentRunning &&\n          !startAutoUpdateTreePkl && !currentRunIdOnTree && (\n            <div className='col-md-1'>\n              <form onSubmit={onRequestUpdate} className='form'>\n                <input\n                  type='submit'\n                  value='Refresh'\n                  className='btn btn-success btn-block btn-sm'\n                  disabled={disabledQuery}\n                />\n              </form>\n            </div>\n          )}\n        {experimentRunning && treedata && !startAutoUpdateTreePkl && !currentRunIdOnTree && (\n          <div className='col-md-2'>\n            <form onSubmit={onJobMonitor} className='form'>\n              <input\n                type='submit'\n                value='Start Job Monitor'\n                className='btn btn-success btn-block btn-sm'\n                disabled={disabledQuery}\n              />\n            </form>\n          </div>\n        )}\n        {experimentRunning && treedata && startAutoUpdateTreePkl && !currentRunIdOnTree && (\n          <div className='col-md-2'>\n            <form onSubmit={onNotJobMonitor} className='form'>\n              <input\n                type='submit'\n                value='Stop Job Monitor'\n                className='btn btn-danger btn-block btn-sm'\n                disabled={disabledQuery}\n              />\n            </form>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TreeControl;\n"]},"metadata":{},"sourceType":"module"}