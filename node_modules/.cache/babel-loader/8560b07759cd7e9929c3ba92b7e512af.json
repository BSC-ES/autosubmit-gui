{"ast":null,"code":"var _jsxFileName = \"/home/Earth/wuruchi/Documents/ReactProj/dev-autosubmitreact/autosubmitreact/src/components/experiment/GraphNativeRep.js\";\nimport React, { Component } from \"react\"; // import vis from \"vis-network\";\n\nimport Spinner from \"../layout/Spinner\";\nimport vis from \"vis-network\";\n\nclass GraphNativeRep extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.updateVisNodes = nodes => {\n      this.props.setVisData(nodes);\n    };\n\n    this.onLatest = statusCode => e => {\n      e.preventDefault();\n      this.props.navToLatest(statusCode); // Completed\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.shouldUpdateGraph === true) {\n      return true;\n    } else if (nextProps.data && this.props.data && nextProps.data.pkl_timestamp !== this.props.data.pkl_timestamp) {\n      console.log(\"Rerendering\");\n      return true;\n    } else if (nextProps.loadingGraph !== this.props.loadingGraph) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  componentWillUnmount() {\n    console.log(\"Unmounting\");\n    this.props.cleanGraphData();\n  }\n\n  render() {\n    if (this.props.loadingGraph) return React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    });\n\n    if (this.props.data == null) {\n      return React.createElement(\"div\", {\n        className: \"card-body text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"lead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Press \", React.createElement(\"span\", {\n        className: \"badge badge-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Show Graph\"), \" to see the graph representation of the experiment.\"), React.createElement(\"p\", {\n        className: \"lead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"If the experiment is running, press \", React.createElement(\"span\", {\n        className: \"badge badge-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Start Job Monitor\"), \" to start a live tracker of the changes on the experiment's jobs. This process will automatically update the graph's nodes colors and show a log of the detected changes.\"));\n    }\n\n    var nodes_array = [];\n    var edges_array = [];\n\n    if (this.props.data.nodes !== null || this.props.data.edges !== null) {\n      this.props.data.nodes.map(node => nodes_array.push({\n        id: node.id,\n        label: node.label,\n        color: {\n          background: node.status_color,\n          border: \"black\"\n        },\n        level: node.level\n      }));\n      this.props.data.edges.map(edge => edges_array.push({\n        from: edge.from,\n        to: edge.to\n      }));\n    }\n\n    var nodes = new vis.DataSet(nodes_array);\n    var edges = new vis.DataSet(edges_array);\n    var shouldEdge = false;\n\n    if (this.props.data.total_jobs <= 500) {\n      shouldEdge = true;\n    }\n\n    const options = {\n      edges: {\n        arrows: {\n          to: {\n            enabled: true\n          }\n        }\n      },\n      layout: {\n        improvedLayout: false,\n        hierarchical: {\n          nodeSpacing: 190,\n          blockShifting: false,\n          edgeMinimization: shouldEdge,\n          parentCentralization: true,\n          sortMethod: 'hubsize',\n          direction: 'UD' // work on vis current version\n          // nodeSpacing: 190,\n          // blockShifting: false,\n          // edgeMinimization: false,\n          // parentCentralization: true,\n          // sortMethod: 'hubsize',\n          // direction: 'UD',\n\n        }\n      },\n      interaction: {\n        dragNodes: true,\n        hoverConnectedEdges: true,\n        hideEdgesOnDrag: true,\n        //hideEdgesOnZoom: true,\n        // multiselect: true,\n        navigationButtons: true\n      },\n      physics: {\n        enabled: false\n      },\n      nodes: {\n        shape: 'dot',\n        font: {\n          size: 10\n        }\n      }\n    };\n    const graph = {\n      nodes: nodes,\n      edges: edges\n    };\n\n    class VisNetwork extends Component {\n      shouldComponentUpdate(nextProps, nextState) {\n        if (this.props.shouldUpdateGraph === true) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n\n      componentDidMount() {\n        var network = new vis.Network(this.refs.myRef, this.props.graph, this.props.options);\n        this.props.setVisNetwork(network);\n        network.on(\"click\", params => {\n          console.log(params);\n\n          if (params.nodes) {\n            //console.log(params.nodes);\n            this.props.updateSelection(params.nodes);\n          }\n        });\n      } // componentWillUnmount() {\n      //     console.log(\"Unmounting\");\n      //     this.props.cleanGraphData();\n      // }\n\n\n      render() {\n        return React.createElement(\"div\", {\n          className: \"card-body p-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          ref: \"myRef\",\n          style: experimentStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }));\n      }\n\n    }\n\n    this.updateVisNodes(nodes);\n    return React.createElement(\"div\", {\n      className: \"col-12 px-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(VisNetwork, {\n      graph: graph,\n      options: options,\n      updateSelection: this.props.updateSelection,\n      shouldUpdateGraph: this.props.shouldUpdateGraph,\n      setVisNetwork: this.props.setVisNetwork,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(QueueCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Queue\",\n      className: \"btn btn-danger btn-block btn-sm\",\n      style: queueColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(CompletedCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Completed\",\n      className: \"btn btn-block btn-sm\",\n      style: completedColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(SubmittedCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submitted\",\n      className: \"btn btn-block btn-sm\",\n      style: submittedColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(RunningCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Running\",\n      className: \"btn btn-block btn-sm\",\n      style: runningColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(ReadyCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Ready\",\n      className: \"btn btn-block btn-sm\",\n      style: readyColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onLatest(FailedCode),\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Failed\",\n      className: \"btn btn-block btn-sm\",\n      style: failedColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nconst QueueCode = 3;\nconst FailedCode = -1;\nconst CompletedCode = 5;\nconst SubmittedCode = 2;\nconst RunningCode = 4;\nconst ReadyCode = 1;\nconst queueColor = {\n  background: 'lightpink'\n};\nconst failedColor = {\n  background: 'red'\n};\nconst completedColor = {\n  background: 'yellow'\n};\nconst submittedColor = {\n  background: 'cyan'\n};\nconst runningColor = {\n  background: 'green'\n};\nconst readyColor = {\n  background: 'lightblue'\n};\nconst experimentStyle = {\n  height: 600\n};\nexport default GraphNativeRep;","map":{"version":3,"sources":["/home/Earth/wuruchi/Documents/ReactProj/dev-autosubmitreact/autosubmitreact/src/components/experiment/GraphNativeRep.js"],"names":["React","Component","Spinner","vis","GraphNativeRep","updateVisNodes","nodes","props","setVisData","onLatest","statusCode","e","preventDefault","navToLatest","shouldComponentUpdate","nextProps","nextState","shouldUpdateGraph","data","pkl_timestamp","console","log","loadingGraph","componentWillUnmount","cleanGraphData","render","nodes_array","edges_array","edges","map","node","push","id","label","color","background","status_color","border","level","edge","from","to","DataSet","shouldEdge","total_jobs","options","arrows","enabled","layout","improvedLayout","hierarchical","nodeSpacing","blockShifting","edgeMinimization","parentCentralization","sortMethod","direction","interaction","dragNodes","hoverConnectedEdges","hideEdgesOnDrag","navigationButtons","physics","shape","font","size","graph","VisNetwork","componentDidMount","network","Network","refs","myRef","setVisNetwork","on","params","updateSelection","experimentStyle","QueueCode","queueColor","CompletedCode","completedColor","SubmittedCode","submittedColor","RunningCode","runningColor","ReadyCode","readyColor","FailedCode","failedColor","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import vis from \"vis-network\";\nimport Spinner from \"../layout/Spinner\";\nimport vis from \"vis-network\";\n\nclass GraphNativeRep extends Component {\n\n    shouldComponentUpdate(nextProps, nextState){ \n        if (this.props.shouldUpdateGraph === true){\n            return true\n          }else if (nextProps.data && this.props.data && (nextProps.data.pkl_timestamp !== this.props.data.pkl_timestamp)){\n            console.log(\"Rerendering\")\n            return true;\n          }else if (nextProps.loadingGraph !== this.props.loadingGraph){\n            return true;    \n          }else{\n            return false;\n          }\n    }\n    componentWillUnmount() {\n        console.log(\"Unmounting\");\n        this.props.cleanGraphData();\n    }\n\n    updateVisNodes = (nodes) => {\n        this.props.setVisData(nodes);\n    };\n\n    // onSubmit = (x,y) => e => {\n    //   e.preventDefault();\n    //   this.props.navigateGraph(x,y);\n    // };\n\n    onLatest = (statusCode) => e => {\n      e.preventDefault();\n      this.props.navToLatest(statusCode); // Completed\n    };\n\n    render () {\n        if (this.props.loadingGraph) return <Spinner></Spinner>;\n        if (this.props.data == null){\n            return (\n                <div className=\"card-body text-left\">\n                    <p className='lead'>Press <span className='badge badge-info'>Show Graph</span> to see the graph representation of the experiment.</p>\n                    <p className='lead'>If the experiment is running, press <span className='badge badge-dark'>Start Job Monitor</span> to start a live tracker of the changes on the experiment's jobs.\n                        This process will automatically update the graph's nodes colors and show a log of the detected changes.\n                    </p>\n                </div> \n            );\n        }\n\n        var nodes_array = [];\n        var edges_array = [];\n    \n        if (this.props.data.nodes !== null || this.props.data.edges !== null) {\n            this.props.data.nodes.map(node => nodes_array.push({\n                id: node.id,\n                label: node.label,\n                color: { background: node.status_color, border: \"black\" },\n                level: node.level,\n              })\n            );\n      \n            this.props.data.edges.map(edge => \n              edges_array.push({ from: edge.from, to: edge.to })\n            );\n        }\n    \n        var nodes = new vis.DataSet(nodes_array);\n        var edges = new vis.DataSet(edges_array);\n\n        var shouldEdge = false;\n        if (this.props.data.total_jobs <= 500){\n            shouldEdge = true;\n        }\n        const options = {\n            edges: {\n              arrows: {\n                to: { enabled: true }\n              }\n            },\n            layout: {\n              improvedLayout: false,\n              hierarchical: {\n                nodeSpacing: 190,                \n                blockShifting: false,\n                edgeMinimization: shouldEdge,\n                parentCentralization: true,\n                sortMethod: 'hubsize',\n                direction: 'UD',\n                // work on vis current version\n                // nodeSpacing: 190,\n                // blockShifting: false,\n                // edgeMinimization: false,\n                // parentCentralization: true,\n                // sortMethod: 'hubsize',\n                // direction: 'UD',\n              }\n            },            \n            interaction: {\n              dragNodes: true,\n              hoverConnectedEdges: true,\n              hideEdgesOnDrag: true,\n              //hideEdgesOnZoom: true,\n              // multiselect: true,\n              navigationButtons: true,\n            },\n            physics: {\n              enabled: false,\n            },\n            nodes: {\n              shape: 'dot',\n              font: {\n                size: 10,\n              },\n            }\n        };\n    \n        const graph = {\n            nodes : nodes,\n            edges : edges,\n        };\n\n        class VisNetwork extends Component {\n        \n            shouldComponentUpdate(nextProps, nextState){ \n               if (this.props.shouldUpdateGraph === true){\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n    \n            componentDidMount() {\n                var network = new vis.Network(this.refs.myRef, this.props.graph, this.props.options);\n                this.props.setVisNetwork(network);\n                network.on(\"click\", (params) => {\n                    console.log(params);\n                    if (params.nodes){\n                        //console.log(params.nodes);\n                        this.props.updateSelection(params.nodes);\n                    }\n                    \n                });\n            }\n    \n            // componentWillUnmount() {\n            //     console.log(\"Unmounting\");\n            //     this.props.cleanGraphData();\n            // }\n\n          \n    \n            render() {            \n                return (\n                    <div className='card-body p-0'>                    \n                        <div ref=\"myRef\" style={experimentStyle}></div>\n                    </div>\n                );\n            }\n        }\n\n        this.updateVisNodes(nodes);\n    \n        return (\n        <div className=\"col-12 px-0\">\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <VisNetwork \n                  graph={graph} \n                  options={options} \n                  updateSelection={this.props.updateSelection}\n                  shouldUpdateGraph={this.props.shouldUpdateGraph}\n                  setVisNetwork={this.props.setVisNetwork}\n                />\n              </div>\n            </div>            \n          <div className=\"row\">\n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(QueueCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Queue'\n                    className='btn btn-danger btn-block btn-sm' \n                    style={queueColor}                             \n                    />\n              </form>\n            </div> \n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(CompletedCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Completed'\n                    className='btn btn-block btn-sm'  \n                    style={completedColor}                            \n                    />\n              </form>\n            </div>   \n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(SubmittedCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Submitted'\n                    className='btn btn-block btn-sm'  \n                    style={submittedColor}                            \n                    />\n              </form>\n            </div>    \n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(RunningCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Running'\n                    className='btn btn-block btn-sm'  \n                    style={runningColor}                            \n                    />\n              </form>\n            </div> \n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(ReadyCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Ready'\n                    className='btn btn-block btn-sm'  \n                    style={readyColor}                            \n                    />\n              </form>\n            </div>  \n            <div className=\"col-2\">\n              <form onSubmit={this.onLatest(FailedCode)} className='form'>\n                    <input\n                    type='submit'\n                    value='Failed'\n                    className='btn btn-block btn-sm'  \n                    style={failedColor}                            \n                    />\n              </form>\n            </div>               \n          </div>\n        </div>\n        \n\n        );\n\n    }\n\n\n}\n\nconst QueueCode = 3;\nconst FailedCode = -1;\nconst CompletedCode = 5;\nconst SubmittedCode = 2;\nconst RunningCode = 4;\nconst ReadyCode = 1;\n\nconst queueColor = {\n  background: 'lightpink'\n};\nconst failedColor = {\n  background: 'red'\n};\nconst completedColor = {\n  background: 'yellow'\n};\nconst submittedColor = {\n  background: 'cyan'\n};\nconst runningColor = {\n  background: 'green'\n};\nconst readyColor = {\n  background: 'lightblue'\n}\n\nconst experimentStyle = {\n    height: 600\n  };\n\n\nexport default GraphNativeRep;\n"]},"metadata":{},"sourceType":"module"}