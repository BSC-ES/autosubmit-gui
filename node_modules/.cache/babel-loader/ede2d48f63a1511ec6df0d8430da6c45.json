{"ast":null,"code":"var _jsxFileName = \"/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/tree/TreeState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport TreeContext from \"./treeContext\";\nimport TreeReducer from \"./treeReducer\";\nimport { GET_TREE, SET_LOADING_TREE_REFRESH, SET_LOADING_TREE_PKL, PKL_TREE_LOADED, SET_FANCYTREE, SET_LOADING_FILTER, CLEAN_TREE_DATA, CLEAN_TREE_PKL_DATA, SET_AUTOUPDATE_TREE_PKL, UPDATE_SELECTION_TREE, CLEAR_FILTER_TREE, FILTER_TREEVIEW, SET_LOADING_TREE, SET_START_TREE_SELECTION, SET_NOTIFICATION_TITLE_TREE, SET_OFF_LOADING_TREE, INCREASE_LOADING_TREE } from \"../types\"; // import { start, end } from \"../utils\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG } from \"../vars\";\n\nconst TreeState = props => {\n  const initialState = {\n    treedata: null,\n    loadingTree: false,\n    enabledTreeSearch: true,\n    loadingTreePkl: false,\n    loadingTreeRefresh: false,\n    loadingFilterTree: false,\n    fancyTree: null,\n    //canSelect: false,\n    elapsedLoadingTree: 1,\n    startAutoUpdateTreePkl: false,\n    pkltreechanges: null,\n    selectedTreeNode: null,\n    notificationTitleTree: null\n  };\n  const [state, dispatch] = useReducer(TreeReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  const debug = DEBUG;\n\n  const getExperimentTree = async expid => {\n    setLoadingTree(); //start();\n\n    const res = await axios.get(`${localserver}/tree/${expid}`).catch(error => {\n      alert(error.message);\n      setOffLoadingTree();\n    });\n\n    if (res) {\n      debug && console.log(res.data);\n      dispatch({\n        type: GET_TREE,\n        payload: res.data\n      });\n    } //end();\n\n  }; // Get experiment pkl data for tree\n\n\n  const getExperimentTreePkl = async (expid, timeStamp) => {\n    //console.log(expid, timeStamp);\n    setLoadingTreePkl();\n    setLoadingTreeRefresh();\n    const res = await axios.get(`${localserver}/pkltreeinfo/${expid}/${timeStamp}`);\n    const retrievedPklTree = res.data;\n    debug && console.log(retrievedPklTree);\n    dispatch({\n      type: PKL_TREE_LOADED,\n      payload: retrievedPklTree\n    });\n  };\n\n  const filterTreeView = string => {\n    setLoadingFilter();\n    dispatch({\n      type: FILTER_TREEVIEW,\n      payload: string\n    });\n  };\n\n  const setFancyTree = value => dispatch({\n    type: SET_FANCYTREE,\n    payload: value\n  });\n\n  const updateSelectionTree = currentSelected => {\n    dispatch({\n      type: UPDATE_SELECTION_TREE,\n      payload: currentSelected\n    });\n  };\n\n  const cleanTreeData = () => dispatch({\n    type: CLEAN_TREE_DATA\n  });\n\n  const cleanPklTreeData = () => dispatch({\n    type: CLEAN_TREE_PKL_DATA\n  });\n\n  const clearFilterTreeView = () => dispatch({\n    type: CLEAR_FILTER_TREE\n  });\n\n  const increaseElapsedLoadingTree = () => {\n    dispatch({\n      type: INCREASE_LOADING_TREE\n    });\n  };\n\n  const setLoadingTree = () => dispatch({\n    type: SET_LOADING_TREE\n  }); //here\n\n\n  const setOffLoadingTree = () => dispatch({\n    type: SET_OFF_LOADING_TREE\n  });\n\n  const setLoadingFilter = () => dispatch({\n    type: SET_LOADING_FILTER\n  });\n\n  const setLoadingTreeRefresh = () => dispatch({\n    type: SET_LOADING_TREE_REFRESH\n  });\n\n  const setLoadingTreePkl = () => dispatch({\n    type: SET_LOADING_TREE_PKL\n  });\n\n  const setAutoUpdateTreePkl = value => dispatch({\n    type: SET_AUTOUPDATE_TREE_PKL,\n    payload: value\n  });\n\n  const setStartSelection = () => dispatch({\n    type: SET_START_TREE_SELECTION\n  });\n\n  const setNotificationTitleTree = notification => dispatch({\n    type: SET_NOTIFICATION_TITLE_TREE,\n    payload: notification\n  });\n\n  return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n    value: {\n      treedata: state.treedata,\n      loadingTree: state.loadingTree,\n      loadingTreePkl: state.loadingTreePkl,\n      loadingFilterTree: state.loadingFilterTree,\n      enabledTreeSearch: state.enabledTreeSearch,\n      returnFilter: state.returnFilter,\n      fancyTree: state.fancyTree,\n      notificationTitleTree: state.notificationTitleTree,\n      //canSelect: state.canSelect,\n      startAutoUpdateTreePkl: state.startAutoUpdateTreePkl,\n      pkltreechanges: state.pkltreechanges,\n      selectedTreeNode: state.selectedTreeNode,\n      expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n      elapsedLoadingTree: state.elapsedLoadingTree,\n      getExperimentTree,\n      getExperimentTreePkl,\n      filterTreeView,\n      setFancyTree,\n      cleanTreeData,\n      cleanPklTreeData,\n      updateSelectionTree,\n      setAutoUpdateTreePkl,\n      clearFilterTreeView,\n      setStartSelection,\n      setNotificationTitleTree,\n      increaseElapsedLoadingTree\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default TreeState;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/tree/TreeState.js"],"names":["React","useReducer","axios","TreeContext","TreeReducer","GET_TREE","SET_LOADING_TREE_REFRESH","SET_LOADING_TREE_PKL","PKL_TREE_LOADED","SET_FANCYTREE","SET_LOADING_FILTER","CLEAN_TREE_DATA","CLEAN_TREE_PKL_DATA","SET_AUTOUPDATE_TREE_PKL","UPDATE_SELECTION_TREE","CLEAR_FILTER_TREE","FILTER_TREEVIEW","SET_LOADING_TREE","SET_START_TREE_SELECTION","SET_NOTIFICATION_TITLE_TREE","SET_OFF_LOADING_TREE","INCREASE_LOADING_TREE","AUTOSUBMIT_API_SOURCE","DEBUG","TreeState","props","initialState","treedata","loadingTree","enabledTreeSearch","loadingTreePkl","loadingTreeRefresh","loadingFilterTree","fancyTree","elapsedLoadingTree","startAutoUpdateTreePkl","pkltreechanges","selectedTreeNode","notificationTitleTree","state","dispatch","localserver","debug","getExperimentTree","expid","setLoadingTree","res","get","catch","error","alert","message","setOffLoadingTree","console","log","data","type","payload","getExperimentTreePkl","timeStamp","setLoadingTreePkl","setLoadingTreeRefresh","retrievedPklTree","filterTreeView","string","setLoadingFilter","setFancyTree","value","updateSelectionTree","currentSelected","cleanTreeData","cleanPklTreeData","clearFilterTreeView","increaseElapsedLoadingTree","setAutoUpdateTreePkl","setStartSelection","setNotificationTitleTree","notification","returnFilter","expectedLoadingTreeTime","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,SACEC,QADF,EAEEC,wBAFF,EAGEC,oBAHF,EAIEC,eAJF,EAKEC,aALF,EAMEC,kBANF,EAOEC,eAPF,EAQEC,mBARF,EASEC,uBATF,EAUEC,qBAVF,EAWEC,iBAXF,EAYEC,eAZF,EAaEC,gBAbF,EAcEC,wBAdF,EAeEC,2BAfF,EAgBEC,oBAhBF,EAiBEC,qBAjBF,QAkBO,UAlBP,C,CAoBA;;AAEA,SAASC,qBAAT,EAAgCC,KAAhC,QAA6C,SAA7C;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAC3B,QAAMC,YAAY,GAAG;AACnBC,IAAAA,QAAQ,EAAE,IADS;AAEnBC,IAAAA,WAAW,EAAE,KAFM;AAGnBC,IAAAA,iBAAiB,EAAE,IAHA;AAInBC,IAAAA,cAAc,EAAE,KAJG;AAKnBC,IAAAA,kBAAkB,EAAE,KALD;AAMnBC,IAAAA,iBAAiB,EAAE,KANA;AAOnBC,IAAAA,SAAS,EAAE,IAPQ;AAQnB;AACAC,IAAAA,kBAAkB,EAAE,CATD;AAUnBC,IAAAA,sBAAsB,EAAE,KAVL;AAWnBC,IAAAA,cAAc,EAAE,IAXG;AAYnBC,IAAAA,gBAAgB,EAAE,IAZC;AAanBC,IAAAA,qBAAqB,EAAE;AAbJ,GAArB;AAgBA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBvC,UAAU,CAACG,WAAD,EAAcsB,YAAd,CAApC;AACA,QAAMe,WAAW,GAAGnB,qBAApB;AACA,QAAMoB,KAAK,GAAGnB,KAAd;;AAEA,QAAMoB,iBAAiB,GAAG,MAAOC,KAAP,IAAiB;AACzCC,IAAAA,cAAc,GAD2B,CAEzC;;AACA,UAAMC,GAAG,GAAG,MAAM5C,KAAK,CACpB6C,GADe,CACV,GAAEN,WAAY,SAAQG,KAAM,EADlB,EAEfI,KAFe,CAERC,KAAD,IAAW;AAChBC,MAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACAC,MAAAA,iBAAiB;AAClB,KALe,CAAlB;;AAMA,QAAIN,GAAJ,EAAS;AACPJ,MAAAA,KAAK,IAAIW,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACS,IAAhB,CAAT;AACAf,MAAAA,QAAQ,CAAC;AACPgB,QAAAA,IAAI,EAAEnD,QADC;AAEPoD,QAAAA,OAAO,EAAEX,GAAG,CAACS;AAFN,OAAD,CAAR;AAID,KAfwC,CAiBzC;;AACD,GAlBD,CArB2B,CAyC3B;;;AACA,QAAMG,oBAAoB,GAAG,OAAOd,KAAP,EAAce,SAAd,KAA4B;AACvD;AACAC,IAAAA,iBAAiB;AACjBC,IAAAA,qBAAqB;AACrB,UAAMf,GAAG,GAAG,MAAM5C,KAAK,CAAC6C,GAAN,CACf,GAAEN,WAAY,gBAAeG,KAAM,IAAGe,SAAU,EADjC,CAAlB;AAGA,UAAMG,gBAAgB,GAAGhB,GAAG,CAACS,IAA7B;AACAb,IAAAA,KAAK,IAAIW,OAAO,CAACC,GAAR,CAAYQ,gBAAZ,CAAT;AACAtB,IAAAA,QAAQ,CAAC;AACPgB,MAAAA,IAAI,EAAEhD,eADC;AAEPiD,MAAAA,OAAO,EAAEK;AAFF,KAAD,CAAR;AAID,GAbD;;AAeA,QAAMC,cAAc,GAAIC,MAAD,IAAY;AACjCC,IAAAA,gBAAgB;AAChBzB,IAAAA,QAAQ,CAAC;AACPgB,MAAAA,IAAI,EAAExC,eADC;AAEPyC,MAAAA,OAAO,EAAEO;AAFF,KAAD,CAAR;AAID,GAND;;AAQA,QAAME,YAAY,GAAIC,KAAD,IACnB3B,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAE/C,aAAR;AAAuBgD,IAAAA,OAAO,EAAEU;AAAhC,GAAD,CADV;;AAGA,QAAMC,mBAAmB,GAAIC,eAAD,IAAqB;AAC/C7B,IAAAA,QAAQ,CAAC;AAAEgB,MAAAA,IAAI,EAAE1C,qBAAR;AAA+B2C,MAAAA,OAAO,EAAEY;AAAxC,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMC,aAAa,GAAG,MAAM9B,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAE7C;AAAR,GAAD,CAApC;;AACA,QAAM4D,gBAAgB,GAAG,MAAM/B,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAE5C;AAAR,GAAD,CAAvC;;AACA,QAAM4D,mBAAmB,GAAG,MAC1BhC,QAAQ,CAAC;AACPgB,IAAAA,IAAI,EAAEzC;AADC,GAAD,CADV;;AAIA,QAAM0D,0BAA0B,GAAG,MAAM;AACvCjC,IAAAA,QAAQ,CAAC;AAAEgB,MAAAA,IAAI,EAAEnC;AAAR,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMwB,cAAc,GAAG,MAAML,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAEvC;AAAR,GAAD,CAArC,CAlF2B,CAkFwC;;;AACnE,QAAMmC,iBAAiB,GAAG,MAAMZ,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAEpC;AAAR,GAAD,CAAxC;;AACA,QAAM6C,gBAAgB,GAAG,MAAMzB,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAE9C;AAAR,GAAD,CAAvC;;AACA,QAAMmD,qBAAqB,GAAG,MAC5BrB,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAElD;AAAR,GAAD,CADV;;AAEA,QAAMsD,iBAAiB,GAAG,MAAMpB,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAEjD;AAAR,GAAD,CAAxC;;AACA,QAAMmE,oBAAoB,GAAIP,KAAD,IAC3B3B,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAE3C,uBAAR;AAAiC4C,IAAAA,OAAO,EAAEU;AAA1C,GAAD,CADV;;AAGA,QAAMQ,iBAAiB,GAAG,MAAMnC,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAEtC;AAAR,GAAD,CAAxC;;AACA,QAAM0D,wBAAwB,GAAIC,YAAD,IAC/BrC,QAAQ,CAAC;AAAEgB,IAAAA,IAAI,EAAErC,2BAAR;AAAqCsC,IAAAA,OAAO,EAAEoB;AAA9C,GAAD,CADV;;AAGA,sBACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLlD,MAAAA,QAAQ,EAAEY,KAAK,CAACZ,QADX;AAELC,MAAAA,WAAW,EAAEW,KAAK,CAACX,WAFd;AAGLE,MAAAA,cAAc,EAAES,KAAK,CAACT,cAHjB;AAILE,MAAAA,iBAAiB,EAAEO,KAAK,CAACP,iBAJpB;AAKLH,MAAAA,iBAAiB,EAAEU,KAAK,CAACV,iBALpB;AAMLiD,MAAAA,YAAY,EAAEvC,KAAK,CAACuC,YANf;AAOL7C,MAAAA,SAAS,EAAEM,KAAK,CAACN,SAPZ;AAQLK,MAAAA,qBAAqB,EAAEC,KAAK,CAACD,qBARxB;AASL;AACAH,MAAAA,sBAAsB,EAAEI,KAAK,CAACJ,sBAVzB;AAWLC,MAAAA,cAAc,EAAEG,KAAK,CAACH,cAXjB;AAYLC,MAAAA,gBAAgB,EAAEE,KAAK,CAACF,gBAZnB;AAaL0C,MAAAA,uBAAuB,EAAExC,KAAK,CAACwC,uBAb1B;AAcL7C,MAAAA,kBAAkB,EAAEK,KAAK,CAACL,kBAdrB;AAeLS,MAAAA,iBAfK;AAgBLe,MAAAA,oBAhBK;AAiBLK,MAAAA,cAjBK;AAkBLG,MAAAA,YAlBK;AAmBLI,MAAAA,aAnBK;AAoBLC,MAAAA,gBApBK;AAqBLH,MAAAA,mBArBK;AAsBLM,MAAAA,oBAtBK;AAuBLF,MAAAA,mBAvBK;AAwBLG,MAAAA,iBAxBK;AAyBLC,MAAAA,wBAzBK;AA0BLH,MAAAA;AA1BK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA8BGhD,KAAK,CAACuD,QA9BT,CADF;AAkCD,CAjID;;AAmIA,eAAexD,SAAf","sourcesContent":["import React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport TreeContext from \"./treeContext\";\nimport TreeReducer from \"./treeReducer\";\n\nimport {\n  GET_TREE,\n  SET_LOADING_TREE_REFRESH,\n  SET_LOADING_TREE_PKL,\n  PKL_TREE_LOADED,\n  SET_FANCYTREE,\n  SET_LOADING_FILTER,\n  CLEAN_TREE_DATA,\n  CLEAN_TREE_PKL_DATA,\n  SET_AUTOUPDATE_TREE_PKL,\n  UPDATE_SELECTION_TREE,\n  CLEAR_FILTER_TREE,\n  FILTER_TREEVIEW,\n  SET_LOADING_TREE,\n  SET_START_TREE_SELECTION,\n  SET_NOTIFICATION_TITLE_TREE,\n  SET_OFF_LOADING_TREE,\n  INCREASE_LOADING_TREE,\n} from \"../types\";\n\n// import { start, end } from \"../utils\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG } from \"../vars\";\n\nconst TreeState = (props) => {\n  const initialState = {\n    treedata: null,\n    loadingTree: false,\n    enabledTreeSearch: true,\n    loadingTreePkl: false,\n    loadingTreeRefresh: false,\n    loadingFilterTree: false,\n    fancyTree: null,\n    //canSelect: false,\n    elapsedLoadingTree: 1,\n    startAutoUpdateTreePkl: false,\n    pkltreechanges: null,\n    selectedTreeNode: null,\n    notificationTitleTree: null,\n  };\n\n  const [state, dispatch] = useReducer(TreeReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  const debug = DEBUG;\n\n  const getExperimentTree = async (expid) => {\n    setLoadingTree();\n    //start();\n    const res = await axios\n      .get(`${localserver}/tree/${expid}`)\n      .catch((error) => {\n        alert(error.message);\n        setOffLoadingTree();\n      });\n    if (res) {\n      debug && console.log(res.data);\n      dispatch({\n        type: GET_TREE,\n        payload: res.data,\n      });\n    }\n\n    //end();\n  };\n\n  // Get experiment pkl data for tree\n  const getExperimentTreePkl = async (expid, timeStamp) => {\n    //console.log(expid, timeStamp);\n    setLoadingTreePkl();\n    setLoadingTreeRefresh();\n    const res = await axios.get(\n      `${localserver}/pkltreeinfo/${expid}/${timeStamp}`\n    );\n    const retrievedPklTree = res.data;\n    debug && console.log(retrievedPklTree);\n    dispatch({\n      type: PKL_TREE_LOADED,\n      payload: retrievedPklTree,\n    });\n  };\n\n  const filterTreeView = (string) => {\n    setLoadingFilter();\n    dispatch({\n      type: FILTER_TREEVIEW,\n      payload: string,\n    });\n  };\n\n  const setFancyTree = (value) =>\n    dispatch({ type: SET_FANCYTREE, payload: value });\n\n  const updateSelectionTree = (currentSelected) => {\n    dispatch({ type: UPDATE_SELECTION_TREE, payload: currentSelected });\n  };\n\n  const cleanTreeData = () => dispatch({ type: CLEAN_TREE_DATA });\n  const cleanPklTreeData = () => dispatch({ type: CLEAN_TREE_PKL_DATA });\n  const clearFilterTreeView = () =>\n    dispatch({\n      type: CLEAR_FILTER_TREE,\n    });\n  const increaseElapsedLoadingTree = () => {\n    dispatch({ type: INCREASE_LOADING_TREE });\n  };\n\n  const setLoadingTree = () => dispatch({ type: SET_LOADING_TREE }); //here\n  const setOffLoadingTree = () => dispatch({ type: SET_OFF_LOADING_TREE });\n  const setLoadingFilter = () => dispatch({ type: SET_LOADING_FILTER });\n  const setLoadingTreeRefresh = () =>\n    dispatch({ type: SET_LOADING_TREE_REFRESH });\n  const setLoadingTreePkl = () => dispatch({ type: SET_LOADING_TREE_PKL });\n  const setAutoUpdateTreePkl = (value) =>\n    dispatch({ type: SET_AUTOUPDATE_TREE_PKL, payload: value });\n\n  const setStartSelection = () => dispatch({ type: SET_START_TREE_SELECTION });\n  const setNotificationTitleTree = (notification) =>\n    dispatch({ type: SET_NOTIFICATION_TITLE_TREE, payload: notification });\n\n  return (\n    <TreeContext.Provider\n      value={{\n        treedata: state.treedata,\n        loadingTree: state.loadingTree,\n        loadingTreePkl: state.loadingTreePkl,\n        loadingFilterTree: state.loadingFilterTree,\n        enabledTreeSearch: state.enabledTreeSearch,\n        returnFilter: state.returnFilter,\n        fancyTree: state.fancyTree,\n        notificationTitleTree: state.notificationTitleTree,\n        //canSelect: state.canSelect,\n        startAutoUpdateTreePkl: state.startAutoUpdateTreePkl,\n        pkltreechanges: state.pkltreechanges,\n        selectedTreeNode: state.selectedTreeNode,\n        expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n        elapsedLoadingTree: state.elapsedLoadingTree,\n        getExperimentTree,\n        getExperimentTreePkl,\n        filterTreeView,\n        setFancyTree,\n        cleanTreeData,\n        cleanPklTreeData,\n        updateSelectionTree,\n        setAutoUpdateTreePkl,\n        clearFilterTreeView,\n        setStartSelection,\n        setNotificationTitleTree,\n        increaseElapsedLoadingTree,\n      }}\n    >\n      {props.children}\n    </TreeContext.Provider>\n  );\n};\n\nexport default TreeState;\n"]},"metadata":{},"sourceType":"module"}