{"ast":null,"code":"import React,{useContext}from\"react\";import ExperimentContext from\"../context/experiment/experimentContext\";import GraphContext from\"../context/graph/graphContext\";import SelectionControl from\"./SelectionControl\";var GraphControl=function GraphControl(){var experimentContext=useContext(ExperimentContext);var graphContext=useContext(GraphContext);var experiment=experimentContext.experiment,experimentRunning=experimentContext.experimentRunning,loadingJobMonitor=experimentContext.loadingJobMonitor;var getExperimentGraph=graphContext.getExperimentGraph,data=graphContext.data,getExperimentPkl=graphContext.getExperimentPkl,setAutoUpdatePkl=graphContext.setAutoUpdatePkl,startAutoUpdatePkl=graphContext.startAutoUpdatePkl,enabledGraphSearch=graphContext.enabledGraphSearch,loadingPkl=graphContext.loadingPkl;var disableQuery=!enabledGraphSearch||loadingPkl;var onSubmitGraph=function onSubmitGraph(){var grouped=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"none\";var layout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"standard\";return function(e){e.preventDefault();getExperimentGraph(experiment.expid,grouped,layout);};};var onJobMonitor=function onJobMonitor(e){e.preventDefault();setAutoUpdatePkl(true);};var onNotJobMonitor=function onNotJobMonitor(e){e.preventDefault();setAutoUpdatePkl(false);};var onRequestUpdate=function onRequestUpdate(e){e.preventDefault();getExperimentPkl(experiment.expid,experiment.pkl_timestamp);};return/*#__PURE__*/React.createElement(\"div\",{className:\"card-header p-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},(loadingJobMonitor||loadingPkl)&&/*#__PURE__*/React.createElement(\"div\",null,\"Querying...\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-end\"},experiment&&data&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(SelectionControl,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitGraph(),className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Classic\",className:\"btn btn-info btn-block btn-sm\",disabled:disableQuery}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitGraph(\"none\",\"laplacian\"),className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Laplacian\",className:\"btn btn-info btn-block btn-sm\",disabled:disableQuery}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitGraph(\"date-member\"),className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Grouped by D-M\",className:\"btn btn-info btn-block btn-sm\",disabled:disableQuery}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitGraph(\"status\"),className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Grouped by Status\",className:\"btn btn-info btn-block btn-sm\",disabled:disableQuery}))),experiment&&data&&experimentRunning&&!startAutoUpdatePkl&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onRequestUpdate,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Refresh\",className:\"btn btn-success btn-block btn-sm\",disabled:disableQuery}))),experimentRunning&&data&&!startAutoUpdatePkl&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onJobMonitor,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Start Job Monitor\",className:\"btn btn-success btn-block btn-sm\",disabled:disableQuery}))),experimentRunning&&data&&startAutoUpdatePkl&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onNotJobMonitor,className:\"form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Stop Job Monitor\",className:\"btn btn-danger btn-block btn-sm\",disabled:disableQuery})))))));};export default GraphControl;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/experiment/GraphControl.js"],"names":["React","useContext","ExperimentContext","GraphContext","SelectionControl","GraphControl","experimentContext","graphContext","experiment","experimentRunning","loadingJobMonitor","getExperimentGraph","data","getExperimentPkl","setAutoUpdatePkl","startAutoUpdatePkl","enabledGraphSearch","loadingPkl","disableQuery","onSubmitGraph","grouped","layout","e","preventDefault","expid","onJobMonitor","onNotJobMonitor","onRequestUpdate","pkl_timestamp"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,iBAAP,KAA8B,yCAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,iBAAiB,CAAGL,UAAU,CAACC,iBAAD,CAApC,CACA,GAAMK,CAAAA,YAAY,CAAGN,UAAU,CAACE,YAAD,CAA/B,CAFyB,GAIvBK,CAAAA,UAJuB,CAOrBF,iBAPqB,CAIvBE,UAJuB,CAKvBC,iBALuB,CAOrBH,iBAPqB,CAKvBG,iBALuB,CAMvBC,iBANuB,CAOrBJ,iBAPqB,CAMvBI,iBANuB,IAUvBC,CAAAA,kBAVuB,CAiBrBJ,YAjBqB,CAUvBI,kBAVuB,CAWvBC,IAXuB,CAiBrBL,YAjBqB,CAWvBK,IAXuB,CAYvBC,gBAZuB,CAiBrBN,YAjBqB,CAYvBM,gBAZuB,CAavBC,gBAbuB,CAiBrBP,YAjBqB,CAavBO,gBAbuB,CAcvBC,kBAduB,CAiBrBR,YAjBqB,CAcvBQ,kBAduB,CAevBC,kBAfuB,CAiBrBT,YAjBqB,CAevBS,kBAfuB,CAgBvBC,UAhBuB,CAiBrBV,YAjBqB,CAgBvBU,UAhBuB,CAmBzB,GAAMC,CAAAA,YAAY,CAAG,CAACF,kBAAD,EAAuBC,UAA5C,CAEA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAACC,CAAAA,OAAD,2DAAW,MAAX,IAAmBC,CAAAA,MAAnB,2DAA4B,UAA5B,OAA2C,UAACC,CAAD,CAAO,CACtEA,CAAC,CAACC,cAAF,GACAZ,kBAAkB,CAACH,UAAU,CAACgB,KAAZ,CAAmBJ,OAAnB,CAA4BC,MAA5B,CAAlB,CACD,CAHqB,EAAtB,CAKA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACH,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACAT,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAHD,CAKA,GAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACJ,CAAD,CAAO,CAC7BA,CAAC,CAACC,cAAF,GACAT,gBAAgB,CAAC,KAAD,CAAhB,CACD,CAHD,CAKA,GAAMa,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACL,CAAD,CAAO,CAC7BA,CAAC,CAACC,cAAF,GACAV,gBAAgB,CAACL,UAAU,CAACgB,KAAZ,CAAmBhB,UAAU,CAACoB,aAA9B,CAAhB,CACD,CAHD,CAKA,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,UAAf,EACG,CAAClB,iBAAiB,EAAIO,UAAtB,gBAAqC,6CADxC,CADF,cAIE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,yBAAf,EACGT,UAAU,EAAII,IAAd,eACC,2BAAK,SAAS,CAAC,UAAf,eACE,oBAAC,gBAAD,MADF,CAFJ,cAOE,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEO,aAAa,EAA7B,CAAiC,SAAS,CAAC,MAA3C,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,SAFR,CAGE,SAAS,CAAC,+BAHZ,CAIE,QAAQ,CAAED,YAJZ,EADF,CADF,CAPF,cAiBE,2BAAK,SAAS,CAAC,UAAf,eACE,4BACE,QAAQ,CAAEC,aAAa,CAAC,MAAD,CAAS,WAAT,CADzB,CAEE,SAAS,CAAC,MAFZ,eAIE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,WAFR,CAGE,SAAS,CAAC,+BAHZ,CAIE,QAAQ,CAAED,YAJZ,EAJF,CADF,CAjBF,cA8BE,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEC,aAAa,CAAC,aAAD,CAA7B,CAA8C,SAAS,CAAC,MAAxD,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,gBAFR,CAGE,SAAS,CAAC,+BAHZ,CAIE,QAAQ,CAAED,YAJZ,EADF,CADF,CA9BF,cAwCE,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEC,aAAa,CAAC,QAAD,CAA7B,CAAyC,SAAS,CAAC,MAAnD,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,mBAFR,CAGE,SAAS,CAAC,+BAHZ,CAIE,QAAQ,CAAED,YAJZ,EADF,CADF,CAxCF,CAkDGV,UAAU,EAAII,IAAd,EAAsBH,iBAAtB,EAA2C,CAACM,kBAA5C,eACC,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEY,eAAhB,CAAiC,SAAS,CAAC,MAA3C,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,SAFR,CAGE,SAAS,CAAC,kCAHZ,CAIE,QAAQ,CAAET,YAJZ,EADF,CADF,CAnDJ,CA8DGT,iBAAiB,EAAIG,IAArB,EAA6B,CAACG,kBAA9B,eACC,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEU,YAAhB,CAA8B,SAAS,CAAC,MAAxC,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,mBAFR,CAGE,SAAS,CAAC,kCAHZ,CAIE,QAAQ,CAAEP,YAJZ,EADF,CADF,CA/DJ,CA0EGT,iBAAiB,EAAIG,IAArB,EAA6BG,kBAA7B,eACC,2BAAK,SAAS,CAAC,UAAf,eACE,4BAAM,QAAQ,CAAEW,eAAhB,CAAiC,SAAS,CAAC,MAA3C,eACE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,kBAFR,CAGE,SAAS,CAAC,iCAHZ,CAIE,QAAQ,CAAER,YAJZ,EADF,CADF,CA3EJ,CADF,CAJF,CADF,CADF,CAkGD,CA3ID,CA6IA,cAAeb,CAAAA,YAAf","sourcesContent":["import React, { useContext } from \"react\";\nimport ExperimentContext from \"../context/experiment/experimentContext\";\nimport GraphContext from \"../context/graph/graphContext\";\nimport SelectionControl from \"./SelectionControl\";\n\nconst GraphControl = () => {\n  const experimentContext = useContext(ExperimentContext);\n  const graphContext = useContext(GraphContext);\n  const {\n    experiment,\n    experimentRunning,\n    loadingJobMonitor,\n  } = experimentContext;\n\n  const {\n    getExperimentGraph,\n    data,\n    getExperimentPkl,\n    setAutoUpdatePkl,\n    startAutoUpdatePkl,\n    enabledGraphSearch,\n    loadingPkl,\n  } = graphContext;\n\n  const disableQuery = !enabledGraphSearch || loadingPkl;\n\n  const onSubmitGraph = (grouped = \"none\", layout = \"standard\") => (e) => {\n    e.preventDefault();\n    getExperimentGraph(experiment.expid, grouped, layout);\n  };\n\n  const onJobMonitor = (e) => {\n    e.preventDefault();\n    setAutoUpdatePkl(true);\n  };\n\n  const onNotJobMonitor = (e) => {\n    e.preventDefault();\n    setAutoUpdatePkl(false);\n  };\n\n  const onRequestUpdate = (e) => {\n    e.preventDefault();\n    getExperimentPkl(experiment.expid, experiment.pkl_timestamp);\n  };\n\n  return (\n    <div className='card-header p-1'>\n      <div className='row'>        \n        <div className='col-md-2'>\n          {(loadingJobMonitor || loadingPkl) && <div>Querying...</div>} \n        </div>\n        <div className='col-md-10'>\n          <div className='row justify-content-end'>\n            {experiment && data && (\n              <div className='col-md-2'>\n                <SelectionControl />\n              </div>\n            )}\n\n            <div className='col-md-2'>\n              <form onSubmit={onSubmitGraph()} className='form'>\n                <input\n                  type='submit'\n                  value='Classic'\n                  className='btn btn-info btn-block btn-sm'\n                  disabled={disableQuery}\n                />\n              </form>\n            </div>\n            <div className='col-md-1'>\n              <form\n                onSubmit={onSubmitGraph(\"none\", \"laplacian\")}\n                className='form'\n              >\n                <input\n                  type='submit'\n                  value='Laplacian'\n                  className='btn btn-info btn-block btn-sm'\n                  disabled={disableQuery}\n                />\n              </form>\n            </div>\n            <div className='col-md-2'>\n              <form onSubmit={onSubmitGraph(\"date-member\")} className='form'>\n                <input\n                  type='submit'\n                  value='Grouped by D-M'\n                  className='btn btn-info btn-block btn-sm'\n                  disabled={disableQuery}\n                />\n              </form>\n            </div>\n            <div className='col-md-2'>\n              <form onSubmit={onSubmitGraph(\"status\")} className='form'>\n                <input\n                  type='submit'\n                  value='Grouped by Status'\n                  className='btn btn-info btn-block btn-sm'\n                  disabled={disableQuery}\n                />\n              </form>\n            </div>\n            {experiment && data && experimentRunning && !startAutoUpdatePkl && (\n              <div className='col-md-1'>\n                <form onSubmit={onRequestUpdate} className='form'>\n                  <input\n                    type='submit'\n                    value='Refresh'\n                    className='btn btn-success btn-block btn-sm'\n                    disabled={disableQuery}\n                  />\n                </form>\n              </div>\n            )}\n            {experimentRunning && data && !startAutoUpdatePkl && (\n              <div className='col-md-2'>\n                <form onSubmit={onJobMonitor} className='form'>\n                  <input\n                    type='submit'\n                    value='Start Job Monitor'\n                    className='btn btn-success btn-block btn-sm'\n                    disabled={disableQuery}\n                  />\n                </form>\n              </div>\n            )}\n            {experimentRunning && data && startAutoUpdatePkl && (\n              <div className='col-md-2'>\n                <form onSubmit={onNotJobMonitor} className='form'>\n                  <input\n                    type='submit'\n                    value='Stop Job Monitor'\n                    className='btn btn-danger btn-block btn-sm'\n                    disabled={disableQuery}\n                  />\n                </form>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GraphControl;\n"]},"metadata":{},"sourceType":"module"}