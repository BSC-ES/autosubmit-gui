{"ast":null,"code":"/*!\n * jquery.fancytree.filter.js\n *\n * Remove or highlight tree nodes, based on a filter.\n * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)\n *\n * Copyright (c) 2008-2020, Martin Wendt (https://wwWendt.de)\n *\n * Released under the MIT license\n * https://github.com/mar10/fancytree/wiki/LicenseInfo\n *\n * @version 2.37.0\n * @date 2020-09-11T18:58:08Z\n */\n(function (factory) {\n  if (typeof define === \"function\" && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([\"jquery\", \"./jquery.fancytree\"], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    // Node/CommonJS\n    require(\"./jquery.fancytree\");\n\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    // Browser globals\n    factory(jQuery);\n  }\n})(function ($) {\n  \"use strict\";\n  /*******************************************************************************\n   * Private functions and variables\n   */\n\n  var KeyNoData = \"__not_found__\",\n      escapeHtml = $.ui.fancytree.escapeHtml;\n\n  function _escapeRegex(str) {\n    return (str + \"\").replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n  }\n\n  function extractHtmlText(s) {\n    if (s.indexOf(\">\") >= 0) {\n      return $(\"<div/>\").html(s).text();\n    }\n\n    return s;\n  }\n\n  $.ui.fancytree._FancytreeClass.prototype._applyFilterImpl = function (filter, branchMode, _opts) {\n    var match,\n        statusNode,\n        re,\n        reHighlight,\n        temp,\n        prevEnableUpdate,\n        count = 0,\n        treeOpts = this.options,\n        escapeTitles = treeOpts.escapeTitles,\n        prevAutoCollapse = treeOpts.autoCollapse,\n        opts = $.extend({}, treeOpts.filter, _opts),\n        hideMode = opts.mode === \"hide\",\n        leavesOnly = !!opts.leavesOnly && !branchMode; // Default to 'match title substring (not case sensitive)'\n\n    if (typeof filter === \"string\") {\n      if (filter === \"\") {\n        this.warn(\"Fancytree passing an empty string as a filter is handled as clearFilter().\");\n        this.clearFilter();\n        return;\n      }\n\n      if (opts.fuzzy) {\n        // See https://codereview.stackexchange.com/questions/23899/faster-javascript-fuzzy-string-matching-function/23905#23905\n        // and http://www.quora.com/How-is-the-fuzzy-search-algorithm-in-Sublime-Text-designed\n        // and http://www.dustindiaz.com/autocomplete-fuzzy-matching\n        match = filter.split(\"\").reduce(function (a, b) {\n          return a + \"[^\" + b + \"]*\" + b;\n        });\n      } else {\n        match = _escapeRegex(filter); // make sure a '.' is treated literally\n      }\n\n      re = new RegExp(\".*\" + match + \".*\", \"i\");\n      reHighlight = new RegExp(_escapeRegex(filter), \"gi\");\n\n      filter = function (node) {\n        if (!node.title) {\n          return false;\n        }\n\n        var text = escapeTitles ? node.title : extractHtmlText(node.title),\n            res = !!re.test(text);\n\n        if (res && opts.highlight) {\n          if (escapeTitles) {\n            // #740: we must not apply the marks to escaped entity names, e.g. `&quot;`\n            // Use some exotic characters to mark matches:\n            temp = text.replace(reHighlight, function (s) {\n              return \"\\uFFF7\" + s + \"\\uFFF8\";\n            }); // now we can escape the title...\n\n            node.titleWithHighlight = escapeHtml(temp) // ... and finally insert the desired `<mark>` tags\n            .replace(/\\uFFF7/g, \"<mark>\").replace(/\\uFFF8/g, \"</mark>\");\n          } else {\n            node.titleWithHighlight = text.replace(reHighlight, function (s) {\n              return \"<mark>\" + s + \"</mark>\";\n            });\n          } // node.debug(\"filter\", escapeTitles, text, node.titleWithHighlight);\n\n        }\n\n        return res;\n      };\n    }\n\n    this.enableFilter = true;\n    this.lastFilterArgs = arguments;\n    prevEnableUpdate = this.enableUpdate(false);\n    this.$div.addClass(\"fancytree-ext-filter\");\n\n    if (hideMode) {\n      this.$div.addClass(\"fancytree-ext-filter-hide\");\n    } else {\n      this.$div.addClass(\"fancytree-ext-filter-dimm\");\n    }\n\n    this.$div.toggleClass(\"fancytree-ext-filter-hide-expanders\", !!opts.hideExpanders); // Reset current filter\n\n    this.rootNode.subMatchCount = 0;\n    this.visit(function (node) {\n      delete node.match;\n      delete node.titleWithHighlight;\n      node.subMatchCount = 0;\n    });\n    statusNode = this.getRootNode()._findDirectChild(KeyNoData);\n\n    if (statusNode) {\n      statusNode.remove();\n    } // Adjust node.hide, .match, and .subMatchCount properties\n\n\n    treeOpts.autoCollapse = false; // #528\n\n    this.visit(function (node) {\n      if (leavesOnly && node.children != null) {\n        return;\n      }\n\n      var res = filter(node),\n          matchedByBranch = false;\n\n      if (res === \"skip\") {\n        node.visit(function (c) {\n          c.match = false;\n        }, true);\n        return \"skip\";\n      }\n\n      if (!res && (branchMode || res === \"branch\") && node.parent.match) {\n        res = true;\n        matchedByBranch = true;\n      }\n\n      if (res) {\n        count++;\n        node.match = true;\n        node.visitParents(function (p) {\n          if (p !== node) {\n            p.subMatchCount += 1;\n          } // Expand match (unless this is no real match, but only a node in a matched branch)\n\n\n          if (opts.autoExpand && !matchedByBranch && !p.expanded) {\n            p.setExpanded(true, {\n              noAnimation: true,\n              noEvents: true,\n              scrollIntoView: false\n            });\n            p._filterAutoExpanded = true;\n          }\n        }, true);\n      }\n    });\n    treeOpts.autoCollapse = prevAutoCollapse;\n\n    if (count === 0 && opts.nodata && hideMode) {\n      statusNode = opts.nodata;\n\n      if ($.isFunction(statusNode)) {\n        statusNode = statusNode();\n      }\n\n      if (statusNode === true) {\n        statusNode = {};\n      } else if (typeof statusNode === \"string\") {\n        statusNode = {\n          title: statusNode\n        };\n      }\n\n      statusNode = $.extend({\n        statusNodeType: \"nodata\",\n        key: KeyNoData,\n        title: this.options.strings.noData\n      }, statusNode);\n      this.getRootNode().addNode(statusNode).match = true;\n    } // Redraw whole tree\n\n\n    this._callHook(\"treeStructureChanged\", this, \"applyFilter\"); // this.render();\n\n\n    this.enableUpdate(prevEnableUpdate);\n    return count;\n  };\n  /**\n   * [ext-filter] Dimm or hide nodes.\n   *\n   * @param {function | string} filter\n   * @param {boolean} [opts={autoExpand: false, leavesOnly: false}]\n   * @returns {integer} count\n   * @alias Fancytree#filterNodes\n   * @requires jquery.fancytree.filter.js\n   */\n\n\n  $.ui.fancytree._FancytreeClass.prototype.filterNodes = function (filter, opts) {\n    if (typeof opts === \"boolean\") {\n      opts = {\n        leavesOnly: opts\n      };\n      this.warn(\"Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.\");\n    }\n\n    return this._applyFilterImpl(filter, false, opts);\n  };\n  /**\n   * [ext-filter] Dimm or hide whole branches.\n   *\n   * @param {function | string} filter\n   * @param {boolean} [opts={autoExpand: false}]\n   * @returns {integer} count\n   * @alias Fancytree#filterBranches\n   * @requires jquery.fancytree.filter.js\n   */\n\n\n  $.ui.fancytree._FancytreeClass.prototype.filterBranches = function (filter, opts) {\n    return this._applyFilterImpl(filter, true, opts);\n  };\n  /**\n   * [ext-filter] Reset the filter.\n   *\n   * @alias Fancytree#clearFilter\n   * @requires jquery.fancytree.filter.js\n   */\n\n\n  $.ui.fancytree._FancytreeClass.prototype.clearFilter = function () {\n    var $title,\n        statusNode = this.getRootNode()._findDirectChild(KeyNoData),\n        escapeTitles = this.options.escapeTitles,\n        enhanceTitle = this.options.enhanceTitle,\n        prevEnableUpdate = this.enableUpdate(false);\n\n    if (statusNode) {\n      statusNode.remove();\n    } // we also counted root node's subMatchCount\n\n\n    delete this.rootNode.match;\n    delete this.rootNode.subMatchCount;\n    this.visit(function (node) {\n      if (node.match && node.span) {\n        // #491, #601\n        $title = $(node.span).find(\">span.fancytree-title\");\n\n        if (escapeTitles) {\n          $title.text(node.title);\n        } else {\n          $title.html(node.title);\n        }\n\n        if (enhanceTitle) {\n          enhanceTitle({\n            type: \"enhanceTitle\"\n          }, {\n            node: node,\n            $title: $title\n          });\n        }\n      }\n\n      delete node.match;\n      delete node.subMatchCount;\n      delete node.titleWithHighlight;\n\n      if (node.$subMatchBadge) {\n        node.$subMatchBadge.remove();\n        delete node.$subMatchBadge;\n      }\n\n      if (node._filterAutoExpanded && node.expanded) {\n        node.setExpanded(false, {\n          noAnimation: true,\n          noEvents: true,\n          scrollIntoView: false\n        });\n      }\n\n      delete node._filterAutoExpanded;\n    });\n    this.enableFilter = false;\n    this.lastFilterArgs = null;\n    this.$div.removeClass(\"fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide\");\n\n    this._callHook(\"treeStructureChanged\", this, \"clearFilter\"); // this.render();\n\n\n    this.enableUpdate(prevEnableUpdate);\n  };\n  /**\n   * [ext-filter] Return true if a filter is currently applied.\n   *\n   * @returns {Boolean}\n   * @alias Fancytree#isFilterActive\n   * @requires jquery.fancytree.filter.js\n   * @since 2.13\n   */\n\n\n  $.ui.fancytree._FancytreeClass.prototype.isFilterActive = function () {\n    return !!this.enableFilter;\n  };\n  /**\n   * [ext-filter] Return true if this node is matched by current filter (or no filter is active).\n   *\n   * @returns {Boolean}\n   * @alias FancytreeNode#isMatched\n   * @requires jquery.fancytree.filter.js\n   * @since 2.13\n   */\n\n\n  $.ui.fancytree._FancytreeNodeClass.prototype.isMatched = function () {\n    return !(this.tree.enableFilter && !this.match);\n  };\n  /*******************************************************************************\n   * Extension code\n   */\n\n\n  $.ui.fancytree.registerExtension({\n    name: \"filter\",\n    version: \"2.37.0\",\n    // Default options for this extension.\n    options: {\n      autoApply: true,\n      // Re-apply last filter if lazy data is loaded\n      autoExpand: false,\n      // Expand all branches that contain matches while filtered\n      counter: true,\n      // Show a badge with number of matching child nodes near parent icons\n      fuzzy: false,\n      // Match single characters in order, e.g. 'fb' will match 'FooBar'\n      hideExpandedCounter: true,\n      // Hide counter badge if parent is expanded\n      hideExpanders: false,\n      // Hide expanders if all child nodes are hidden by filter\n      highlight: true,\n      // Highlight matches by wrapping inside <mark> tags\n      leavesOnly: false,\n      // Match end nodes only\n      nodata: true,\n      // Display a 'no data' status node if result is empty\n      mode: \"dimm\" // Grayout unmatched nodes (pass \"hide\" to remove unmatched node instead)\n\n    },\n    nodeLoadChildren: function (ctx, source) {\n      var tree = ctx.tree;\n      return this._superApply(arguments).done(function () {\n        if (tree.enableFilter && tree.lastFilterArgs && ctx.options.filter.autoApply) {\n          tree._applyFilterImpl.apply(tree, tree.lastFilterArgs);\n        }\n      });\n    },\n    nodeSetExpanded: function (ctx, flag, callOpts) {\n      var node = ctx.node;\n      delete node._filterAutoExpanded; // Make sure counter badge is displayed again, when node is beeing collapsed\n\n      if (!flag && ctx.options.filter.hideExpandedCounter && node.$subMatchBadge) {\n        node.$subMatchBadge.show();\n      }\n\n      return this._superApply(arguments);\n    },\n    nodeRenderStatus: function (ctx) {\n      // Set classes for current status\n      var res,\n          node = ctx.node,\n          tree = ctx.tree,\n          opts = ctx.options.filter,\n          $title = $(node.span).find(\"span.fancytree-title\"),\n          $span = $(node[tree.statusClassPropName]),\n          enhanceTitle = ctx.options.enhanceTitle,\n          escapeTitles = ctx.options.escapeTitles;\n      res = this._super(ctx); // nothing to do, if node was not yet rendered\n\n      if (!$span.length || !tree.enableFilter) {\n        return res;\n      }\n\n      $span.toggleClass(\"fancytree-match\", !!node.match).toggleClass(\"fancytree-submatch\", !!node.subMatchCount).toggleClass(\"fancytree-hide\", !(node.match || node.subMatchCount)); // Add/update counter badge\n\n      if (opts.counter && node.subMatchCount && (!node.isExpanded() || !opts.hideExpandedCounter)) {\n        if (!node.$subMatchBadge) {\n          node.$subMatchBadge = $(\"<span class='fancytree-childcounter'/>\");\n          $(\"span.fancytree-icon, span.fancytree-custom-icon\", node.span).append(node.$subMatchBadge);\n        }\n\n        node.$subMatchBadge.show().text(node.subMatchCount);\n      } else if (node.$subMatchBadge) {\n        node.$subMatchBadge.hide();\n      } // node.debug(\"nodeRenderStatus\", node.titleWithHighlight, node.title)\n      // #601: also check for $title.length, because we don't need to render\n      // if node.span is null (i.e. not rendered)\n\n\n      if (node.span && (!node.isEditing || !node.isEditing.call(node))) {\n        if (node.titleWithHighlight) {\n          $title.html(node.titleWithHighlight);\n        } else if (escapeTitles) {\n          $title.text(node.title);\n        } else {\n          $title.html(node.title);\n        }\n\n        if (enhanceTitle) {\n          enhanceTitle({\n            type: \"enhanceTitle\"\n          }, {\n            node: node,\n            $title: $title\n          });\n        }\n      }\n\n      return res;\n    }\n  }); // Value returned by `require('jquery.fancytree..')`\n\n  return $.ui.fancytree;\n}); // End of closure","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/jquery.fancytree/dist/modules/jquery.fancytree.filter.js"],"names":["factory","define","amd","module","exports","require","jQuery","$","KeyNoData","escapeHtml","ui","fancytree","_escapeRegex","str","replace","extractHtmlText","s","indexOf","html","text","_FancytreeClass","prototype","_applyFilterImpl","filter","branchMode","_opts","match","statusNode","re","reHighlight","temp","prevEnableUpdate","count","treeOpts","options","escapeTitles","prevAutoCollapse","autoCollapse","opts","extend","hideMode","mode","leavesOnly","warn","clearFilter","fuzzy","split","reduce","a","b","RegExp","node","title","res","test","highlight","titleWithHighlight","enableFilter","lastFilterArgs","arguments","enableUpdate","$div","addClass","toggleClass","hideExpanders","rootNode","subMatchCount","visit","getRootNode","_findDirectChild","remove","children","matchedByBranch","c","parent","visitParents","p","autoExpand","expanded","setExpanded","noAnimation","noEvents","scrollIntoView","_filterAutoExpanded","nodata","isFunction","statusNodeType","key","strings","noData","addNode","_callHook","filterNodes","filterBranches","$title","enhanceTitle","span","find","type","$subMatchBadge","removeClass","isFilterActive","_FancytreeNodeClass","isMatched","tree","registerExtension","name","version","autoApply","counter","hideExpandedCounter","nodeLoadChildren","ctx","source","_superApply","done","apply","nodeSetExpanded","flag","callOpts","show","nodeRenderStatus","$span","statusClassPropName","_super","length","isExpanded","append","hide","isEditing","call"],"mappings":"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","sourcesContent":["/*!\n * jquery.fancytree.filter.js\n *\n * Remove or highlight tree nodes, based on a filter.\n * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)\n *\n * Copyright (c) 2008-2020, Martin Wendt (https://wwWendt.de)\n *\n * Released under the MIT license\n * https://github.com/mar10/fancytree/wiki/LicenseInfo\n *\n * @version 2.37.0\n * @date 2020-09-11T18:58:08Z\n */\n\n(function(factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([\"jquery\", \"./jquery.fancytree\"], factory);\n\t} else if (typeof module === \"object\" && module.exports) {\n\t\t// Node/CommonJS\n\t\trequire(\"./jquery.fancytree\");\n\t\tmodule.exports = factory(require(\"jquery\"));\n\t} else {\n\t\t// Browser globals\n\t\tfactory(jQuery);\n\t}\n})(function($) {\n\t\"use strict\";\n\n\t/*******************************************************************************\n\t * Private functions and variables\n\t */\n\n\tvar KeyNoData = \"__not_found__\",\n\t\tescapeHtml = $.ui.fancytree.escapeHtml;\n\n\tfunction _escapeRegex(str) {\n\t\treturn (str + \"\").replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n\t}\n\n\tfunction extractHtmlText(s) {\n\t\tif (s.indexOf(\">\") >= 0) {\n\t\t\treturn $(\"<div/>\")\n\t\t\t\t.html(s)\n\t\t\t\t.text();\n\t\t}\n\t\treturn s;\n\t}\n\n\t$.ui.fancytree._FancytreeClass.prototype._applyFilterImpl = function(\n\t\tfilter,\n\t\tbranchMode,\n\t\t_opts\n\t) {\n\t\tvar match,\n\t\t\tstatusNode,\n\t\t\tre,\n\t\t\treHighlight,\n\t\t\ttemp,\n\t\t\tprevEnableUpdate,\n\t\t\tcount = 0,\n\t\t\ttreeOpts = this.options,\n\t\t\tescapeTitles = treeOpts.escapeTitles,\n\t\t\tprevAutoCollapse = treeOpts.autoCollapse,\n\t\t\topts = $.extend({}, treeOpts.filter, _opts),\n\t\t\thideMode = opts.mode === \"hide\",\n\t\t\tleavesOnly = !!opts.leavesOnly && !branchMode;\n\n\t\t// Default to 'match title substring (not case sensitive)'\n\t\tif (typeof filter === \"string\") {\n\t\t\tif (filter === \"\") {\n\t\t\t\tthis.warn(\n\t\t\t\t\t\"Fancytree passing an empty string as a filter is handled as clearFilter().\"\n\t\t\t\t);\n\t\t\t\tthis.clearFilter();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (opts.fuzzy) {\n\t\t\t\t// See https://codereview.stackexchange.com/questions/23899/faster-javascript-fuzzy-string-matching-function/23905#23905\n\t\t\t\t// and http://www.quora.com/How-is-the-fuzzy-search-algorithm-in-Sublime-Text-designed\n\t\t\t\t// and http://www.dustindiaz.com/autocomplete-fuzzy-matching\n\t\t\t\tmatch = filter.split(\"\").reduce(function(a, b) {\n\t\t\t\t\treturn a + \"[^\" + b + \"]*\" + b;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmatch = _escapeRegex(filter); // make sure a '.' is treated literally\n\t\t\t}\n\t\t\tre = new RegExp(\".*\" + match + \".*\", \"i\");\n\t\t\treHighlight = new RegExp(_escapeRegex(filter), \"gi\");\n\t\t\tfilter = function(node) {\n\t\t\t\tif (!node.title) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar text = escapeTitles\n\t\t\t\t\t\t? node.title\n\t\t\t\t\t\t: extractHtmlText(node.title),\n\t\t\t\t\tres = !!re.test(text);\n\n\t\t\t\tif (res && opts.highlight) {\n\t\t\t\t\tif (escapeTitles) {\n\t\t\t\t\t\t// #740: we must not apply the marks to escaped entity names, e.g. `&quot;`\n\t\t\t\t\t\t// Use some exotic characters to mark matches:\n\t\t\t\t\t\ttemp = text.replace(reHighlight, function(s) {\n\t\t\t\t\t\t\treturn \"\\uFFF7\" + s + \"\\uFFF8\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// now we can escape the title...\n\t\t\t\t\t\tnode.titleWithHighlight = escapeHtml(temp)\n\t\t\t\t\t\t\t// ... and finally insert the desired `<mark>` tags\n\t\t\t\t\t\t\t.replace(/\\uFFF7/g, \"<mark>\")\n\t\t\t\t\t\t\t.replace(/\\uFFF8/g, \"</mark>\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.titleWithHighlight = text.replace(\n\t\t\t\t\t\t\treHighlight,\n\t\t\t\t\t\t\tfunction(s) {\n\t\t\t\t\t\t\t\treturn \"<mark>\" + s + \"</mark>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t// node.debug(\"filter\", escapeTitles, text, node.titleWithHighlight);\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t};\n\t\t}\n\n\t\tthis.enableFilter = true;\n\t\tthis.lastFilterArgs = arguments;\n\n\t\tprevEnableUpdate = this.enableUpdate(false);\n\n\t\tthis.$div.addClass(\"fancytree-ext-filter\");\n\t\tif (hideMode) {\n\t\t\tthis.$div.addClass(\"fancytree-ext-filter-hide\");\n\t\t} else {\n\t\t\tthis.$div.addClass(\"fancytree-ext-filter-dimm\");\n\t\t}\n\t\tthis.$div.toggleClass(\n\t\t\t\"fancytree-ext-filter-hide-expanders\",\n\t\t\t!!opts.hideExpanders\n\t\t);\n\t\t// Reset current filter\n\t\tthis.rootNode.subMatchCount = 0;\n\t\tthis.visit(function(node) {\n\t\t\tdelete node.match;\n\t\t\tdelete node.titleWithHighlight;\n\t\t\tnode.subMatchCount = 0;\n\t\t});\n\t\tstatusNode = this.getRootNode()._findDirectChild(KeyNoData);\n\t\tif (statusNode) {\n\t\t\tstatusNode.remove();\n\t\t}\n\n\t\t// Adjust node.hide, .match, and .subMatchCount properties\n\t\ttreeOpts.autoCollapse = false; // #528\n\n\t\tthis.visit(function(node) {\n\t\t\tif (leavesOnly && node.children != null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar res = filter(node),\n\t\t\t\tmatchedByBranch = false;\n\n\t\t\tif (res === \"skip\") {\n\t\t\t\tnode.visit(function(c) {\n\t\t\t\t\tc.match = false;\n\t\t\t\t}, true);\n\t\t\t\treturn \"skip\";\n\t\t\t}\n\t\t\tif (!res && (branchMode || res === \"branch\") && node.parent.match) {\n\t\t\t\tres = true;\n\t\t\t\tmatchedByBranch = true;\n\t\t\t}\n\t\t\tif (res) {\n\t\t\t\tcount++;\n\t\t\t\tnode.match = true;\n\t\t\t\tnode.visitParents(function(p) {\n\t\t\t\t\tif (p !== node) {\n\t\t\t\t\t\tp.subMatchCount += 1;\n\t\t\t\t\t}\n\t\t\t\t\t// Expand match (unless this is no real match, but only a node in a matched branch)\n\t\t\t\t\tif (opts.autoExpand && !matchedByBranch && !p.expanded) {\n\t\t\t\t\t\tp.setExpanded(true, {\n\t\t\t\t\t\t\tnoAnimation: true,\n\t\t\t\t\t\t\tnoEvents: true,\n\t\t\t\t\t\t\tscrollIntoView: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tp._filterAutoExpanded = true;\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t});\n\t\ttreeOpts.autoCollapse = prevAutoCollapse;\n\n\t\tif (count === 0 && opts.nodata && hideMode) {\n\t\t\tstatusNode = opts.nodata;\n\t\t\tif ($.isFunction(statusNode)) {\n\t\t\t\tstatusNode = statusNode();\n\t\t\t}\n\t\t\tif (statusNode === true) {\n\t\t\t\tstatusNode = {};\n\t\t\t} else if (typeof statusNode === \"string\") {\n\t\t\t\tstatusNode = { title: statusNode };\n\t\t\t}\n\t\t\tstatusNode = $.extend(\n\t\t\t\t{\n\t\t\t\t\tstatusNodeType: \"nodata\",\n\t\t\t\t\tkey: KeyNoData,\n\t\t\t\t\ttitle: this.options.strings.noData,\n\t\t\t\t},\n\t\t\t\tstatusNode\n\t\t\t);\n\n\t\t\tthis.getRootNode().addNode(statusNode).match = true;\n\t\t}\n\t\t// Redraw whole tree\n\t\tthis._callHook(\"treeStructureChanged\", this, \"applyFilter\");\n\t\t// this.render();\n\t\tthis.enableUpdate(prevEnableUpdate);\n\t\treturn count;\n\t};\n\n\t/**\n\t * [ext-filter] Dimm or hide nodes.\n\t *\n\t * @param {function | string} filter\n\t * @param {boolean} [opts={autoExpand: false, leavesOnly: false}]\n\t * @returns {integer} count\n\t * @alias Fancytree#filterNodes\n\t * @requires jquery.fancytree.filter.js\n\t */\n\t$.ui.fancytree._FancytreeClass.prototype.filterNodes = function(\n\t\tfilter,\n\t\topts\n\t) {\n\t\tif (typeof opts === \"boolean\") {\n\t\t\topts = { leavesOnly: opts };\n\t\t\tthis.warn(\n\t\t\t\t\"Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.\"\n\t\t\t);\n\t\t}\n\t\treturn this._applyFilterImpl(filter, false, opts);\n\t};\n\n\t/**\n\t * [ext-filter] Dimm or hide whole branches.\n\t *\n\t * @param {function | string} filter\n\t * @param {boolean} [opts={autoExpand: false}]\n\t * @returns {integer} count\n\t * @alias Fancytree#filterBranches\n\t * @requires jquery.fancytree.filter.js\n\t */\n\t$.ui.fancytree._FancytreeClass.prototype.filterBranches = function(\n\t\tfilter,\n\t\topts\n\t) {\n\t\treturn this._applyFilterImpl(filter, true, opts);\n\t};\n\n\t/**\n\t * [ext-filter] Reset the filter.\n\t *\n\t * @alias Fancytree#clearFilter\n\t * @requires jquery.fancytree.filter.js\n\t */\n\t$.ui.fancytree._FancytreeClass.prototype.clearFilter = function() {\n\t\tvar $title,\n\t\t\tstatusNode = this.getRootNode()._findDirectChild(KeyNoData),\n\t\t\tescapeTitles = this.options.escapeTitles,\n\t\t\tenhanceTitle = this.options.enhanceTitle,\n\t\t\tprevEnableUpdate = this.enableUpdate(false);\n\n\t\tif (statusNode) {\n\t\t\tstatusNode.remove();\n\t\t}\n\t\t// we also counted root node's subMatchCount\n\t\tdelete this.rootNode.match;\n\t\tdelete this.rootNode.subMatchCount;\n\n\t\tthis.visit(function(node) {\n\t\t\tif (node.match && node.span) {\n\t\t\t\t// #491, #601\n\t\t\t\t$title = $(node.span).find(\">span.fancytree-title\");\n\t\t\t\tif (escapeTitles) {\n\t\t\t\t\t$title.text(node.title);\n\t\t\t\t} else {\n\t\t\t\t\t$title.html(node.title);\n\t\t\t\t}\n\t\t\t\tif (enhanceTitle) {\n\t\t\t\t\tenhanceTitle(\n\t\t\t\t\t\t{ type: \"enhanceTitle\" },\n\t\t\t\t\t\t{ node: node, $title: $title }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete node.match;\n\t\t\tdelete node.subMatchCount;\n\t\t\tdelete node.titleWithHighlight;\n\t\t\tif (node.$subMatchBadge) {\n\t\t\t\tnode.$subMatchBadge.remove();\n\t\t\t\tdelete node.$subMatchBadge;\n\t\t\t}\n\t\t\tif (node._filterAutoExpanded && node.expanded) {\n\t\t\t\tnode.setExpanded(false, {\n\t\t\t\t\tnoAnimation: true,\n\t\t\t\t\tnoEvents: true,\n\t\t\t\t\tscrollIntoView: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete node._filterAutoExpanded;\n\t\t});\n\t\tthis.enableFilter = false;\n\t\tthis.lastFilterArgs = null;\n\t\tthis.$div.removeClass(\n\t\t\t\"fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide\"\n\t\t);\n\t\tthis._callHook(\"treeStructureChanged\", this, \"clearFilter\");\n\t\t// this.render();\n\t\tthis.enableUpdate(prevEnableUpdate);\n\t};\n\n\t/**\n\t * [ext-filter] Return true if a filter is currently applied.\n\t *\n\t * @returns {Boolean}\n\t * @alias Fancytree#isFilterActive\n\t * @requires jquery.fancytree.filter.js\n\t * @since 2.13\n\t */\n\t$.ui.fancytree._FancytreeClass.prototype.isFilterActive = function() {\n\t\treturn !!this.enableFilter;\n\t};\n\n\t/**\n\t * [ext-filter] Return true if this node is matched by current filter (or no filter is active).\n\t *\n\t * @returns {Boolean}\n\t * @alias FancytreeNode#isMatched\n\t * @requires jquery.fancytree.filter.js\n\t * @since 2.13\n\t */\n\t$.ui.fancytree._FancytreeNodeClass.prototype.isMatched = function() {\n\t\treturn !(this.tree.enableFilter && !this.match);\n\t};\n\n\t/*******************************************************************************\n\t * Extension code\n\t */\n\t$.ui.fancytree.registerExtension({\n\t\tname: \"filter\",\n\t\tversion: \"2.37.0\",\n\t\t// Default options for this extension.\n\t\toptions: {\n\t\t\tautoApply: true, // Re-apply last filter if lazy data is loaded\n\t\t\tautoExpand: false, // Expand all branches that contain matches while filtered\n\t\t\tcounter: true, // Show a badge with number of matching child nodes near parent icons\n\t\t\tfuzzy: false, // Match single characters in order, e.g. 'fb' will match 'FooBar'\n\t\t\thideExpandedCounter: true, // Hide counter badge if parent is expanded\n\t\t\thideExpanders: false, // Hide expanders if all child nodes are hidden by filter\n\t\t\thighlight: true, // Highlight matches by wrapping inside <mark> tags\n\t\t\tleavesOnly: false, // Match end nodes only\n\t\t\tnodata: true, // Display a 'no data' status node if result is empty\n\t\t\tmode: \"dimm\", // Grayout unmatched nodes (pass \"hide\" to remove unmatched node instead)\n\t\t},\n\t\tnodeLoadChildren: function(ctx, source) {\n\t\t\tvar tree = ctx.tree;\n\n\t\t\treturn this._superApply(arguments).done(function() {\n\t\t\t\tif (\n\t\t\t\t\ttree.enableFilter &&\n\t\t\t\t\ttree.lastFilterArgs &&\n\t\t\t\t\tctx.options.filter.autoApply\n\t\t\t\t) {\n\t\t\t\t\ttree._applyFilterImpl.apply(tree, tree.lastFilterArgs);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tnodeSetExpanded: function(ctx, flag, callOpts) {\n\t\t\tvar node = ctx.node;\n\n\t\t\tdelete node._filterAutoExpanded;\n\t\t\t// Make sure counter badge is displayed again, when node is beeing collapsed\n\t\t\tif (\n\t\t\t\t!flag &&\n\t\t\t\tctx.options.filter.hideExpandedCounter &&\n\t\t\t\tnode.$subMatchBadge\n\t\t\t) {\n\t\t\t\tnode.$subMatchBadge.show();\n\t\t\t}\n\t\t\treturn this._superApply(arguments);\n\t\t},\n\t\tnodeRenderStatus: function(ctx) {\n\t\t\t// Set classes for current status\n\t\t\tvar res,\n\t\t\t\tnode = ctx.node,\n\t\t\t\ttree = ctx.tree,\n\t\t\t\topts = ctx.options.filter,\n\t\t\t\t$title = $(node.span).find(\"span.fancytree-title\"),\n\t\t\t\t$span = $(node[tree.statusClassPropName]),\n\t\t\t\tenhanceTitle = ctx.options.enhanceTitle,\n\t\t\t\tescapeTitles = ctx.options.escapeTitles;\n\n\t\t\tres = this._super(ctx);\n\t\t\t// nothing to do, if node was not yet rendered\n\t\t\tif (!$span.length || !tree.enableFilter) {\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\t$span\n\t\t\t\t.toggleClass(\"fancytree-match\", !!node.match)\n\t\t\t\t.toggleClass(\"fancytree-submatch\", !!node.subMatchCount)\n\t\t\t\t.toggleClass(\n\t\t\t\t\t\"fancytree-hide\",\n\t\t\t\t\t!(node.match || node.subMatchCount)\n\t\t\t\t);\n\t\t\t// Add/update counter badge\n\t\t\tif (\n\t\t\t\topts.counter &&\n\t\t\t\tnode.subMatchCount &&\n\t\t\t\t(!node.isExpanded() || !opts.hideExpandedCounter)\n\t\t\t) {\n\t\t\t\tif (!node.$subMatchBadge) {\n\t\t\t\t\tnode.$subMatchBadge = $(\n\t\t\t\t\t\t\"<span class='fancytree-childcounter'/>\"\n\t\t\t\t\t);\n\t\t\t\t\t$(\n\t\t\t\t\t\t\"span.fancytree-icon, span.fancytree-custom-icon\",\n\t\t\t\t\t\tnode.span\n\t\t\t\t\t).append(node.$subMatchBadge);\n\t\t\t\t}\n\t\t\t\tnode.$subMatchBadge.show().text(node.subMatchCount);\n\t\t\t} else if (node.$subMatchBadge) {\n\t\t\t\tnode.$subMatchBadge.hide();\n\t\t\t}\n\t\t\t// node.debug(\"nodeRenderStatus\", node.titleWithHighlight, node.title)\n\t\t\t// #601: also check for $title.length, because we don't need to render\n\t\t\t// if node.span is null (i.e. not rendered)\n\t\t\tif (node.span && (!node.isEditing || !node.isEditing.call(node))) {\n\t\t\t\tif (node.titleWithHighlight) {\n\t\t\t\t\t$title.html(node.titleWithHighlight);\n\t\t\t\t} else if (escapeTitles) {\n\t\t\t\t\t$title.text(node.title);\n\t\t\t\t} else {\n\t\t\t\t\t$title.html(node.title);\n\t\t\t\t}\n\t\t\t\tif (enhanceTitle) {\n\t\t\t\t\tenhanceTitle(\n\t\t\t\t\t\t{ type: \"enhanceTitle\" },\n\t\t\t\t\t\t{ node: node, $title: $title }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t});\n\t// Value returned by `require('jquery.fancytree..')`\n\treturn $.ui.fancytree;\n}); // End of closure\n"]},"metadata":{},"sourceType":"script"}