{"ast":null,"code":"import _regeneratorRuntime from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer,useContext}from\"react\";import axios from\"axios\";import GraphContext from\"./graphContext\";import GraphReducer from\"./graphReducer\";import ExperimentContext from\"../experiment/experimentContext\";import{GET_GRAPH,GET_PKL_DATA,CLEAN_GRAPH_DATA,CLEAN_ONLY_GRAH_DATA,SET_LOADING_GRAPH,SET_AUTOUPDATE_PKL,SET_VIS_DATA,SET_VIS_NETWORK,UPDATE_SELECTION,SET_FOUND_NODES,SET_LOADING_SEARCH_JOB,SET_LOADING_PKL,SHOULD_UPDATE_GRAPH,SET_LOADING_JOB_MONITOR,SET_CURRENT_COMMAND,NAVIGATE_GRAPH_TO,CLEAN_PKL_DATA,CLEAN_NAV_DATA,NAVIGATE_AFTER_LOADING_GRAPH,NAVIGATE_TO_GROUP_GRAPH,NAVIGATE_TO_LATEST,UPDATE_GRAPH_SELECTED_NODES,SET_NOTIFICATION_TITLE_GRAPH,SET_OFF_LOADING_GRAPH//DEACTIVATE_COPY_TO,\n}from\"../types\";import{AUTOSUBMIT_API_SOURCE,DEBUG}from\"../vars\";//import { timeStampToDate } from \"../utils\";\nvar GraphState=function GraphState(props){var initialState={data:null,visNodes:null,visNetwork:null,loadingGraph:false,loadingPkl:false,loadingJobMonitor:false,enabledGraphSearch:true,loadingSearchJob:false,startAutoUpdatePkl:false,shouldUpdateGraph:false,pklchanges:null,notificationTitleGraph:null,//currentSelected: [],\ncurrentCommandGraph:null,current_grouped:\"none\",current_layout:\"standard\",selection:null,foundNodes:null,graphSelectedNodes:null,pkldata:null};var _useReducer=useReducer(GraphReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var localserver=AUTOSUBMIT_API_SOURCE;//const localserver = \"http://84.88.185.94:8081\";\nvar debug=DEBUG;var experimentContext=useContext(ExperimentContext);var updateExperimentTimeStamp=experimentContext.updateExperimentTimeStamp,experimentRunning=experimentContext.experimentRunning;// Get Experiment Graph\nvar getExperimentGraph=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(expid){var grouped,layout,res,resdata,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:grouped=_args.length>1&&_args[1]!==undefined?_args[1]:\"none\";layout=_args.length>2&&_args[2]!==undefined?_args[2]:\"standard\";cleanOnlyGraphData();setLoadingGraph();_context.next=6;return axios.get(\"\".concat(localserver,\"/graph/\").concat(expid,\"/\").concat(layout,\"/\").concat(grouped)).catch(function(error){alert(error.message);setOffLoadingGraph();});case 6:res=_context.sent;if(res){debug&&console.log(res.data);resdata=res.data;dispatch({type:GET_GRAPH,payload:{resdata:resdata,grouped:grouped,layout:layout}});}case 8:case\"end\":return _context.stop();}}},_callee);}));return function getExperimentGraph(_x){return _ref.apply(this,arguments);};}();// Get Experiment Pkl Data for Graph changes update\nvar getExperimentPkl=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(expid,timeStamp){var res,retrievedPkl;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(experimentRunning===false)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadingPkl();setLoadingJobMonitor();//timeStamp = 1000;\ndebug&&console.log(\"Exp: \"+expid+\"\\t\"+timeStamp+\"\\t\"+experimentRunning);_context2.next=7;return axios.get(\"\".concat(localserver,\"/pklinfo/\").concat(expid,\"/\").concat(timeStamp));case 7:res=_context2.sent;debug&&console.log(res.data);retrievedPkl=res.data;dispatch({type:GET_PKL_DATA,payload:retrievedPkl});updateExperimentTimeStamp(retrievedPkl.pkl_timestamp);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function getExperimentPkl(_x2,_x3){return _ref2.apply(this,arguments);};}();var navigateAfterLoadGraph=function navigateAfterLoadGraph(){var running=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;debug&&console.log(\"Nav. After Loading\");dispatch({type:NAVIGATE_AFTER_LOADING_GRAPH,payload:running});};var navigateTo=function navigateTo(Id){debug&&console.log(\"Nav. To\");dispatch({type:NAVIGATE_GRAPH_TO,payload:Id});};var navToLatest=function navToLatest(statusCode,latest){debug&&console.log(\"Nav. To Latest\");dispatch({type:NAVIGATE_TO_LATEST,payload:{status:statusCode,latest:latest}});};var navigateToGroup=function navigateToGroup(IdList){debug&&console.log(\"Nav. To Group.\");dispatch({type:NAVIGATE_TO_GROUP_GRAPH,payload:IdList});};var searchJobInGraph=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(string){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoadingSearchJob();dispatch({type:SET_FOUND_NODES,payload:string.toUpperCase()});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function searchJobInGraph(_x4){return _ref3.apply(this,arguments);};}();var setCurrentCommandGraph=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(command){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// for change status\n//let arrayNames = [];\n//console.log(command);\ndispatch({type:SET_CURRENT_COMMAND,payload:command});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function setCurrentCommandGraph(_x5){return _ref4.apply(this,arguments);};}();// Clean state data\nvar cleanOnlyGraphData=function cleanOnlyGraphData(){return dispatch({type:CLEAN_ONLY_GRAH_DATA});};var cleanGraphData=function cleanGraphData(){return dispatch({type:CLEAN_GRAPH_DATA});};var cleanPklData=function cleanPklData(){return dispatch({type:CLEAN_PKL_DATA});};var cleanNavData=function cleanNavData(){return dispatch({type:CLEAN_NAV_DATA});};// Loading\nvar setLoadingGraph=function setLoadingGraph(){return dispatch({type:SET_LOADING_GRAPH});};var setOffLoadingGraph=function setOffLoadingGraph(){return dispatch({type:SET_OFF_LOADING_GRAPH});};var setLoadingSearchJob=function setLoadingSearchJob(){return dispatch({type:SET_LOADING_SEARCH_JOB});};var setLoadingPkl=function setLoadingPkl(){return dispatch({type:SET_LOADING_PKL});};var setLoadingJobMonitor=function setLoadingJobMonitor(){return dispatch({type:SET_LOADING_JOB_MONITOR});};// Set Data\nvar setAutoUpdatePkl=function setAutoUpdatePkl(value){return dispatch({type:SET_AUTOUPDATE_PKL,payload:value});};var setVisData=function setVisData(value){return dispatch({type:SET_VIS_DATA,payload:value});};var setVisNetwork=function setVisNetwork(value){return dispatch({type:SET_VIS_NETWORK,payload:value});};var setUpdateGraph=function setUpdateGraph(value){return dispatch({type:SHOULD_UPDATE_GRAPH,payload:value});};var updateSelection=function updateSelection(currentSelection){return dispatch({type:UPDATE_SELECTION,payload:currentSelection});};var updateGraphSelectedNodes=function updateGraphSelectedNodes(){return dispatch({type:UPDATE_GRAPH_SELECTED_NODES});};var setNotificationTitleGraph=function setNotificationTitleGraph(notification){return dispatch({type:SET_NOTIFICATION_TITLE_GRAPH,payload:notification});};//const deactivateCanCopyTo = () => dispatch({ type: DEACTIVATE_COPY_TO });\nreturn/*#__PURE__*/React.createElement(GraphContext.Provider,{value:{visNetwork:state.visNetwork,data:state.data,loadingGraph:state.loadingGraph,loadingPkl:state.loadingPkl,loadingJobMonitor:state.loadingJobMonitor,pklchanges:state.pklchanges,enabledGraphSearch:state.enabledGraphSearch,current_grouped:state.current_grouped,current_layout:state.current_layout,selection:state.selection,foundNodes:state.foundNodes,pkldata:state.pkldata,startAutoUpdatePkl:state.startAutoUpdatePkl,shouldUpdateGraph:state.shouldUpdateGraph,graphSelectedNodes:state.graphSelectedNodes,currentCommandGraph:state.currentCommandGraph,notificationTitleGraph:state.notificationTitleGraph,getExperimentGraph:getExperimentGraph,getExperimentPkl:getExperimentPkl,cleanOnlyGraphData:cleanOnlyGraphData,cleanGraphData:cleanGraphData,setLoadingGraph:setLoadingGraph,setUpdateGraph:setUpdateGraph,setVisData:setVisData,setVisNetwork:setVisNetwork,updateSelection:updateSelection,cleanPklData:cleanPklData,searchJobInGraph:searchJobInGraph,cleanNavData:cleanNavData,setAutoUpdatePkl:setAutoUpdatePkl,navigateToGroup:navigateToGroup,navigateTo:navigateTo,navToLatest:navToLatest,navigateAfterLoadGraph:navigateAfterLoadGraph,updateGraphSelectedNodes:updateGraphSelectedNodes,setCurrentCommandGraph:setCurrentCommandGraph,setNotificationTitleGraph:setNotificationTitleGraph}},props.children);};export default GraphState;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/graph/GraphState.js"],"names":["React","useReducer","useContext","axios","GraphContext","GraphReducer","ExperimentContext","GET_GRAPH","GET_PKL_DATA","CLEAN_GRAPH_DATA","CLEAN_ONLY_GRAH_DATA","SET_LOADING_GRAPH","SET_AUTOUPDATE_PKL","SET_VIS_DATA","SET_VIS_NETWORK","UPDATE_SELECTION","SET_FOUND_NODES","SET_LOADING_SEARCH_JOB","SET_LOADING_PKL","SHOULD_UPDATE_GRAPH","SET_LOADING_JOB_MONITOR","SET_CURRENT_COMMAND","NAVIGATE_GRAPH_TO","CLEAN_PKL_DATA","CLEAN_NAV_DATA","NAVIGATE_AFTER_LOADING_GRAPH","NAVIGATE_TO_GROUP_GRAPH","NAVIGATE_TO_LATEST","UPDATE_GRAPH_SELECTED_NODES","SET_NOTIFICATION_TITLE_GRAPH","SET_OFF_LOADING_GRAPH","AUTOSUBMIT_API_SOURCE","DEBUG","GraphState","props","initialState","data","visNodes","visNetwork","loadingGraph","loadingPkl","loadingJobMonitor","enabledGraphSearch","loadingSearchJob","startAutoUpdatePkl","shouldUpdateGraph","pklchanges","notificationTitleGraph","currentCommandGraph","current_grouped","current_layout","selection","foundNodes","graphSelectedNodes","pkldata","state","dispatch","localserver","debug","experimentContext","updateExperimentTimeStamp","experimentRunning","getExperimentGraph","expid","grouped","layout","cleanOnlyGraphData","setLoadingGraph","get","catch","error","alert","message","setOffLoadingGraph","res","console","log","resdata","type","payload","getExperimentPkl","timeStamp","setLoadingPkl","setLoadingJobMonitor","retrievedPkl","pkl_timestamp","navigateAfterLoadGraph","running","navigateTo","Id","navToLatest","statusCode","latest","status","navigateToGroup","IdList","searchJobInGraph","string","setLoadingSearchJob","toUpperCase","setCurrentCommandGraph","command","cleanGraphData","cleanPklData","cleanNavData","setAutoUpdatePkl","value","setVisData","setVisNetwork","setUpdateGraph","updateSelection","currentSelection","updateGraphSelectedNodes","setNotificationTitleGraph","notification","children"],"mappings":"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","sourcesContent":["import React, { useReducer, useContext } from \"react\";\nimport axios from \"axios\";\nimport GraphContext from \"./graphContext\";\nimport GraphReducer from \"./graphReducer\";\nimport ExperimentContext from \"../experiment/experimentContext\";\n\nimport {\n  GET_GRAPH,\n  GET_PKL_DATA,\n  CLEAN_GRAPH_DATA,\n  CLEAN_ONLY_GRAH_DATA,\n  SET_LOADING_GRAPH,\n  SET_AUTOUPDATE_PKL,\n  SET_VIS_DATA,\n  SET_VIS_NETWORK,\n  UPDATE_SELECTION,\n  SET_FOUND_NODES,\n  SET_LOADING_SEARCH_JOB,\n  SET_LOADING_PKL,\n  SHOULD_UPDATE_GRAPH,\n  SET_LOADING_JOB_MONITOR,\n  SET_CURRENT_COMMAND,\n  NAVIGATE_GRAPH_TO,\n  CLEAN_PKL_DATA,\n  CLEAN_NAV_DATA,\n  NAVIGATE_AFTER_LOADING_GRAPH,\n  NAVIGATE_TO_GROUP_GRAPH,\n  NAVIGATE_TO_LATEST,\n  UPDATE_GRAPH_SELECTED_NODES,\n  SET_NOTIFICATION_TITLE_GRAPH,\n  SET_OFF_LOADING_GRAPH,\n  //DEACTIVATE_COPY_TO,\n} from \"../types\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG } from \"../vars\";\n\n//import { timeStampToDate } from \"../utils\";\n\nconst GraphState = (props) => {\n  const initialState = {\n    data: null,\n    visNodes: null,\n    visNetwork: null,\n    loadingGraph: false,\n    loadingPkl: false,\n    loadingJobMonitor: false,\n    enabledGraphSearch: true,\n    loadingSearchJob: false,\n    startAutoUpdatePkl: false,\n    shouldUpdateGraph: false,\n    pklchanges: null,\n    notificationTitleGraph: null,\n    //currentSelected: [],\n    currentCommandGraph: null,\n    current_grouped: \"none\",\n    current_layout: \"standard\",\n    selection: null,\n    foundNodes: null,\n    graphSelectedNodes: null,\n    pkldata: null,\n  };\n\n  const [state, dispatch] = useReducer(GraphReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  //const localserver = \"http://84.88.185.94:8081\";\n  const debug = DEBUG;\n\n  const experimentContext = useContext(ExperimentContext);\n  const { updateExperimentTimeStamp, experimentRunning } = experimentContext;\n\n  // Get Experiment Graph\n  const getExperimentGraph = async (\n    expid,\n    grouped = \"none\",\n    layout = \"standard\"\n  ) => {\n    cleanOnlyGraphData();\n    setLoadingGraph();\n    const res = await axios\n      .get(`${localserver}/graph/${expid}/${layout}/${grouped}`)\n      .catch((error) => {\n        alert(error.message);\n        setOffLoadingGraph();\n      });\n    if (res) {\n      debug && console.log(res.data);\n      const resdata = res.data;\n      dispatch({\n        type: GET_GRAPH,\n        payload: { resdata, grouped, layout },\n      });\n    }\n  };\n\n  // Get Experiment Pkl Data for Graph changes update\n  const getExperimentPkl = async (expid, timeStamp) => {\n    // if (state.isGrouped === false){\n    if (experimentRunning === false) return;\n    setLoadingPkl();\n    setLoadingJobMonitor();\n    //timeStamp = 1000;\n    debug &&\n      console.log(\n        \"Exp: \" + expid + \"\\t\" + timeStamp + \"\\t\" + experimentRunning\n      );\n    const res = await axios.get(`${localserver}/pklinfo/${expid}/${timeStamp}`);\n    debug && console.log(res.data);\n    let retrievedPkl = res.data;\n    dispatch({\n      type: GET_PKL_DATA,\n      payload: retrievedPkl,\n    });\n\n    updateExperimentTimeStamp(retrievedPkl.pkl_timestamp);\n  };\n\n  const navigateAfterLoadGraph = (running = false) => {\n    debug && console.log(\"Nav. After Loading\");\n    dispatch({ type: NAVIGATE_AFTER_LOADING_GRAPH, payload: running });\n  };\n\n  const navigateTo = (Id) => {\n    debug && console.log(\"Nav. To\");\n    dispatch({ type: NAVIGATE_GRAPH_TO, payload: Id });\n  };\n\n  const navToLatest = (statusCode, latest) => {\n    debug && console.log(\"Nav. To Latest\");\n    dispatch({\n      type: NAVIGATE_TO_LATEST,\n      payload: { status: statusCode, latest: latest },\n    });\n  };\n\n  const navigateToGroup = (IdList) => {\n    debug && console.log(\"Nav. To Group.\");\n    dispatch({\n      type: NAVIGATE_TO_GROUP_GRAPH,\n      payload: IdList,\n    });\n  };\n\n  const searchJobInGraph = async (string) => {\n    setLoadingSearchJob();\n    dispatch({\n      type: SET_FOUND_NODES,\n      payload: string.toUpperCase(),\n    });\n  };\n\n  const setCurrentCommandGraph = async (command) => {\n    // for change status\n    //let arrayNames = [];\n\n    //console.log(command);\n    dispatch({\n      type: SET_CURRENT_COMMAND,\n      payload: command,\n    });\n  };\n\n  // Clean state data\n  const cleanOnlyGraphData = () => dispatch({ type: CLEAN_ONLY_GRAH_DATA });\n  const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n  const cleanPklData = () => dispatch({ type: CLEAN_PKL_DATA });\n  const cleanNavData = () => dispatch({ type: CLEAN_NAV_DATA });\n  // Loading\n  const setLoadingGraph = () => dispatch({ type: SET_LOADING_GRAPH });\n  const setOffLoadingGraph = () => dispatch({ type: SET_OFF_LOADING_GRAPH });\n  const setLoadingSearchJob = () => dispatch({ type: SET_LOADING_SEARCH_JOB });\n  const setLoadingPkl = () => dispatch({ type: SET_LOADING_PKL });\n  const setLoadingJobMonitor = () =>\n    dispatch({ type: SET_LOADING_JOB_MONITOR });\n\n  // Set Data\n  const setAutoUpdatePkl = (value) =>\n    dispatch({ type: SET_AUTOUPDATE_PKL, payload: value });\n  const setVisData = (value) =>\n    dispatch({ type: SET_VIS_DATA, payload: value });\n  const setVisNetwork = (value) =>\n    dispatch({ type: SET_VIS_NETWORK, payload: value });\n  const setUpdateGraph = (value) =>\n    dispatch({ type: SHOULD_UPDATE_GRAPH, payload: value });\n  const updateSelection = (currentSelection) =>\n    dispatch({ type: UPDATE_SELECTION, payload: currentSelection });\n  const updateGraphSelectedNodes = () =>\n    dispatch({ type: UPDATE_GRAPH_SELECTED_NODES });\n  const setNotificationTitleGraph = (notification) =>\n    dispatch({ type: SET_NOTIFICATION_TITLE_GRAPH, payload: notification });\n  //const deactivateCanCopyTo = () => dispatch({ type: DEACTIVATE_COPY_TO });\n\n  return (\n    <GraphContext.Provider\n      value={{\n        visNetwork: state.visNetwork,\n        data: state.data,\n        loadingGraph: state.loadingGraph,\n        loadingPkl: state.loadingPkl,\n        loadingJobMonitor: state.loadingJobMonitor,\n        pklchanges: state.pklchanges,\n        enabledGraphSearch: state.enabledGraphSearch,\n        current_grouped: state.current_grouped,\n        current_layout: state.current_layout,\n        selection: state.selection,\n        foundNodes: state.foundNodes,\n        pkldata: state.pkldata,\n        startAutoUpdatePkl: state.startAutoUpdatePkl,\n        shouldUpdateGraph: state.shouldUpdateGraph,\n        graphSelectedNodes: state.graphSelectedNodes,\n        currentCommandGraph: state.currentCommandGraph,\n        notificationTitleGraph: state.notificationTitleGraph,\n        getExperimentGraph,\n        getExperimentPkl,\n        cleanOnlyGraphData,\n        cleanGraphData,\n        setLoadingGraph,\n        setUpdateGraph,\n        setVisData,\n        setVisNetwork,\n        updateSelection,\n        cleanPklData,\n        searchJobInGraph,\n        cleanNavData,\n        setAutoUpdatePkl,\n        navigateToGroup,\n        navigateTo,\n        navToLatest,\n        navigateAfterLoadGraph,\n        updateGraphSelectedNodes,\n        setCurrentCommandGraph,\n        setNotificationTitleGraph,\n      }}\n    >\n      {props.children}\n    </GraphContext.Provider>\n  );\n};\n\nexport default GraphState;\n"]},"metadata":{},"sourceType":"module"}