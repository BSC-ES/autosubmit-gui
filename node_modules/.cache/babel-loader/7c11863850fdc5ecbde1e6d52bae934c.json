{"ast":null,"code":"import _classCallCheck from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/BleuDChan/ReposBSC/autosubmitreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';var FileStatus=/*#__PURE__*/function(_Component){_inherits(FileStatus,_Component);var _super=_createSuper(FileStatus);function FileStatus(){_classCallCheck(this,FileStatus);return _super.apply(this,arguments);}_createClass(FileStatus,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;this.props.getFileStatus();this.interval=setInterval(function(){return _this.props.getFileStatus();},300000);// Every 300 seconds\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.cleanFileStatusData();clearInterval(this.interval);}},{key:\"render\",value:function render(){if(this.props.esarchiveStatus){var _this$props$esarchive=this.props.esarchiveStatus,avg_bandwidth=_this$props$esarchive.avg_bandwidth,avg_latency=_this$props$esarchive.avg_latency,bandwidth_warning=_this$props$esarchive.bandwidth_warning,current_bandwidth=_this$props$esarchive.current_bandwidth,current_latency=_this$props$esarchive.current_latency,error=_this$props$esarchive.error,error_message=_this$props$esarchive.error_message,latency_warning=_this$props$esarchive.latency_warning,reponse_time=_this$props$esarchive.reponse_time,response_warning=_this$props$esarchive.response_warning,status=_this$props$esarchive.status;// let badge_style = status === \"ONLINE\" ? \"badge badge-success\" : \"badge badge-secondary\";\n// let show_alert = false;\nvar metrics_text=!error?current_bandwidth.toFixed(2)+\" MB/s \"+current_latency.toFixed(2)+\" s\":\"\";var span_alert=/*#__PURE__*/React.createElement(\"small\",null,\"esarchive \",metrics_text);if(error||status!==\"ONLINE\"){var message_pop=error?error_message:\"Access to esarchive seems to be unstable at the moment.\";span_alert=/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-light\",\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",title:message_pop},\"esarchive UNKNOWN!\");}else{if(bandwidth_warning||latency_warning||response_warning){//badge_style = \"badge badge-warning\";     \n//show_alert = true;  \nvar title_bandwidth_warn=bandwidth_warning?String(bandwidth_warning)+\". Current bandwidth: \"+String(current_bandwidth.toFixed(2))+\" MB/s. Average over last day: \"+String(avg_bandwidth.toFixed(2))+\" MB/s.\":\"\";var title_latency_warn=latency_warning?\"\\n\"+String(latency_warning)+\". Current latency: \"+String(current_latency.toFixed(2))+\" s. Average over last day: \"+String(avg_latency.toFixed(2))+\" s.\":\"\";var title_response_warn=response_warning?\"\\n\"+String(response_warning)+\". Current response time: \"+String(reponse_time.toFixed(2))+\" s.\":\"\";var tootltip_title=title_bandwidth_warn+title_latency_warn+title_response_warn;span_alert=/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-warning\",\"data-toggle\":\"tooltip\",\"data-placement\":\"bottom\",title:tootltip_title},\"esarchive \",/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-exclamation-circle\",\"aria-hidden\":\"true\"}),\" \",metrics_text);}}return/*#__PURE__*/React.createElement(\"span\",{className:\"navbar-brand ml-4\"},/*#__PURE__*/React.createElement(\"small\",null,span_alert));}else{return/*#__PURE__*/React.createElement(\"span\",{className:\"navbar-brand ml-4\"},/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-secondary\"},\"UNKNOWN\"));}}}]);return FileStatus;}(Component);export default FileStatus;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/experiment/FileStatus.js"],"names":["React","Component","FileStatus","props","getFileStatus","interval","setInterval","cleanFileStatusData","clearInterval","esarchiveStatus","avg_bandwidth","avg_latency","bandwidth_warning","current_bandwidth","current_latency","error","error_message","latency_warning","reponse_time","response_warning","status","metrics_text","toFixed","span_alert","message_pop","title_bandwidth_warn","String","title_latency_warn","title_response_warn","tootltip_title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nclass FileStatus extends Component {\n\n  componentDidMount(){\n    this.props.getFileStatus();\n    this.interval = setInterval(() => this.props.getFileStatus(), 300000); // Every 300 seconds\n  }\n\n  componentWillUnmount() {\n    this.props.cleanFileStatusData();\n    clearInterval(this.interval);\n  }\n\n  render() {\n    \n    if (this.props.esarchiveStatus){\n      const {\n        avg_bandwidth,\n        avg_latency,\n        bandwidth_warning,\n        current_bandwidth,\n        current_latency,\n        //datetime,\n        error, \n        error_message,\n        latency_warning,\n        reponse_time,\n        response_warning,\n        status,\n      } = this.props.esarchiveStatus;\n\n      // let badge_style = status === \"ONLINE\" ? \"badge badge-success\" : \"badge badge-secondary\";\n      // let show_alert = false;\n      const metrics_text = !error ? current_bandwidth.toFixed(2) + \" MB/s \" + current_latency.toFixed(2) + \" s\" : \"\";\n      let span_alert = <small>esarchive {metrics_text}</small>;\n      if (error || status !== \"ONLINE\"){\n        const message_pop = error ? error_message : \"Access to esarchive seems to be unstable at the moment.\";\n        span_alert = <span className=\"badge badge-light\" data-toggle='tooltip' data-placement='bottom' title={message_pop}>esarchive UNKNOWN!</span>;\n      } else {\n        if (bandwidth_warning || latency_warning || response_warning){\n          //badge_style = \"badge badge-warning\";     \n          //show_alert = true;  \n          const title_bandwidth_warn  =  bandwidth_warning ? \n          String(bandwidth_warning) + \". Current bandwidth: \" + String(current_bandwidth.toFixed(2)) + \" MB/s. Average over last day: \" + String(avg_bandwidth.toFixed(2)) + \" MB/s.\" \n          : \"\";\n          const title_latency_warn  =  latency_warning ? \n          \"\\n\" + String(latency_warning) + \". Current latency: \" + String(current_latency.toFixed(2)) + \" s. Average over last day: \" + String(avg_latency.toFixed(2)) + \" s.\" \n          : \"\";\n          const title_response_warn = response_warning ? \"\\n\" + String(response_warning) + \". Current response time: \" + String(reponse_time.toFixed(2)) + \" s.\" : \"\";\n  \n  \n          const tootltip_title = title_bandwidth_warn + title_latency_warn + title_response_warn;\n          span_alert = <span className=\"badge badge-warning\" data-toggle='tooltip' data-placement='bottom' title={tootltip_title}>esarchive <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i> {metrics_text}</span>\n        }\n      }\n      \n      \n      return (\n        <span className=\"navbar-brand ml-4\">\n          <small>{span_alert}</small>\n        </span>\n        \n      )\n    } else {\n      return (<span className=\"navbar-brand ml-4\"><span className=\"badge badge-secondary\">UNKNOWN</span></span>);\n    }\n    \n  }\n}\n\nexport default FileStatus\n"]},"metadata":{},"sourceType":"module"}