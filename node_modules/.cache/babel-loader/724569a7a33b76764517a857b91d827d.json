{"ast":null,"code":"var _jsxFileName = \"/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/experiment/ExperimentState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport ExperimentContext from \"./experimentContext\";\nimport ExperimentReducer from \"./experimentReducer\";\nimport { SEARCH_EXPERIMENTS, SET_LOADING, CLEAR_EXPERIMENTS, GET_EXPERIMENT //GET_TREE,\n//SET_LOADING_TREE,\n, GET_EXPERIMENT_RUN, SET_LOADING_RUN, CLEAN_RUN_DATA, SET_AUTOUPDATE_RUN, SET_LOADING_STATE, GET_RUNNING_STATE, UPDATE_EXPERIMENT_TS, CURRENT_RUNNING, GET_EXPERIMENT_SUMMARY, CLEAR_SUMMARY_EXP, GET_EXPERIMENT_PERFORMANCE, CLEAN_PERFORMANCE_METRICS, ACTIVATE_SELECTION_MODE, DEACTIVATE_SELECTION_MODE, REMOVE_SELECTED_JOB, SET_CURRENT_COMMAND, SET_CURRENT_TEXT_COMMAND, UPDATE_SELECTED_JOBS, SET_LOADING_SUMMARY, CLEAN_EXPERIMENT_DATA, LOADING_PERFORMANCE_METRICS, GET_JOB_HISTORY, LOADING_JOB_HISTORY, LOADING_EXPERIMENT_RUNS, GET_EXPERIMENT_RUNS, GET_FILE_STATUS, CLEAN_FILE_STATUS_DATA } from \"../types\";\nimport { AUTOSUBMIT_API_SOURCE, DEBUG, ERROR_MESSAGE, NOAPI } from \"../vars\";\nimport { timeStampToDate } from \"../utils\";\n\nconst ExperimentState = props => {\n  const initialState = {\n    experiments: [],\n    summaries: [],\n    experiment: {},\n    totalJobs: 0,\n    jobHistory: null,\n    experimentRuns: null,\n    expectedLoadingTreeTime: 0,\n    expectedLoadingQuickView: 0,\n    loadingSummary: new Map(),\n    loading: false,\n    loadingPerformance: false,\n    experimentRunning: false,\n    rundata: null,\n    performancedata: null,\n    loadingRun: false,\n    loadingState: false,\n    loadingFilterTree: false,\n    loadingExperimentRuns: false,\n    currentCommand: null,\n    currentTextCommand: null,\n    currentSelected: [],\n    startAutoUpdateRun: false,\n    startAutoUpdateTreePkl: false,\n    fancyTree: null,\n    allowJobMonitor: false,\n    canSelect: false,\n    esarchiveStatus: null\n  };\n  const [state, dispatch] = useReducer(ExperimentReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE; //const localserver = \"http://84.88.185.94:8081\";\n\n  const debug = DEBUG; // Search Experiments\n\n  const searchExperiments = async text => {\n    setLoading();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/search.json\").experiment;\n    } else {\n      const res = await axios.get(`${localserver}/search/${text}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      debug && console.log(res.data);\n      result = res ? res.data.experiment : [];\n    }\n\n    dispatch({\n      type: SEARCH_EXPERIMENTS,\n      payload: result\n    });\n  };\n\n  const getSummaries = () => {\n    const experiments = state.experiments;\n\n    for (var exp in experiments) {\n      var exp_name = experiments[exp].name;\n      getExperimentSummary(exp_name);\n    }\n  };\n\n  const getJobHistory = async (expid, job_name) => {\n    setLoadingJobHistory();\n    let result = null;\n\n    if (NOAPI) {\n      // Only one job for NO-API mode\n      result = require(\"../data/history_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/history/${expid}/${job_name}`).catch(error => {\n        alert(error.message);\n      });\n      debug && console.log(res.data);\n      result = res ? res.data : null;\n    }\n\n    dispatch({\n      type: GET_JOB_HISTORY,\n      payload: result\n    });\n  };\n\n  const getExperimentRuns = async expid => {\n    setLoadingExperimentRuns();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/runs_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/runs/${expid}`).catch(error => {\n        alert(error.message);\n      });\n      result = res ? res.data : null;\n      debug && console.log(result);\n    } // console.log(result);\n\n\n    dispatch({\n      type: GET_EXPERIMENT_RUNS,\n      payload: result\n    });\n  }; // Get Summary for Search item\n\n\n  const getExperimentSummary = async expid => {\n    clearSummary(expid);\n    setLoadingSummary(expid);\n    let summary = null;\n\n    if (NOAPI) {\n      summary = require(\"../data/summary_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/summary/${expid}`).catch(error => {\n        alert(ERROR_MESSAGE + \"\\n\" + error.message);\n      });\n      summary = res ? res.data : null;\n      debug && console.log(summary);\n    } // console.log(summary);\n    // console.log(state.summaries);\n    //state.summaries.push({ key: expid, value: summary });\n\n\n    dispatch({\n      type: GET_EXPERIMENT_SUMMARY,\n      payload: {\n        expid: expid,\n        summary: summary\n      } //payload: { currentSummaries, summary, expid }\n\n    });\n  };\n\n  const getExperimentPerformanceMetrics = async expid => {\n    cleanPerformanceMetrics();\n    setLoadingPerformanceMetrics();\n    let metrics = null;\n\n    if (NOAPI) {\n      metrics = require(\"../data/performance_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/performance/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      metrics = res ? res.data : null;\n      debug && console.log(metrics);\n    }\n\n    dispatch({\n      type: GET_EXPERIMENT_PERFORMANCE,\n      payload: metrics\n    });\n  };\n\n  const clearSummary = expid => {\n    dispatch({\n      type: CLEAR_SUMMARY_EXP,\n      payload: expid\n    });\n  };\n\n  const getCurrentRunning = async () => {\n    setLoading();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/search.json\").experiment;\n    } else {\n      const res = await axios.get(`${localserver}/running/`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data.experiment : null;\n      debug && console.log(result);\n    }\n\n    dispatch({\n      type: CURRENT_RUNNING,\n      payload: result\n    });\n  }; //const updateSelection = async () => {};\n  // Get Experiment\n\n\n  const getExperiment = async expid => {\n    setLoading();\n    let result = null; //cleanGraphData();\n\n    if (NOAPI) {\n      result = require(\"../data/expinfo_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/expinfo/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n\n    dispatch({\n      type: GET_EXPERIMENT,\n      payload: result\n    });\n  }; // Get Experiment Log Run\n\n\n  const getExperimentRun = async expid => {\n    setLoadingRun();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/exprun_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/exprun/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n\n    dispatch({\n      type: GET_EXPERIMENT_RUN,\n      payload: result\n    });\n  }; // Get current esarchive status\n\n\n  const getFileStatus = async () => {\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/filestatus.json\");\n    } else {\n      const res = await axios.get(`${localserver}/filestatus/`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n\n    dispatch({\n      type: GET_FILE_STATUS,\n      payload: result\n    });\n  }; // Get Running State\n\n\n  const getRunningState = async expid => {\n    setLoadingState();\n    let result = null;\n\n    if (NOAPI) {\n      result = require(\"../data/ifrun_\" + String(expid) + \".json\");\n    } else {\n      const res = await axios.get(`${localserver}/ifrun/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n\n    dispatch({\n      type: GET_RUNNING_STATE,\n      payload: result\n    });\n  };\n\n  const setCurrentCommand = async command => {\n    // for change status\n    dispatch({\n      type: SET_CURRENT_COMMAND,\n      payload: command\n    }); //return command;\n  };\n\n  const setCurrentTextCommand = async command => {\n    dispatch({\n      type: SET_CURRENT_TEXT_COMMAND,\n      payload: command\n    });\n  }; // Cleaning\n\n\n  const clearExperiments = () => dispatch({\n    type: CLEAR_EXPERIMENTS\n  }); //const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n\n\n  const cleanFileStatusData = () => dispatch({\n    type: CLEAN_FILE_STATUS_DATA\n  });\n\n  const cleanRunData = () => dispatch({\n    type: CLEAN_RUN_DATA\n  });\n\n  const cleanPerformanceMetrics = () => dispatch({\n    type: CLEAN_PERFORMANCE_METRICS\n  });\n\n  const cleanExperimentData = () => dispatch({\n    type: CLEAN_EXPERIMENT_DATA\n  }); // Set Loading\n\n\n  const setLoading = () => dispatch({\n    type: SET_LOADING\n  });\n\n  const setLoadingRun = () => dispatch({\n    type: SET_LOADING_RUN\n  });\n\n  const setLoadingState = () => dispatch({\n    type: SET_LOADING_STATE\n  });\n\n  const setLoadingSummary = summExpid => dispatch({\n    type: SET_LOADING_SUMMARY,\n    payload: summExpid\n  });\n\n  const setLoadingPerformanceMetrics = () => dispatch({\n    type: LOADING_PERFORMANCE_METRICS\n  });\n\n  const setLoadingJobHistory = () => dispatch({\n    type: LOADING_JOB_HISTORY\n  });\n\n  const setLoadingExperimentRuns = () => dispatch({\n    type: LOADING_EXPERIMENT_RUNS\n  }); // Action Things\n\n\n  const updateExperimentTimeStamp = timeStamp => {\n    //console.log(timeStamp);\n    dispatch({\n      type: UPDATE_EXPERIMENT_TS,\n      payload: timeStamp\n    });\n  }; // Updates for the Selection Tool\n  // source: Tree, Graph\n\n\n  const updateCurrentSelectedTree = (selectedJob, treedata) => {\n    debug && console.log(treedata);\n\n    if (treedata) {\n      let currentNode = {\n        name: selectedJob,\n        color: \"yellow\",\n        source: \"Tree\"\n      };\n      const selectedNode = treedata.jobs.find(job => job.id === currentNode.name);\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode\n      });\n    }\n  };\n\n  const updateCurrentSelectedGraph = (selectedJob, data) => {\n    // console.log(data);\n    // console.log(selectedJob);\n    if (data) {\n      let currentNode = {\n        name: selectedJob,\n        color: \"yellow\"\n      };\n      const selectedNode = data.nodes.find(node => {\n        return node.id === currentNode.name;\n      });\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode\n      });\n    }\n  };\n\n  const setAutoUpdateRun = value => dispatch({\n    type: SET_AUTOUPDATE_RUN,\n    payload: value\n  });\n\n  const activateSelectionMode = () => dispatch({\n    type: ACTIVATE_SELECTION_MODE\n  });\n\n  const deactivateSelectionMode = () => dispatch({\n    type: DEACTIVATE_SELECTION_MODE\n  });\n\n  const removeSelectedJob = name => dispatch({\n    type: REMOVE_SELECTED_JOB,\n    payload: name\n  });\n\n  return /*#__PURE__*/React.createElement(ExperimentContext.Provider, {\n    value: {\n      experiments: state.experiments,\n      experiment: state.experiment,\n      summaries: state.summaries,\n      loadingSummary: state.loadingSummary,\n      loading: state.loading,\n      loadingRun: state.loadingRun,\n      loadingState: state.loadingState,\n      loadingPerformance: state.loadingPerformance,\n      jobHistory: state.jobHistory,\n      performancedata: state.performancedata,\n      experimentRuns: state.experimentRuns,\n      rundata: state.rundata,\n      currentSelected: state.currentSelected,\n      startAutoUpdateRun: state.startAutoUpdateRun,\n      experimentRunning: state.experimentRunning,\n      currentCommand: state.currentCommand,\n      canSelect: state.canSelect,\n      totalJobs: state.totalJobs,\n      expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n      expectedLoadingQuickView: state.expectedLoadingQuickView,\n      experimentRunDetailForTree: state.experimentRunDetailForTree,\n      esarchiveStatus: state.esarchiveStatus,\n      setAutoUpdateRun,\n      searchExperiments,\n      getCurrentRunning,\n      clearExperiments,\n      getExperiment,\n      cleanPerformanceMetrics,\n      cleanRunData,\n      getExperimentRun,\n      timeStampToDate,\n      getRunningState,\n      getExperimentPerformanceMetrics,\n      getExperimentSummary,\n      clearSummary,\n      getSummaries,\n      activateSelectionMode,\n      deactivateSelectionMode,\n      removeSelectedJob,\n      setCurrentCommand,\n      setCurrentTextCommand,\n      updateCurrentSelectedGraph,\n      updateCurrentSelectedTree,\n      updateExperimentTimeStamp,\n      cleanExperimentData,\n      getJobHistory,\n      getExperimentRuns,\n      getFileStatus,\n      cleanFileStatusData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default ExperimentState;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/experiment/ExperimentState.js"],"names":["React","useReducer","axios","ExperimentContext","ExperimentReducer","SEARCH_EXPERIMENTS","SET_LOADING","CLEAR_EXPERIMENTS","GET_EXPERIMENT","GET_EXPERIMENT_RUN","SET_LOADING_RUN","CLEAN_RUN_DATA","SET_AUTOUPDATE_RUN","SET_LOADING_STATE","GET_RUNNING_STATE","UPDATE_EXPERIMENT_TS","CURRENT_RUNNING","GET_EXPERIMENT_SUMMARY","CLEAR_SUMMARY_EXP","GET_EXPERIMENT_PERFORMANCE","CLEAN_PERFORMANCE_METRICS","ACTIVATE_SELECTION_MODE","DEACTIVATE_SELECTION_MODE","REMOVE_SELECTED_JOB","SET_CURRENT_COMMAND","SET_CURRENT_TEXT_COMMAND","UPDATE_SELECTED_JOBS","SET_LOADING_SUMMARY","CLEAN_EXPERIMENT_DATA","LOADING_PERFORMANCE_METRICS","GET_JOB_HISTORY","LOADING_JOB_HISTORY","LOADING_EXPERIMENT_RUNS","GET_EXPERIMENT_RUNS","GET_FILE_STATUS","CLEAN_FILE_STATUS_DATA","AUTOSUBMIT_API_SOURCE","DEBUG","ERROR_MESSAGE","NOAPI","timeStampToDate","ExperimentState","props","initialState","experiments","summaries","experiment","totalJobs","jobHistory","experimentRuns","expectedLoadingTreeTime","expectedLoadingQuickView","loadingSummary","Map","loading","loadingPerformance","experimentRunning","rundata","performancedata","loadingRun","loadingState","loadingFilterTree","loadingExperimentRuns","currentCommand","currentTextCommand","currentSelected","startAutoUpdateRun","startAutoUpdateTreePkl","fancyTree","allowJobMonitor","canSelect","esarchiveStatus","state","dispatch","localserver","debug","searchExperiments","text","setLoading","result","require","res","get","catch","error","alert","message","console","log","data","type","payload","getSummaries","exp","exp_name","name","getExperimentSummary","getJobHistory","expid","job_name","setLoadingJobHistory","String","getExperimentRuns","setLoadingExperimentRuns","clearSummary","setLoadingSummary","summary","getExperimentPerformanceMetrics","cleanPerformanceMetrics","setLoadingPerformanceMetrics","metrics","getCurrentRunning","getExperiment","getExperimentRun","setLoadingRun","getFileStatus","getRunningState","setLoadingState","setCurrentCommand","command","setCurrentTextCommand","clearExperiments","cleanFileStatusData","cleanRunData","cleanExperimentData","summExpid","updateExperimentTimeStamp","timeStamp","updateCurrentSelectedTree","selectedJob","treedata","currentNode","color","source","selectedNode","jobs","find","job","id","status_color","updateCurrentSelectedGraph","nodes","node","setAutoUpdateRun","value","activateSelectionMode","deactivateSelectionMode","removeSelectedJob","experimentRunDetailForTree","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport ExperimentContext from \"./experimentContext\";\nimport ExperimentReducer from \"./experimentReducer\";\nimport {\n  SEARCH_EXPERIMENTS,\n  SET_LOADING,\n  CLEAR_EXPERIMENTS,\n  GET_EXPERIMENT,\n  //GET_TREE,\n  //SET_LOADING_TREE,\n  GET_EXPERIMENT_RUN,\n  SET_LOADING_RUN,\n  CLEAN_RUN_DATA,\n  SET_AUTOUPDATE_RUN,\n  SET_LOADING_STATE,\n  GET_RUNNING_STATE,\n  UPDATE_EXPERIMENT_TS,\n  CURRENT_RUNNING,\n  GET_EXPERIMENT_SUMMARY,\n  CLEAR_SUMMARY_EXP,\n  GET_EXPERIMENT_PERFORMANCE,\n  CLEAN_PERFORMANCE_METRICS,\n  ACTIVATE_SELECTION_MODE,\n  DEACTIVATE_SELECTION_MODE,\n  REMOVE_SELECTED_JOB,\n  SET_CURRENT_COMMAND,\n  SET_CURRENT_TEXT_COMMAND,\n  UPDATE_SELECTED_JOBS,\n  SET_LOADING_SUMMARY,\n  CLEAN_EXPERIMENT_DATA,\n  LOADING_PERFORMANCE_METRICS,\n  GET_JOB_HISTORY,\n  LOADING_JOB_HISTORY,\n  LOADING_EXPERIMENT_RUNS,\n  GET_EXPERIMENT_RUNS,\n  GET_FILE_STATUS,\n  CLEAN_FILE_STATUS_DATA\n} from \"../types\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG, ERROR_MESSAGE, NOAPI } from \"../vars\";\n\nimport { timeStampToDate } from \"../utils\";\n\nconst ExperimentState = (props) => {\n  const initialState = {\n    experiments: [],\n    summaries: [],\n    experiment: {},\n    totalJobs: 0,\n    jobHistory: null,\n    experimentRuns: null,        \n    expectedLoadingTreeTime: 0,\n    expectedLoadingQuickView: 0,\n    loadingSummary: new Map(),\n    loading: false,\n    loadingPerformance: false,\n    experimentRunning: false,\n    rundata: null,\n    performancedata: null,\n    loadingRun: false,\n    loadingState: false,\n    loadingFilterTree: false,\n    loadingExperimentRuns: false,\n    currentCommand: null,\n    currentTextCommand: null,\n    currentSelected: [],\n    startAutoUpdateRun: false,\n    startAutoUpdateTreePkl: false,\n    fancyTree: null,\n    allowJobMonitor: false,\n    canSelect: false,\n    esarchiveStatus: null,\n  };\n\n  const [state, dispatch] = useReducer(ExperimentReducer, initialState);\n\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  //const localserver = \"http://84.88.185.94:8081\";\n  const debug = DEBUG;\n\n  // Search Experiments\n  const searchExperiments = async (text) => {\n    setLoading();\n    let result = null;\n    if (NOAPI) {      \n      result = require(\"../data/search.json\").experiment;\n    } else {\n      const res = await axios.get(`${localserver}/search/${text}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      debug && console.log(res.data);\n      result = res ? res.data.experiment : [];\n    }  \n    dispatch({\n      type: SEARCH_EXPERIMENTS,\n      payload: result,\n    });\n  };\n\n  const getSummaries = () => {\n    const experiments = state.experiments;\n    for (var exp in experiments) {\n      var exp_name = experiments[exp].name;\n      getExperimentSummary(exp_name);\n    }\n  };\n\n  const getJobHistory = async (expid, job_name) => {\n    setLoadingJobHistory();\n    let result = null;\n    if (NOAPI) {\n      // Only one job for NO-API mode\n      result = require(\"../data/history_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios\n      .get(`${localserver}/history/${expid}/${job_name}`)\n      .catch((error) => {\n        alert(error.message);\n      });\n      debug && console.log(res.data);\n      result = res ? res.data : null;\n    }    \n    dispatch({\n      type: GET_JOB_HISTORY,\n      payload: result,\n    });\n  };\n\n  const getExperimentRuns = async (expid) => {\n    setLoadingExperimentRuns();\n    let result = null;\n    if (NOAPI) {\n      result = require(\"../data/runs_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/runs/${expid}`).catch((error) => {alert(error.message);});    \n      result = res ? res.data : null;\n      debug && console.log(result);\n    }    \n    // console.log(result);\n    dispatch({\n      type: GET_EXPERIMENT_RUNS,\n      payload: result,\n    })\n  }\n\n  // Get Summary for Search item\n  const getExperimentSummary = async (expid) => {\n    clearSummary(expid);\n    setLoadingSummary(expid);\n    let summary = null;\n    if (NOAPI){\n      summary = require(\"../data/summary_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/summary/${expid}`).catch((error) => {alert(ERROR_MESSAGE + \"\\n\" + error.message);});\n      summary = res ? res.data : null;\n      debug && console.log(summary);\n    }    \n    // console.log(summary);\n    // console.log(state.summaries);\n    //state.summaries.push({ key: expid, value: summary });\n    dispatch({\n      type: GET_EXPERIMENT_SUMMARY,\n      payload: { expid: expid, summary: summary },\n      //payload: { currentSummaries, summary, expid }\n    });\n  };\n\n  const getExperimentPerformanceMetrics = async (expid) => {\n    cleanPerformanceMetrics();\n    setLoadingPerformanceMetrics();\n    let metrics = null;\n    if (NOAPI) {\n      metrics = require(\"../data/performance_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/performance/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      metrics = res ? res.data : null ;\n      debug && console.log(metrics);\n    }    \n    dispatch({\n      type: GET_EXPERIMENT_PERFORMANCE,\n      payload: metrics,\n    });\n  };\n\n  const clearSummary = (expid) => {\n    dispatch({\n      type: CLEAR_SUMMARY_EXP,\n      payload: expid,\n    });\n  };\n\n  const getCurrentRunning = async () => {\n    setLoading();\n    let result = null;\n    if (NOAPI){\n      result = require(\"../data/search.json\").experiment;      \n    } else {\n      const res = await axios.get(`${localserver}/running/`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data.experiment : null;\n      debug && console.log(result);\n    }\n    \n    dispatch({\n      type: CURRENT_RUNNING,\n      payload: result,\n    });\n  };\n\n  //const updateSelection = async () => {};\n\n  // Get Experiment\n  const getExperiment = async (expid) => {\n    setLoading();\n    let result = null;\n    //cleanGraphData();\n    if (NOAPI) {\n      result = require(\"../data/expinfo_\"+String(expid)+\".json\"); \n    } else {\n      const res = await axios.get(`${localserver}/expinfo/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }    \n    dispatch({\n      type: GET_EXPERIMENT,\n      payload: result,\n    });\n  };\n\n  // Get Experiment Log Run\n  const getExperimentRun = async (expid) => {\n    setLoadingRun();\n    let result = null;\n    if (NOAPI) {\n      result = require(\"../data/exprun_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/exprun/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n    \n    dispatch({\n      type: GET_EXPERIMENT_RUN,\n      payload: result,\n    });\n  };\n\n  // Get current esarchive status\n  const getFileStatus = async () => {\n    let result = null;\n    if (NOAPI) {\n      result = require(\"../data/filestatus.json\");\n    } else {\n      const res = await axios.get(`${localserver}/filestatus/`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n    dispatch({\n      type: GET_FILE_STATUS,\n      payload: result,\n    });\n  }\n\n  // Get Running State\n  const getRunningState = async (expid) => {\n    setLoadingState();\n    let result = null;\n    if (NOAPI) {\n      result = require(\"../data/ifrun_\"+String(expid)+\".json\");\n    } else {\n      const res = await axios.get(`${localserver}/ifrun/${expid}`).catch(error => alert(ERROR_MESSAGE + \"\\n\" + error.message));\n      result = res ? res.data : null;\n      debug && console.log(result);\n    }\n    \n    dispatch({\n      type: GET_RUNNING_STATE,\n      payload: result,\n    });\n  };\n\n  const setCurrentCommand = async (command) => {\n    // for change status\n    dispatch({\n      type: SET_CURRENT_COMMAND,\n      payload: command,\n    });\n    //return command;\n  };\n\n  const setCurrentTextCommand = async (command) => {\n    dispatch({\n      type: SET_CURRENT_TEXT_COMMAND,\n      payload: command,\n    });\n  }\n\n  // Cleaning\n  const clearExperiments = () => dispatch({ type: CLEAR_EXPERIMENTS });\n  //const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n\n  const cleanFileStatusData = () => dispatch({ type: CLEAN_FILE_STATUS_DATA })\n\n  const cleanRunData = () => dispatch({ type: CLEAN_RUN_DATA });\n\n  const cleanPerformanceMetrics = () =>\n    dispatch({ type: CLEAN_PERFORMANCE_METRICS });\n\n  const cleanExperimentData = () => dispatch({ type: CLEAN_EXPERIMENT_DATA });\n\n  // Set Loading\n  const setLoading = () => dispatch({ type: SET_LOADING });\n  const setLoadingRun = () => dispatch({ type: SET_LOADING_RUN });\n  const setLoadingState = () => dispatch({ type: SET_LOADING_STATE });\n  const setLoadingSummary = (summExpid) =>\n    dispatch({ type: SET_LOADING_SUMMARY, payload: summExpid });\n  const setLoadingPerformanceMetrics = () =>\n    dispatch({ type: LOADING_PERFORMANCE_METRICS });\n  const setLoadingJobHistory = () => dispatch({ type: LOADING_JOB_HISTORY });\n  const setLoadingExperimentRuns = () => dispatch({ type: LOADING_EXPERIMENT_RUNS });\n  // Action Things\n  const updateExperimentTimeStamp = (timeStamp) => {\n    //console.log(timeStamp);\n    dispatch({ type: UPDATE_EXPERIMENT_TS, payload: timeStamp });\n  };\n\n  // Updates for the Selection Tool\n  // source: Tree, Graph\n  const updateCurrentSelectedTree = (selectedJob, treedata) => {\n    debug && console.log(treedata);\n    if (treedata) {\n      let currentNode = { name: selectedJob, color: \"yellow\", source: \"Tree\" };\n      const selectedNode = treedata.jobs.find(\n        (job) => job.id === currentNode.name\n      );\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode,\n      });\n    }\n  };\n\n  const updateCurrentSelectedGraph = (selectedJob, data) => {\n    // console.log(data);\n    // console.log(selectedJob);\n    if (data) {\n      let currentNode = { name: selectedJob, color: \"yellow\" };\n      const selectedNode = data.nodes.find((node) => {\n        return node.id === currentNode.name;\n      });\n      currentNode.color = selectedNode.status_color;\n      dispatch({ type: UPDATE_SELECTED_JOBS, payload: currentNode });\n    }\n  };\n\n  const setAutoUpdateRun = (value) =>\n    dispatch({ type: SET_AUTOUPDATE_RUN, payload: value });\n\n  const activateSelectionMode = () =>\n    dispatch({ type: ACTIVATE_SELECTION_MODE });\n  const deactivateSelectionMode = () =>\n    dispatch({ type: DEACTIVATE_SELECTION_MODE });\n  const removeSelectedJob = (name) =>\n    dispatch({ type: REMOVE_SELECTED_JOB, payload: name });\n\n  return (\n    <ExperimentContext.Provider\n      value={{\n        experiments: state.experiments,\n        experiment: state.experiment,\n        summaries: state.summaries,\n        loadingSummary: state.loadingSummary,\n        loading: state.loading,\n        loadingRun: state.loadingRun,\n        loadingState: state.loadingState,\n        loadingPerformance: state.loadingPerformance,\n        jobHistory: state.jobHistory,\n        performancedata: state.performancedata,\n        experimentRuns: state.experimentRuns,\n        rundata: state.rundata,\n        currentSelected: state.currentSelected,\n        startAutoUpdateRun: state.startAutoUpdateRun,\n        experimentRunning: state.experimentRunning,\n        currentCommand: state.currentCommand,\n        canSelect: state.canSelect,\n        totalJobs: state.totalJobs,\n        expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n        expectedLoadingQuickView: state.expectedLoadingQuickView,\n        experimentRunDetailForTree: state.experimentRunDetailForTree,   \n        esarchiveStatus: state.esarchiveStatus,     \n        setAutoUpdateRun,\n        searchExperiments,\n        getCurrentRunning,\n        clearExperiments,\n        getExperiment,\n        cleanPerformanceMetrics,\n        cleanRunData,\n        getExperimentRun,\n        timeStampToDate,\n        getRunningState,\n        getExperimentPerformanceMetrics,\n        getExperimentSummary,\n        clearSummary,\n        getSummaries,\n        activateSelectionMode,\n        deactivateSelectionMode,\n        removeSelectedJob,\n        setCurrentCommand,\n        setCurrentTextCommand,\n        updateCurrentSelectedGraph,\n        updateCurrentSelectedTree,\n        updateExperimentTimeStamp,\n        cleanExperimentData,\n        getJobHistory,\n        getExperimentRuns,\n        getFileStatus,\n        cleanFileStatusData,\n      }}\n    >\n      {props.children}\n    </ExperimentContext.Provider>\n  );\n};\n\nexport default ExperimentState;\n"]},"metadata":{},"sourceType":"module"}