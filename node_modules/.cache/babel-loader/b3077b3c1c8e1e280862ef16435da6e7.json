{"ast":null,"code":"var _jsxFileName = \"/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/experiment/ExperimentState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport ExperimentContext from \"./experimentContext\";\nimport ExperimentReducer from \"./experimentReducer\";\nimport { SEARCH_EXPERIMENTS, SET_LOADING, CLEAR_EXPERIMENTS, GET_EXPERIMENT //GET_TREE,\n//SET_LOADING_TREE,\n, GET_EXPERIMENT_RUN, SET_LOADING_RUN, CLEAN_RUN_DATA, SET_AUTOUPDATE_RUN, SET_LOADING_STATE, GET_RUNNING_STATE, UPDATE_EXPERIMENT_TS, CURRENT_RUNNING, GET_EXPERIMENT_SUMMARY, CLEAR_SUMMARY_EXP, GET_EXPERIMENT_PERFORMANCE, CLEAN_PERFORMANCE_METRICS, ACTIVATE_SELECTION_MODE, DEACTIVATE_SELECTION_MODE, REMOVE_SELECTED_JOB, SET_CURRENT_COMMAND, UPDATE_SELECTED_JOBS, SET_LOADING_SUMMARY, CLEAN_EXPERIMENT_DATA, LOADING_PERFORMANCE_METRICS, GET_JOB_HISTORY, LOADING_JOB_HISTORY, LOADING_EXPERIMENT_RUNS, GET_EXPERIMENT_RUNS } from \"../types\";\nimport { AUTOSUBMIT_API_SOURCE, DEBUG } from \"../vars\";\nimport { timeStampToDate } from \"../utils\";\n\nconst ExperimentState = props => {\n  const initialState = {\n    experiments: [],\n    summaries: [],\n    experiment: {},\n    totalJobs: 0,\n    jobHistory: null,\n    experimentRuns: null,\n    experimentRunDetailForTree: null,\n    currentRunId: null,\n    usingRunData: false,\n    // not used by now\n    expectedLoadingTreeTime: 0,\n    expectedLoadingQuickView: 0,\n    loadingSummary: new Map(),\n    loading: false,\n    loadingPerformance: false,\n    experimentRunning: false,\n    rundata: null,\n    performancedata: null,\n    loadingRun: false,\n    loadingState: false,\n    loadingFilterTree: false,\n    loadingExperimentRuns: false,\n    currentCommand: null,\n    currentSelected: [],\n    startAutoUpdateRun: false,\n    startAutoUpdateTreePkl: false,\n    fancyTree: null,\n    allowJobMonitor: false,\n    canSelect: false\n  };\n  const [state, dispatch] = useReducer(ExperimentReducer, initialState);\n  const localserver = AUTOSUBMIT_API_SOURCE; //const localserver = \"http://84.88.185.94:8081\";\n\n  const debug = DEBUG; // Search Experiments\n\n  const searchExperiments = async text => {\n    setLoading();\n    const res = await axios.get(`${localserver}/search/${text}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: SEARCH_EXPERIMENTS,\n      payload: res.data.experiment\n    });\n  };\n\n  const getSummaries = () => {\n    const experiments = state.experiments;\n\n    for (var exp in experiments) {\n      var exp_name = experiments[exp].name;\n      getExperimentSummary(exp_name);\n    }\n  };\n\n  const getJobHistory = async (expid, job_name) => {\n    setLoadingJobHistory();\n    const res = await axios.get(`${localserver}/history/${expid}/${job_name}`).catch(error => {\n      alert(error.message);\n    });\n    debug && console.log(res.data);\n    const result = res ? res.data : null;\n    dispatch({\n      type: GET_JOB_HISTORY,\n      payload: result\n    });\n  };\n\n  const getExperimentRunJobData = async (expid, run_id) => {\n    const res = await axios.get(`${localserver}/rundetail/${expid}/${run_id}`).catch(error => {\n      alert(error.message);\n    });\n    debug && console.log(res.data); // console.log(res.data);\n\n    const result = res ? res.data.rundata : null;\n    dispatch({\n      type: GET_EXPERIMENT_RUN_JOBDATA,\n      payload: {\n        result: result,\n        runId: run_id\n      }\n    });\n  };\n\n  const getExperimentRuns = async expid => {\n    setLoadingExperimentRuns();\n    const res = await axios.get(`${localserver}/runs/${expid}`).catch(error => {\n      alert(error.message);\n    });\n    debug && console.log(res.data);\n    const result = res ? res.data : null; // console.log(result);\n\n    dispatch({\n      type: GET_EXPERIMENT_RUNS,\n      payload: result\n    });\n  }; // Get Summary for Search item\n\n\n  const getExperimentSummary = async expid => {\n    clearSummary(expid);\n    setLoadingSummary(expid);\n    const res = await axios.get(`${localserver}/summary/${expid}`);\n    const summary = res.data;\n    debug && console.log(summary); // console.log(summary);\n    // console.log(state.summaries);\n    //state.summaries.push({ key: expid, value: summary });\n\n    dispatch({\n      type: GET_EXPERIMENT_SUMMARY,\n      payload: {\n        expid: expid,\n        summary: summary\n      } //payload: { currentSummaries, summary, expid }\n\n    });\n  };\n\n  const getExperimentPerformanceMetrics = async expid => {\n    cleanPerformanceMetrics();\n    setLoadingPerformanceMetrics();\n    const res = await axios.get(`${localserver}/performance/${expid}`);\n    const metrics = res.data;\n    debug && console.log(metrics);\n    dispatch({\n      type: GET_EXPERIMENT_PERFORMANCE,\n      payload: metrics\n    });\n  };\n\n  const clearSummary = expid => {\n    dispatch({\n      type: CLEAR_SUMMARY_EXP,\n      payload: expid\n    });\n  };\n\n  const getCurrentRunning = async () => {\n    setLoading();\n    const res = await axios.get(`${localserver}/running/`);\n    debug && console.log(res.data);\n    dispatch({\n      type: CURRENT_RUNNING,\n      payload: res.data.experiment\n    });\n  }; //const updateSelection = async () => {};\n  // Get Experiment\n\n\n  const getExperiment = async expid => {\n    setLoading(); //cleanGraphData();\n\n    const res = await axios.get(`${localserver}/expinfo/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_EXPERIMENT,\n      payload: res.data\n    });\n  }; // Get Experiment Log Run\n\n\n  const getExperimentRun = async expid => {\n    setLoadingRun();\n    const res = await axios.get(`${localserver}/exprun/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_EXPERIMENT_RUN,\n      payload: res.data\n    });\n  }; // Get Running State\n\n\n  const getRunningState = async expid => {\n    setLoadingState();\n    const res = await axios.get(`${localserver}/ifrun/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_RUNNING_STATE,\n      payload: res.data.running\n    });\n  };\n\n  const setCurrentCommand = async command => {\n    // for change status\n    dispatch({\n      type: SET_CURRENT_COMMAND,\n      payload: command\n    }); //return command;\n  }; // Cleaning\n\n\n  const clearExperiments = () => dispatch({\n    type: CLEAR_EXPERIMENTS\n  }); //const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n\n\n  const clearRunDetailTree = () => dispatch({\n    type: CLEAR_RUNDETAIL_ON_TREE\n  });\n\n  const cleanRunData = () => dispatch({\n    type: CLEAN_RUN_DATA\n  });\n\n  const cleanPerformanceMetrics = () => dispatch({\n    type: CLEAN_PERFORMANCE_METRICS\n  });\n\n  const cleanExperimentData = () => dispatch({\n    type: CLEAN_EXPERIMENT_DATA\n  }); // Set Loading\n\n\n  const setLoading = () => dispatch({\n    type: SET_LOADING\n  });\n\n  const setLoadingRun = () => dispatch({\n    type: SET_LOADING_RUN\n  });\n\n  const setLoadingState = () => dispatch({\n    type: SET_LOADING_STATE\n  });\n\n  const setLoadingSummary = summExpid => dispatch({\n    type: SET_LOADING_SUMMARY,\n    payload: summExpid\n  });\n\n  const setLoadingPerformanceMetrics = () => dispatch({\n    type: LOADING_PERFORMANCE_METRICS\n  });\n\n  const setLoadingJobHistory = () => dispatch({\n    type: LOADING_JOB_HISTORY\n  });\n\n  const setLoadingExperimentRuns = () => dispatch({\n    type: LOADING_EXPERIMENT_RUNS\n  }); // Action Things\n\n\n  const updateExperimentTimeStamp = timeStamp => {\n    //console.log(timeStamp);\n    dispatch({\n      type: UPDATE_EXPERIMENT_TS,\n      payload: timeStamp\n    });\n  }; // Updates for the Selection Tool\n  // source: Tree, Graph\n\n\n  const updateCurrentSelectedTree = (selectedJob, treedata) => {\n    debug && console.log(treedata);\n\n    if (treedata) {\n      let currentNode = {\n        name: selectedJob,\n        color: \"yellow\",\n        source: \"Tree\"\n      };\n      const selectedNode = treedata.jobs.find(job => job.id === currentNode.name);\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode\n      });\n    }\n  };\n\n  const updateCurrentSelectedGraph = (selectedJob, data) => {\n    // console.log(data);\n    // console.log(selectedJob);\n    if (data) {\n      let currentNode = {\n        name: selectedJob,\n        color: \"yellow\"\n      };\n      const selectedNode = data.nodes.find(node => {\n        return node.id === currentNode.name;\n      });\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode\n      });\n    }\n  };\n\n  const setAutoUpdateRun = value => dispatch({\n    type: SET_AUTOUPDATE_RUN,\n    payload: value\n  });\n\n  const activateSelectionMode = () => dispatch({\n    type: ACTIVATE_SELECTION_MODE\n  });\n\n  const deactivateSelectionMode = () => dispatch({\n    type: DEACTIVATE_SELECTION_MODE\n  });\n\n  const removeSelectedJob = name => dispatch({\n    type: REMOVE_SELECTED_JOB,\n    payload: name\n  });\n\n  return /*#__PURE__*/React.createElement(ExperimentContext.Provider, {\n    value: {\n      experiments: state.experiments,\n      experiment: state.experiment,\n      summaries: state.summaries,\n      loadingSummary: state.loadingSummary,\n      loading: state.loading,\n      loadingRun: state.loadingRun,\n      loadingState: state.loadingState,\n      loadingPerformance: state.loadingPerformance,\n      jobHistory: state.jobHistory,\n      performancedata: state.performancedata,\n      experimentRuns: state.experimentRuns,\n      rundata: state.rundata,\n      currentSelected: state.currentSelected,\n      startAutoUpdateRun: state.startAutoUpdateRun,\n      experimentRunning: state.experimentRunning,\n      currentCommand: state.currentCommand,\n      canSelect: state.canSelect,\n      totalJobs: state.totalJobs,\n      expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n      expectedLoadingQuickView: state.expectedLoadingQuickView,\n      experimentRunDetailForTree: state.experimentRunDetailForTree,\n      currentRunId: state.currentRunId,\n      usingRunData: state.usingRunData,\n      setAutoUpdateRun,\n      searchExperiments,\n      getCurrentRunning,\n      clearExperiments,\n      getExperiment,\n      cleanPerformanceMetrics,\n      cleanRunData,\n      getExperimentRun,\n      timeStampToDate,\n      getRunningState,\n      getExperimentPerformanceMetrics,\n      getExperimentSummary,\n      clearSummary,\n      getSummaries,\n      activateSelectionMode,\n      deactivateSelectionMode,\n      removeSelectedJob,\n      setCurrentCommand,\n      updateCurrentSelectedGraph,\n      updateCurrentSelectedTree,\n      updateExperimentTimeStamp,\n      cleanExperimentData,\n      getJobHistory,\n      getExperimentRuns,\n      getExperimentRunJobData,\n      clearRunDetailTree\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default ExperimentState;","map":{"version":3,"sources":["/Users/BleuDChan/ReposBSC/autosubmitreact/src/components/context/experiment/ExperimentState.js"],"names":["React","useReducer","axios","ExperimentContext","ExperimentReducer","SEARCH_EXPERIMENTS","SET_LOADING","CLEAR_EXPERIMENTS","GET_EXPERIMENT","GET_EXPERIMENT_RUN","SET_LOADING_RUN","CLEAN_RUN_DATA","SET_AUTOUPDATE_RUN","SET_LOADING_STATE","GET_RUNNING_STATE","UPDATE_EXPERIMENT_TS","CURRENT_RUNNING","GET_EXPERIMENT_SUMMARY","CLEAR_SUMMARY_EXP","GET_EXPERIMENT_PERFORMANCE","CLEAN_PERFORMANCE_METRICS","ACTIVATE_SELECTION_MODE","DEACTIVATE_SELECTION_MODE","REMOVE_SELECTED_JOB","SET_CURRENT_COMMAND","UPDATE_SELECTED_JOBS","SET_LOADING_SUMMARY","CLEAN_EXPERIMENT_DATA","LOADING_PERFORMANCE_METRICS","GET_JOB_HISTORY","LOADING_JOB_HISTORY","LOADING_EXPERIMENT_RUNS","GET_EXPERIMENT_RUNS","AUTOSUBMIT_API_SOURCE","DEBUG","timeStampToDate","ExperimentState","props","initialState","experiments","summaries","experiment","totalJobs","jobHistory","experimentRuns","experimentRunDetailForTree","currentRunId","usingRunData","expectedLoadingTreeTime","expectedLoadingQuickView","loadingSummary","Map","loading","loadingPerformance","experimentRunning","rundata","performancedata","loadingRun","loadingState","loadingFilterTree","loadingExperimentRuns","currentCommand","currentSelected","startAutoUpdateRun","startAutoUpdateTreePkl","fancyTree","allowJobMonitor","canSelect","state","dispatch","localserver","debug","searchExperiments","text","setLoading","res","get","console","log","data","type","payload","getSummaries","exp","exp_name","name","getExperimentSummary","getJobHistory","expid","job_name","setLoadingJobHistory","catch","error","alert","message","result","getExperimentRunJobData","run_id","GET_EXPERIMENT_RUN_JOBDATA","runId","getExperimentRuns","setLoadingExperimentRuns","clearSummary","setLoadingSummary","summary","getExperimentPerformanceMetrics","cleanPerformanceMetrics","setLoadingPerformanceMetrics","metrics","getCurrentRunning","getExperiment","getExperimentRun","setLoadingRun","getRunningState","setLoadingState","running","setCurrentCommand","command","clearExperiments","clearRunDetailTree","CLEAR_RUNDETAIL_ON_TREE","cleanRunData","cleanExperimentData","summExpid","updateExperimentTimeStamp","timeStamp","updateCurrentSelectedTree","selectedJob","treedata","currentNode","color","source","selectedNode","jobs","find","job","id","status_color","updateCurrentSelectedGraph","nodes","node","setAutoUpdateRun","value","activateSelectionMode","deactivateSelectionMode","removeSelectedJob","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport ExperimentContext from \"./experimentContext\";\nimport ExperimentReducer from \"./experimentReducer\";\nimport {\n  SEARCH_EXPERIMENTS,\n  SET_LOADING,\n  CLEAR_EXPERIMENTS,\n  GET_EXPERIMENT,\n  //GET_TREE,\n  //SET_LOADING_TREE,\n  GET_EXPERIMENT_RUN,\n  SET_LOADING_RUN,\n  CLEAN_RUN_DATA,\n  SET_AUTOUPDATE_RUN,\n  SET_LOADING_STATE,\n  GET_RUNNING_STATE,\n  UPDATE_EXPERIMENT_TS,\n  CURRENT_RUNNING,\n  GET_EXPERIMENT_SUMMARY,\n  CLEAR_SUMMARY_EXP,\n  GET_EXPERIMENT_PERFORMANCE,\n  CLEAN_PERFORMANCE_METRICS,\n  ACTIVATE_SELECTION_MODE,\n  DEACTIVATE_SELECTION_MODE,\n  REMOVE_SELECTED_JOB,\n  SET_CURRENT_COMMAND,\n  UPDATE_SELECTED_JOBS,\n  SET_LOADING_SUMMARY,\n  CLEAN_EXPERIMENT_DATA,\n  LOADING_PERFORMANCE_METRICS,\n  GET_JOB_HISTORY,\n  LOADING_JOB_HISTORY,\n  LOADING_EXPERIMENT_RUNS,\n  GET_EXPERIMENT_RUNS,\n} from \"../types\";\n\nimport { AUTOSUBMIT_API_SOURCE, DEBUG } from \"../vars\";\n\nimport { timeStampToDate } from \"../utils\";\n\nconst ExperimentState = (props) => {\n  const initialState = {\n    experiments: [],\n    summaries: [],\n    experiment: {},\n    totalJobs: 0,\n    jobHistory: null,\n    experimentRuns: null,\n    experimentRunDetailForTree: null,\n    currentRunId: null,\n    usingRunData: false, // not used by now\n    expectedLoadingTreeTime: 0,\n    expectedLoadingQuickView: 0,\n    loadingSummary: new Map(),\n    loading: false,\n    loadingPerformance: false,\n    experimentRunning: false,\n    rundata: null,\n    performancedata: null,\n    loadingRun: false,\n    loadingState: false,\n    loadingFilterTree: false,\n    loadingExperimentRuns: false,\n    currentCommand: null,\n    currentSelected: [],\n    startAutoUpdateRun: false,\n    startAutoUpdateTreePkl: false,\n    fancyTree: null,\n    allowJobMonitor: false,\n    canSelect: false,\n  };\n\n  const [state, dispatch] = useReducer(ExperimentReducer, initialState);\n\n  const localserver = AUTOSUBMIT_API_SOURCE;\n  //const localserver = \"http://84.88.185.94:8081\";\n  const debug = DEBUG;\n\n  // Search Experiments\n  const searchExperiments = async (text) => {\n    setLoading();\n    const res = await axios.get(`${localserver}/search/${text}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: SEARCH_EXPERIMENTS,\n      payload: res.data.experiment,\n    });\n  };\n\n  const getSummaries = () => {\n    const experiments = state.experiments;\n    for (var exp in experiments) {\n      var exp_name = experiments[exp].name;\n      getExperimentSummary(exp_name);\n    }\n  };\n\n  const getJobHistory = async (expid, job_name) => {\n    setLoadingJobHistory();\n    const res = await axios\n      .get(`${localserver}/history/${expid}/${job_name}`)\n      .catch((error) => {\n        alert(error.message);\n      });\n    debug && console.log(res.data);\n    const result = res ? res.data : null;\n    dispatch({\n      type: GET_JOB_HISTORY,\n      payload: result,\n    });\n  };\n\n  const getExperimentRunJobData = async (expid, run_id) => {\n    const res = await axios.get(`${localserver}/rundetail/${expid}/${run_id}`).catch((error) => { alert(error.message);});\n    debug && console.log(res.data);\n    // console.log(res.data);\n    const result = res ? res.data.rundata : null;\n    dispatch({\n      type: GET_EXPERIMENT_RUN_JOBDATA,\n      payload: {result: result, runId: run_id},\n    });\n  }\n\n  const getExperimentRuns = async (expid) => {\n    setLoadingExperimentRuns();\n    const res = await axios.get(`${localserver}/runs/${expid}`).catch((error) => {alert(error.message);});\n    debug && console.log(res.data);\n    const result = res ? res.data : null;\n    // console.log(result);\n    dispatch({\n      type: GET_EXPERIMENT_RUNS,\n      payload: result,\n    })\n  }\n\n  // Get Summary for Search item\n  const getExperimentSummary = async (expid) => {\n    clearSummary(expid);\n    setLoadingSummary(expid);\n    const res = await axios.get(`${localserver}/summary/${expid}`);\n    const summary = res.data;\n    debug && console.log(summary);\n    // console.log(summary);\n    // console.log(state.summaries);\n    //state.summaries.push({ key: expid, value: summary });\n    dispatch({\n      type: GET_EXPERIMENT_SUMMARY,\n      payload: { expid: expid, summary: summary },\n      //payload: { currentSummaries, summary, expid }\n    });\n  };\n\n  const getExperimentPerformanceMetrics = async (expid) => {\n    cleanPerformanceMetrics();\n    setLoadingPerformanceMetrics();\n    const res = await axios.get(`${localserver}/performance/${expid}`);\n    const metrics = res.data;\n    debug && console.log(metrics);\n    dispatch({\n      type: GET_EXPERIMENT_PERFORMANCE,\n      payload: metrics,\n    });\n  };\n\n  const clearSummary = (expid) => {\n    dispatch({\n      type: CLEAR_SUMMARY_EXP,\n      payload: expid,\n    });\n  };\n\n  const getCurrentRunning = async () => {\n    setLoading();\n    const res = await axios.get(`${localserver}/running/`);\n    debug && console.log(res.data);\n    dispatch({\n      type: CURRENT_RUNNING,\n      payload: res.data.experiment,\n    });\n  };\n\n  //const updateSelection = async () => {};\n\n  // Get Experiment\n  const getExperiment = async (expid) => {\n    setLoading();\n    //cleanGraphData();\n    const res = await axios.get(`${localserver}/expinfo/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_EXPERIMENT,\n      payload: res.data,\n    });\n  };\n\n  // Get Experiment Log Run\n  const getExperimentRun = async (expid) => {\n    setLoadingRun();\n    const res = await axios.get(`${localserver}/exprun/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_EXPERIMENT_RUN,\n      payload: res.data,\n    });\n  };\n\n  // Get Running State\n  const getRunningState = async (expid) => {\n    setLoadingState();\n    const res = await axios.get(`${localserver}/ifrun/${expid}`);\n    debug && console.log(res.data);\n    dispatch({\n      type: GET_RUNNING_STATE,\n      payload: res.data.running,\n    });\n  };\n\n  const setCurrentCommand = async (command) => {\n    // for change status\n    dispatch({\n      type: SET_CURRENT_COMMAND,\n      payload: command,\n    });\n    //return command;\n  };\n\n  // Cleaning\n  const clearExperiments = () => dispatch({ type: CLEAR_EXPERIMENTS });\n  //const cleanGraphData = () => dispatch({ type: CLEAN_GRAPH_DATA });\n  const clearRunDetailTree = () => dispatch({ type: CLEAR_RUNDETAIL_ON_TREE })\n\n  const cleanRunData = () => dispatch({ type: CLEAN_RUN_DATA });\n\n  const cleanPerformanceMetrics = () =>\n    dispatch({ type: CLEAN_PERFORMANCE_METRICS });\n\n  const cleanExperimentData = () => dispatch({ type: CLEAN_EXPERIMENT_DATA });\n\n  // Set Loading\n  const setLoading = () => dispatch({ type: SET_LOADING });\n  const setLoadingRun = () => dispatch({ type: SET_LOADING_RUN });\n  const setLoadingState = () => dispatch({ type: SET_LOADING_STATE });\n  const setLoadingSummary = (summExpid) =>\n    dispatch({ type: SET_LOADING_SUMMARY, payload: summExpid });\n  const setLoadingPerformanceMetrics = () =>\n    dispatch({ type: LOADING_PERFORMANCE_METRICS });\n  const setLoadingJobHistory = () => dispatch({ type: LOADING_JOB_HISTORY });\n  const setLoadingExperimentRuns = () => dispatch({ type: LOADING_EXPERIMENT_RUNS });\n  // Action Things\n  const updateExperimentTimeStamp = (timeStamp) => {\n    //console.log(timeStamp);\n    dispatch({ type: UPDATE_EXPERIMENT_TS, payload: timeStamp });\n  };\n\n  // Updates for the Selection Tool\n  // source: Tree, Graph\n  const updateCurrentSelectedTree = (selectedJob, treedata) => {\n    debug && console.log(treedata);\n    if (treedata) {\n      let currentNode = { name: selectedJob, color: \"yellow\", source: \"Tree\" };\n      const selectedNode = treedata.jobs.find(\n        (job) => job.id === currentNode.name\n      );\n      currentNode.color = selectedNode.status_color;\n      dispatch({\n        type: UPDATE_SELECTED_JOBS,\n        payload: currentNode,\n      });\n    }\n  };\n\n  const updateCurrentSelectedGraph = (selectedJob, data) => {\n    // console.log(data);\n    // console.log(selectedJob);\n    if (data) {\n      let currentNode = { name: selectedJob, color: \"yellow\" };\n      const selectedNode = data.nodes.find((node) => {\n        return node.id === currentNode.name;\n      });\n      currentNode.color = selectedNode.status_color;\n      dispatch({ type: UPDATE_SELECTED_JOBS, payload: currentNode });\n    }\n  };\n\n  const setAutoUpdateRun = (value) =>\n    dispatch({ type: SET_AUTOUPDATE_RUN, payload: value });\n\n  const activateSelectionMode = () =>\n    dispatch({ type: ACTIVATE_SELECTION_MODE });\n  const deactivateSelectionMode = () =>\n    dispatch({ type: DEACTIVATE_SELECTION_MODE });\n  const removeSelectedJob = (name) =>\n    dispatch({ type: REMOVE_SELECTED_JOB, payload: name });\n\n  return (\n    <ExperimentContext.Provider\n      value={{\n        experiments: state.experiments,\n        experiment: state.experiment,\n        summaries: state.summaries,\n        loadingSummary: state.loadingSummary,\n        loading: state.loading,\n        loadingRun: state.loadingRun,\n        loadingState: state.loadingState,\n        loadingPerformance: state.loadingPerformance,\n        jobHistory: state.jobHistory,\n        performancedata: state.performancedata,\n        experimentRuns: state.experimentRuns,\n        rundata: state.rundata,\n        currentSelected: state.currentSelected,\n        startAutoUpdateRun: state.startAutoUpdateRun,\n        experimentRunning: state.experimentRunning,\n        currentCommand: state.currentCommand,\n        canSelect: state.canSelect,\n        totalJobs: state.totalJobs,\n        expectedLoadingTreeTime: state.expectedLoadingTreeTime,\n        expectedLoadingQuickView: state.expectedLoadingQuickView,\n        experimentRunDetailForTree: state.experimentRunDetailForTree,\n        currentRunId: state.currentRunId,\n        usingRunData: state.usingRunData,\n        setAutoUpdateRun,\n        searchExperiments,\n        getCurrentRunning,\n        clearExperiments,\n        getExperiment,\n        cleanPerformanceMetrics,\n        cleanRunData,\n        getExperimentRun,\n        timeStampToDate,\n        getRunningState,\n        getExperimentPerformanceMetrics,\n        getExperimentSummary,\n        clearSummary,\n        getSummaries,\n        activateSelectionMode,\n        deactivateSelectionMode,\n        removeSelectedJob,\n        setCurrentCommand,\n        updateCurrentSelectedGraph,\n        updateCurrentSelectedTree,\n        updateExperimentTimeStamp,\n        cleanExperimentData,\n        getJobHistory,\n        getExperimentRuns,\n        getExperimentRunJobData,\n        clearRunDetailTree,\n      }}\n    >\n      {props.children}\n    </ExperimentContext.Provider>\n  );\n};\n\nexport default ExperimentState;\n"]},"metadata":{},"sourceType":"module"}